var C=(k,c,a)=>new Promise((n,h)=>{var i=m=>{try{b(a.next(m))}catch(w){h(w)}},I=m=>{try{b(a.throw(m))}catch(w){h(w)}},b=m=>m.done?n(m.value):Promise.resolve(m.value).then(i,I);b((a=a.apply(k,c)).next())});import{A as R,K as x,M as F,r as G,o as l,c as v,w as o,a as p,y as u,C as L,x as y,F as r,B as _,G as M,N,T as S,U as V,u as D,J as $,e as U}from"./frappe-ui-U0jLBpY2.js";import{s as d}from"./index-DvvvyKYK.js";function J(){const k=x(!1),c=x(!1),a=x(null),n=()=>C(this,null,function*(){if(!a.value)return;a.value.prompt();const{outcome:i}=yield a.value.userChoice;i==="accepted"&&(console.log("PWA installation accepted"),k.value=!1),a.value=null}),h=()=>{window.matchMedia("(display-mode: standalone)").matches&&(c.value=!0)};return R(()=>{window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),a.value=i,k.value=!0}),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),c.value=!0,k.value=!1}),h()}),{isInstallable:k,isInstalled:c,install:n}}const Q={class:"bg-white shadow-md fixed w-full top-0 z-50 border-b border-gray-200"},q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},X={class:"flex justify-between h-16"},Y={class:"flex items-center"},Z={key:0,class:"h-10 w-auto max-w-[120px] flex items-center"},ee=["src","alt"],oe={key:1,class:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center"},te={class:"text-white font-bold text-lg"},se={class:"hidden md:flex items-center space-x-1"},ne={class:"flex items-center space-x-3"},le={class:"px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-1"},re={class:"flex items-center space-x-2 px-2 py-1 rounded-lg hover:bg-gray-50 transition-colors"},ae={key:3,class:"flex items-center space-x-2"},ie={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de={key:0,class:"md:hidden border-t border-gray-200 bg-white"},ce={class:"px-2 pt-2 pb-3 space-y-1"},pe={key:0,class:"border-t border-gray-200 pt-4 mt-4"},me={class:"flex items-center px-3 py-2 mb-2"},ve={class:"ml-3"},ge={class:"text-sm font-medium text-gray-900"},xe={class:"text-xs text-gray-500"},ke={__name:"Navigation",setup(k){const c=F(),a=J(),n=x(!1),h=x(!1),i=x(null),I=x(!1),b=x(null),m=x({is_employee:!1}),w=U(()=>[{label:"My Profile",icon:"user",onClick:()=>c.push("/my-account")},{label:"My Settings",icon:"settings",onClick:()=>c.push("/my-account")},{label:"Session Defaults",icon:"sliders",onClick:()=>window.location.href="/app/user"},{label:"",component:"divider"},{label:"Employee Dashboard",icon:"briefcase",onClick:()=>c.push("/employee-dashboard"),condition:()=>m.value.is_employee},{label:"Open Desk",icon:"layout",onClick:()=>window.location.href="/app"},{label:"View Website",icon:"globe",onClick:()=>c.push("/")},{label:"",component:"divider"},{label:"Log out",icon:"log-out",onClick:A}]),z=U(()=>[{label:"Documentation",icon:"book",onClick:()=>window.open("https://docs.erpnext.com","_blank")},{label:"Community Forum",icon:"message-circle",onClick:()=>window.open("https://discuss.frappe.io","_blank")},{label:"Report an Issue",icon:"alert-circle",onClick:()=>window.open("https://github.com/frappe/erpnext/issues","_blank")},{label:"",component:"divider"},{label:"Install App",icon:"download",onClick:()=>a.install(),condition:()=>a.isInstallable&&d.isLoggedIn},{label:"Keyboard Shortcuts",icon:"command",onClick:()=>alert(`Ctrl+G: Search
Ctrl+K: Quick Actions`)}]),O=()=>C(this,null,function*(){try{const t=yield $("ascra_frontend.api.get_company_info");t&&t.success&&(i.value=t.company)}catch(t){console.error("Error loading company info:",t)}}),H=()=>C(this,null,function*(){if(d.isLoggedIn)try{const t=yield $("ascra_frontend.api.get_user_profile");t&&t.success&&(b.value=t.user)}catch(t){console.error("Error loading user profile:",t)}}),T=()=>C(this,null,function*(){if(d.isLoggedIn)try{const t=yield $("ascra_frontend.api.check_user_roles");t&&t.success&&(m.value=t.roles)}catch(t){console.error("Error checking user roles:",t)}}),W=()=>{I.value=!0},K=()=>{var t;return(t=i.value)!=null&&t.company_name?i.value.company_name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"AC"},E=t=>t?t.split("@")[0].charAt(0).toUpperCase():"U",f=t=>{if(c.currentRoute.value.path!=="/")c.push("/").then(()=>{setTimeout(()=>{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})},100)});else{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}},A=()=>{d.logout.submit()};return R(()=>{O(),d.isLoggedIn&&(H(),T())}),(t,e)=>{var B,P;const g=G("router-link");return l(),v("nav",Q,[o("div",q,[o("div",X,[o("div",Y,[p(g,{to:"/",class:"flex-shrink-0 flex items-center"},{default:u(()=>{var s;return[(s=i.value)!=null&&s.logo&&!I.value?(l(),v("div",Z,[o("img",{src:i.value.logo,alt:i.value.company_name||"Company Logo",class:"h-full w-auto object-contain max-h-10",onError:W},null,40,ee)])):(l(),v("div",oe,[o("span",te,L(K()),1)]))]}),_:1})]),o("div",se,[p(g,{to:"/",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"},{default:u(()=>[...e[14]||(e[14]=[y(" Home ",-1)])]),_:1}),o("a",{onClick:e[0]||(e[0]=s=>f("services")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Services "),p(g,{to:"/erpnext",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"},{default:u(()=>[...e[15]||(e[15]=[y(" ERPNext ",-1)])]),_:1}),o("a",{onClick:e[1]||(e[1]=s=>f("portfolio")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Portfolio "),o("a",{onClick:e[2]||(e[2]=s=>f("about")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," About "),o("a",{onClick:e[3]||(e[3]=s=>f("contact")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Contact ")]),o("div",ne,[r(d).isLoggedIn?(l(),v("button",{key:0,class:"p-2 text-gray-600 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-colors relative",onClick:e[4]||(e[4]=s=>h.value=!h.value)},[...e[16]||(e[16]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),o("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},null,-1)])])):_("",!0),r(d).isLoggedIn?(l(),M(r(S),{key:1,options:z.value},{default:u(({open:s})=>[o("button",le,[e[18]||(e[18]=o("span",null,"Help",-1)),(l(),v("svg",{class:N(["w-4 h-4",{"rotate-180":s}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[17]||(e[17]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),_:1},8,["options"])):_("",!0),r(d).isLoggedIn?(l(),M(r(S),{key:2,options:w.value},{default:u(({open:s})=>{var j;return[o("button",re,[p(r(V),{label:E(r(d).user),image:(j=b.value)==null?void 0:j.user_image,size:"sm",class:"w-8 h-8"},null,8,["label","image"]),(l(),v("svg",{class:N(["w-4 h-4 text-gray-600",{"rotate-180":s}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[19]||(e[19]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]}),_:1},8,["options"])):(l(),v("div",ae,[p(g,{to:"/account/login"},{default:u(()=>[p(r(D),{theme:"gray",variant:"outline",size:"sm"},{default:u(()=>[...e[20]||(e[20]=[y(" Login ",-1)])]),_:1})]),_:1}),p(g,{to:"/account/signup"},{default:u(()=>[p(r(D),{theme:"blue",variant:"solid",size:"sm"},{default:u(()=>[...e[21]||(e[21]=[y(" Sign Up ",-1)])]),_:1})]),_:1})])),o("button",{onClick:e[5]||(e[5]=s=>n.value=!n.value),class:"md:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-50"},[n.value?(l(),v("svg",ue,[...e[23]||(e[23]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(l(),v("svg",ie,[...e[22]||(e[22]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])])])]),n.value?(l(),v("div",de,[o("div",ce,[p(g,{to:"/",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[6]||(e[6]=s=>n.value=!1)},{default:u(()=>[...e[24]||(e[24]=[y(" Home ",-1)])]),_:1}),o("a",{onClick:e[7]||(e[7]=s=>{f("services"),n.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Services "),p(g,{to:"/erpnext",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[8]||(e[8]=s=>n.value=!1)},{default:u(()=>[...e[25]||(e[25]=[y(" ERPNext ",-1)])]),_:1}),o("a",{onClick:e[9]||(e[9]=s=>{f("portfolio"),n.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Portfolio "),o("a",{onClick:e[10]||(e[10]=s=>{f("about"),n.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," About "),o("a",{onClick:e[11]||(e[11]=s=>{f("contact"),n.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Contact "),r(d).isLoggedIn?(l(),v("div",pe,[o("div",me,[p(r(V),{label:E(r(d).user),image:(B=b.value)==null?void 0:B.user_image,size:"md",class:"w-10 h-10"},null,8,["label","image"]),o("div",ve,[o("div",ge,L(((P=b.value)==null?void 0:P.full_name)||r(d).user),1),o("div",xe,L(r(d).user),1)])]),p(g,{to:"/my-account",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[12]||(e[12]=s=>n.value=!1)},{default:u(()=>[...e[26]||(e[26]=[y(" My Account ",-1)])]),_:1}),e[28]||(e[28]=o("a",{href:"/app",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50"}," Open Desk ",-1)),m.value.is_employee?(l(),M(g,{key:0,to:"/employee-dashboard",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[13]||(e[13]=s=>n.value=!1)},{default:u(()=>[...e[27]||(e[27]=[y(" Employee Dashboard ",-1)])]),_:1})):_("",!0),o("button",{onClick:A,class:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50"}," Log out ")])):_("",!0)])])):_("",!0)])}}};export{ke as _};
//# sourceMappingURL=Navigation-CgdRJdf1.js.map
