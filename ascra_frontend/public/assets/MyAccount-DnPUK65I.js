var E=Object.defineProperty;var A=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var j=(p,n,a)=>n in p?E(p,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[n]=a,P=(p,n)=>{for(var a in n||(n={}))T.call(n,a)&&j(p,a,n[a]);if(A)for(var a of A(n))$.call(n,a)&&j(p,a,n[a]);return p};var C=(p,n,a)=>new Promise((o,m)=>{var V=r=>{try{x(a.next(r))}catch(d){m(d)}},h=r=>{try{x(a.throw(r))}catch(d){m(d)}},x=r=>r.done?o(r.value):Promise.resolve(r.value).then(V,h);x((a=a.apply(p,n)).next())});import{i as L,o as v,c,a as i,y as t,D as f,z as y,C as _,N as q,A as w,G as u,x as k,F as N,v as g,J,K as U,j as b,e as G}from"./frappe-ui-BZ2Hvwvi.js";import"./index-CgJEa-zF.js";import{_ as H}from"./Navigation-BXoot8LA.js";const K={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800"},O={class:"pt-20 pb-12"},R={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Q={class:"lg:col-span-1"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},X={class:"text-center mb-6"},Z={key:0,class:"w-32 h-32 mx-auto rounded-full overflow-hidden border-4 border-blue-100"},ee=["src","alt"],te={key:1,class:"w-32 h-32 mx-auto rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-4xl font-bold"},ae={class:"mt-4 text-xl font-bold text-gray-900 dark:text-white"},se={class:"text-gray-600 dark:text-gray-300 text-sm"},le={key:2,class:"text-gray-500 dark:text-gray-400 text-sm mt-2"},oe={class:"border-t border-gray-200 dark:border-gray-600 pt-6"},re={class:"space-y-4"},ne={class:"flex items-center justify-between"},de={class:"text-sm font-medium text-gray-900 dark:text-white"},ie={key:0,class:"flex items-center justify-between"},ue={class:"text-sm font-medium text-gray-900 dark:text-white"},me={class:"flex items-center justify-between"},pe={class:"border-t border-gray-200 dark:border-gray-600 pt-6 mt-6 space-y-3"},ve={class:"lg:col-span-2"},ce={key:0,class:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},fe={class:"flex items-center"},ge={class:"text-green-800 dark:text-green-200"},be={key:1,class:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},we={class:"flex items-center"},xe={class:"text-red-800 dark:text-red-200"},ye={key:2,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={class:"flex justify-end space-x-4"},he={key:3,class:"bg-white rounded-xl shadow-sm border border-gray-200"},Ve={class:"flex justify-end space-x-4"},Ae={__name:"MyAccount",setup(p){const n=b("profile"),a=b({name:"",email:"",first_name:"",last_name:"",full_name:"",user_image:"",bio:"",location:"",interest:"",phone:"",mobile_no:"",birth_date:"",gender:"",enabled:!0,creation:""}),o=b({first_name:"",last_name:"",location:"",interest:"",phone:"",mobile_no:"",bio:""}),m=b({old_password:"",new_password:"",confirm_password:""}),V=b(!1),h=b(!1),x=b(!1),r=b(""),d=b(""),z=G(()=>{if(a.value.first_name&&a.value.last_name)return a.value.first_name.charAt(0)+a.value.last_name.charAt(0);if(a.value.full_name){const s=a.value.full_name.split(" ");return s.length>1?s[0].charAt(0)+s[1].charAt(0):s[0].charAt(0)}return a.value.email.charAt(0).toUpperCase()}),B=()=>C(this,null,function*(){V.value=!0;try{const s=yield U("ascra_frontend.api.get_user_profile");s&&s.success&&(a.value=s.user,o.value={first_name:s.user.first_name||"",last_name:s.user.last_name||"",location:s.user.location||"",interest:s.user.interest||"",phone:s.user.phone||"",mobile_no:s.user.mobile_no||"",bio:s.user.bio||""})}catch(s){console.error("Error loading user profile:",s),d.value="Failed to load user profile"}finally{V.value=!1}}),F=()=>C(this,null,function*(){h.value=!0,r.value="",d.value="";try{const s=yield U("ascra_frontend.api.update_user_profile",{profile_data:JSON.stringify(o.value)});s&&s.success?(r.value="Profile updated successfully!",a.value=P(P({},a.value),s.user),setTimeout(()=>{r.value=""},5e3)):d.value=(s==null?void 0:s.message)||"Failed to update profile"}catch(s){console.error("Error updating profile:",s),d.value="An error occurred while updating your profile"}finally{h.value=!1}}),I=()=>C(this,null,function*(){if(r.value="",d.value="",m.value.new_password!==m.value.confirm_password){d.value="New passwords do not match";return}if(m.value.new_password.length<8){d.value="Password must be at least 8 characters long";return}x.value=!0;try{const s=yield U("ascra_frontend.api.update_password",{old_password:m.value.old_password,new_password:m.value.new_password});s&&s.success?(r.value="Password updated successfully!",M(),setTimeout(()=>{r.value=""},5e3)):d.value=(s==null?void 0:s.message)||"Failed to update password"}catch(s){console.error("Error updating password:",s),d.value="An error occurred while updating your password"}finally{x.value=!1}}),S=()=>{o.value={first_name:a.value.first_name||"",last_name:a.value.last_name||"",location:a.value.location||"",interest:a.value.interest||"",phone:a.value.phone||"",mobile_no:a.value.mobile_no||"",bio:a.value.bio||""},r.value="",d.value=""},M=()=>{m.value={old_password:"",new_password:"",confirm_password:""},r.value="",d.value=""},D=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return L(()=>{B()}),(s,e)=>(v(),c("div",K,[i(H),t("div",O,[t("div",R,[e[29]||(e[29]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"My Account"),t("p",{class:"text-gray-600 dark:text-gray-300 mt-2"},"Manage your profile and account settings")],-1)),t("div",Y,[t("div",Q,[t("div",W,[t("div",X,[a.value.user_image?(v(),c("div",Z,[t("img",{src:a.value.user_image,alt:a.value.full_name,class:"w-full h-full object-cover"},null,8,ee)])):(v(),c("div",te,f(z.value),1)),t("h2",ae,f(a.value.full_name||a.value.email),1),t("p",se,f(a.value.email),1),a.value.location?(v(),c("p",le,[e[12]||(e[12]=t("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),y(" "+f(a.value.location),1)])):_("",!0)]),t("div",oe,[t("div",re,[t("div",ne,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Member Since",-1)),t("span",de,f(D(a.value.creation)),1)]),a.value.interest?(v(),c("div",ie,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Interests",-1)),t("span",ue,f(a.value.interest),1)])):_("",!0),t("div",me,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Account Status",-1)),t("span",{class:q([a.value.enabled?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400","text-sm font-medium"])},f(a.value.enabled?"Active":"Inactive"),3)])])]),t("div",pe,[i(u(k),{variant:"solid",class:"w-full",onClick:e[0]||(e[0]=l=>n.value="profile")},{prefix:w(()=>[...e[16]||(e[16]=[t("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]),default:w(()=>[e[17]||(e[17]=y(" Edit Profile ",-1))]),_:1}),i(u(k),{variant:"outline",class:"w-full",onClick:e[1]||(e[1]=l=>n.value="security")},{prefix:w(()=>[...e[18]||(e[18]=[t("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)])]),default:w(()=>[e[19]||(e[19]=y(" Change Password ",-1))]),_:1})])])]),t("div",ve,[r.value?(v(),c("div",ce,[t("div",fe,[e[20]||(e[20]=t("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",ge,f(r.value),1)])])):_("",!0),d.value?(v(),c("div",be,[t("div",we,[e[21]||(e[21]=t("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",xe,f(d.value),1)])])):_("",!0),n.value==="profile"?(v(),c("div",ye,[e[24]||(e[24]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Profile Information"),t("p",{class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},"Update your personal information and profile details")],-1)),t("form",{onSubmit:N(F,["prevent"]),class:"p-6 space-y-6"},[t("div",_e,[i(u(g),{type:"text",modelValue:o.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.first_name=l),label:"First Name",placeholder:"John"},null,8,["modelValue"]),i(u(g),{type:"text",modelValue:o.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.last_name=l),label:"Last Name",placeholder:"Doe"},null,8,["modelValue"])]),i(u(g),{type:"text",modelValue:o.value.location,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.location=l),label:"Location",placeholder:"New York, USA"},null,8,["modelValue"]),i(u(g),{type:"text",modelValue:o.value.interest,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.interest=l),label:"Interests",placeholder:"Technology, Design, Innovation"},null,8,["modelValue"]),i(u(g),{type:"text",modelValue:o.value.phone,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.phone=l),label:"Phone",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),i(u(g),{type:"text",modelValue:o.value.mobile_no,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.mobile_no=l),label:"Mobile",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),i(u(J),{modelValue:o.value.bio,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.bio=l),label:"Bio",placeholder:"Tell us about yourself...",rows:"4"},null,8,["modelValue"]),t("div",ke,[i(u(k),{type:"button",variant:"outline",onClick:S},{default:w(()=>[...e[22]||(e[22]=[y(" Cancel ",-1)])]),_:1}),i(u(k),{type:"submit",variant:"solid",loading:h.value},{default:w(()=>[...e[23]||(e[23]=[y(" Save Changes ",-1)])]),_:1},8,["loading"])])],32)])):_("",!0),n.value==="security"?(v(),c("div",he,[e[28]||(e[28]=t("div",{class:"p-6 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"Change Password"),t("p",{class:"text-sm text-gray-600 mt-1"},"Update your password to keep your account secure")],-1)),t("form",{onSubmit:N(I,["prevent"]),class:"p-6 space-y-6"},[i(u(g),{type:"password",modelValue:m.value.old_password,"onUpdate:modelValue":e[9]||(e[9]=l=>m.value.old_password=l),label:"Current Password",placeholder:"Enter your current password",required:""},null,8,["modelValue"]),i(u(g),{type:"password",modelValue:m.value.new_password,"onUpdate:modelValue":e[10]||(e[10]=l=>m.value.new_password=l),label:"New Password",placeholder:"Enter new password",required:""},null,8,["modelValue"]),i(u(g),{type:"password",modelValue:m.value.confirm_password,"onUpdate:modelValue":e[11]||(e[11]=l=>m.value.confirm_password=l),label:"Confirm New Password",placeholder:"Confirm new password",required:""},null,8,["modelValue"]),e[27]||(e[27]=t("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[t("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Password Requirements:"),t("ul",{class:"text-sm text-blue-800 space-y-1"},[t("li",null,"• At least 8 characters long"),t("li",null,"• Include uppercase and lowercase letters"),t("li",null,"• Include at least one number"),t("li",null,"• Include at least one special character")])],-1)),t("div",Ve,[i(u(k),{type:"button",variant:"outline",onClick:M},{default:w(()=>[...e[25]||(e[25]=[y(" Cancel ",-1)])]),_:1}),i(u(k),{type:"submit",variant:"solid",loading:x.value},{default:w(()=>[...e[26]||(e[26]=[y(" Update Password ",-1)])]),_:1},8,["loading"])])],32)])):_("",!0)])])])])]))}};export{Ae as default};
//# sourceMappingURL=MyAccount-DnPUK65I.js.map
