var I=(k,c,a)=>new Promise((l,C)=>{var g=p=>{try{_(a.next(p))}catch(h){C(h)}},x=p=>{try{_(a.throw(p))}catch(h){C(h)}},_=p=>p.done?l(p.value):Promise.resolve(p.value).then(g,x);_((a=a.apply(k,c)).next())});import{A as z,K as v,M as K,r as J,o as r,c as u,w as o,a as m,y as d,C as L,x as y,F as n,B as w,G as M,N as j,T as N,U as V,u as D,J as $,e as U}from"./frappe-ui-U0jLBpY2.js";import{s as i}from"./index-CZidoI6T.js";function Q(){const k=v(!1),c=v(!1),a=v(null),l=()=>I(this,null,function*(){if(!a.value)return;a.value.prompt();const{outcome:g}=yield a.value.userChoice;g==="accepted"&&(console.log("PWA installation accepted"),k.value=!1),a.value=null}),C=()=>{window.matchMedia("(display-mode: standalone)").matches&&(c.value=!0)};return z(()=>{window.addEventListener("beforeinstallprompt",g=>{g.preventDefault(),a.value=g,k.value=!0}),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),c.value=!0,k.value=!1}),C()}),{isInstallable:k,isInstalled:c,install:l}}const q={class:"bg-white shadow-md fixed w-full top-0 z-50 border-b border-gray-200"},X={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"flex justify-between h-16"},Z={class:"flex items-center"},ee={key:0,class:"h-10 w-auto max-w-[120px] flex items-center"},oe=["src","alt"],te={key:1,class:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center"},se={class:"text-white font-bold text-lg"},ne={class:"hidden md:flex items-center space-x-1"},le={class:"flex items-center space-x-3"},re={key:0,class:"hidden lg:block"},ae={class:"relative"},ie={class:"px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-colors flex items-center space-x-1"},ue={class:"flex items-center space-x-2 px-2 py-1 rounded-lg hover:bg-gray-50 transition-colors"},de={key:5,class:"flex items-center space-x-2"},ce={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pe={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me={key:0,class:"md:hidden border-t border-gray-200 bg-white"},ve={class:"px-2 pt-2 pb-3 space-y-1"},ge={key:0,class:"border-t border-gray-200 pt-4 mt-4"},be={class:"flex items-center px-3 py-2 mb-2"},xe={class:"ml-3"},fe={class:"text-sm font-medium text-gray-900"},ye={class:"text-xs text-gray-500"},Ce={__name:"Navigation",setup(k){const c=K(),a=Q(),l=v(!1),C=v(!1),g=v(!1),x=v(null),_=v(!1),p=v(null),h=v({is_employee:!1}),R=U(()=>[{label:"My Profile",icon:"user",onClick:()=>c.push("/my-account")},{label:"My Settings",icon:"settings",onClick:()=>c.push("/my-account")},{label:"Session Defaults",icon:"sliders",onClick:()=>window.location.href="/app/user"},{label:"",component:"divider"},{label:"Employee Dashboard",icon:"briefcase",onClick:()=>c.push("/employee-dashboard"),condition:()=>h.value.is_employee},{label:"Open Desk",icon:"layout",onClick:()=>window.location.href="/app"},{label:"View Website",icon:"globe",onClick:()=>c.push("/")},{label:"",component:"divider"},{label:"Log out",icon:"log-out",onClick:A}]),O=U(()=>[{label:"Documentation",icon:"book",onClick:()=>window.open("https://docs.erpnext.com","_blank")},{label:"Community Forum",icon:"message-circle",onClick:()=>window.open("https://discuss.frappe.io","_blank")},{label:"Report an Issue",icon:"alert-circle",onClick:()=>window.open("https://github.com/frappe/erpnext/issues","_blank")},{label:"",component:"divider"},{label:"Keyboard Shortcuts",icon:"command",onClick:()=>alert(`Ctrl+G: Search
Ctrl+K: Quick Actions`)}]),H=()=>I(this,null,function*(){try{const t=yield $("ascra_frontend.api.get_company_info");t&&t.success&&(x.value=t.company)}catch(t){console.error("Error loading company info:",t)}}),T=()=>I(this,null,function*(){if(i.isLoggedIn)try{const t=yield $("ascra_frontend.api.get_user_profile");t&&t.success&&(p.value=t.user)}catch(t){console.error("Error loading user profile:",t)}}),W=()=>I(this,null,function*(){if(i.isLoggedIn)try{const t=yield $("ascra_frontend.api.check_user_roles");t&&t.success&&(h.value=t.roles)}catch(t){console.error("Error checking user roles:",t)}}),F=()=>{_.value=!0},G=()=>{var t;return(t=x.value)!=null&&t.company_name?x.value.company_name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"AC"},E=t=>t?t.split("@")[0].charAt(0).toUpperCase():"U",f=t=>{if(c.currentRoute.value.path!=="/")c.push("/").then(()=>{setTimeout(()=>{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})},100)});else{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}},A=()=>{i.logout.submit()};return z(()=>{H(),i.isLoggedIn&&(T(),W())}),(t,e)=>{var B,P;const b=J("router-link");return r(),u("nav",q,[o("div",X,[o("div",Y,[o("div",Z,[m(b,{to:"/",class:"flex-shrink-0 flex items-center"},{default:d(()=>{var s;return[(s=x.value)!=null&&s.logo&&!_.value?(r(),u("div",ee,[o("img",{src:x.value.logo,alt:x.value.company_name||"Company Logo",class:"h-full w-auto object-contain max-h-10",onError:F},null,40,oe)])):(r(),u("div",te,[o("span",se,L(G()),1)]))]}),_:1})]),o("div",ne,[m(b,{to:"/",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"},{default:d(()=>[...e[16]||(e[16]=[y(" Home ",-1)])]),_:1}),o("a",{onClick:e[0]||(e[0]=s=>f("services")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Services "),m(b,{to:"/erpnext",class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors"},{default:d(()=>[...e[17]||(e[17]=[y(" ERPNext ",-1)])]),_:1}),o("a",{onClick:e[1]||(e[1]=s=>f("portfolio")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Portfolio "),o("a",{onClick:e[2]||(e[2]=s=>f("about")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," About "),o("a",{onClick:e[3]||(e[3]=s=>f("contact")),class:"px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 transition-colors cursor-pointer"}," Contact ")]),o("div",le,[n(i).isLoggedIn?(r(),u("div",re,[o("div",ae,[o("input",{type:"text",placeholder:"Search or type a command (Ctrl + G)",class:"w-64 px-4 py-2 pl-10 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onFocus:e[4]||(e[4]=s=>C.value=!0)},null,32),e[18]||(e[18]=o("svg",{class:"absolute left-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])):w("",!0),n(i).isLoggedIn?(r(),u("button",{key:1,class:"p-2 text-gray-600 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-colors relative",onClick:e[5]||(e[5]=s=>g.value=!g.value)},[...e[19]||(e[19]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),o("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"},null,-1)])])):w("",!0),n(a).isInstallable&&n(i).isLoggedIn?(r(),u("button",{key:2,onClick:e[6]||(e[6]=(...s)=>n(a).install&&n(a).install(...s)),class:"px-3 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors"}," Install App ")):w("",!0),n(i).isLoggedIn?(r(),M(n(N),{key:3,options:O.value},{default:d(({open:s})=>[o("button",ie,[e[21]||(e[21]=o("span",null,"Help",-1)),(r(),u("svg",{class:j(["w-4 h-4",{"rotate-180":s}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[20]||(e[20]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),_:1},8,["options"])):w("",!0),n(i).isLoggedIn?(r(),M(n(N),{key:4,options:R.value},{default:d(({open:s})=>{var S;return[o("button",ue,[m(n(V),{label:E(n(i).user),image:(S=p.value)==null?void 0:S.user_image,size:"sm",class:"w-8 h-8"},null,8,["label","image"]),(r(),u("svg",{class:j(["w-4 h-4 text-gray-600",{"rotate-180":s}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[22]||(e[22]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]}),_:1},8,["options"])):(r(),u("div",de,[m(b,{to:"/account/login"},{default:d(()=>[m(n(D),{theme:"gray",variant:"outline",size:"sm"},{default:d(()=>[...e[23]||(e[23]=[y(" Login ",-1)])]),_:1})]),_:1}),m(b,{to:"/account/signup"},{default:d(()=>[m(n(D),{theme:"blue",variant:"solid",size:"sm"},{default:d(()=>[...e[24]||(e[24]=[y(" Sign Up ",-1)])]),_:1})]),_:1})])),o("button",{onClick:e[7]||(e[7]=s=>l.value=!l.value),class:"md:hidden p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-50"},[l.value?(r(),u("svg",pe,[...e[26]||(e[26]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(r(),u("svg",ce,[...e[25]||(e[25]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])])])]),l.value?(r(),u("div",me,[o("div",ve,[m(b,{to:"/",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[8]||(e[8]=s=>l.value=!1)},{default:d(()=>[...e[27]||(e[27]=[y(" Home ",-1)])]),_:1}),o("a",{onClick:e[9]||(e[9]=s=>{f("services"),l.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Services "),m(b,{to:"/erpnext",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[10]||(e[10]=s=>l.value=!1)},{default:d(()=>[...e[28]||(e[28]=[y(" ERPNext ",-1)])]),_:1}),o("a",{onClick:e[11]||(e[11]=s=>{f("portfolio"),l.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Portfolio "),o("a",{onClick:e[12]||(e[12]=s=>{f("about"),l.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," About "),o("a",{onClick:e[13]||(e[13]=s=>{f("contact"),l.value=!1}),class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50 cursor-pointer"}," Contact "),n(i).isLoggedIn?(r(),u("div",ge,[o("div",be,[m(n(V),{label:E(n(i).user),image:(B=p.value)==null?void 0:B.user_image,size:"md",class:"w-10 h-10"},null,8,["label","image"]),o("div",xe,[o("div",fe,L(((P=p.value)==null?void 0:P.full_name)||n(i).user),1),o("div",ye,L(n(i).user),1)])]),m(b,{to:"/my-account",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[14]||(e[14]=s=>l.value=!1)},{default:d(()=>[...e[29]||(e[29]=[y(" My Account ",-1)])]),_:1}),e[31]||(e[31]=o("a",{href:"/app",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50"}," Open Desk ",-1)),h.value.is_employee?(r(),M(b,{key:0,to:"/employee-dashboard",class:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-gray-50",onClick:e[15]||(e[15]=s=>l.value=!1)},{default:d(()=>[...e[30]||(e[30]=[y(" Employee Dashboard ",-1)])]),_:1})):w("",!0),o("button",{onClick:A,class:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50"}," Log out ")])):w("",!0)])])):w("",!0)])}}};export{Ce as _};
//# sourceMappingURL=Navigation-DAmbDVe-.js.map
