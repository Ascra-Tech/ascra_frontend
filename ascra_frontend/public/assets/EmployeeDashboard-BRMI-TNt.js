var m=(le,z,f)=>new Promise((b,F)=>{var C=y=>{try{A(f.next(y))}catch(T){F(T)}},D=y=>{try{A(f.throw(y))}catch(T){F(T)}},A=y=>y.done?b(y.value):Promise.resolve(y.value).then(C,D);A((f=f.apply(le,z)).next())});import{_ as $e,H as n,K as Be,o as a,c as l,a as I,w as e,B as r,A as v,Q as h,D as p,G as g,O as M,P as j,F as ae,x as E,C as ge,y as X,z as Ie,J as x,r as ze}from"./frappe-ui-BZ2pqM42.js";import{_ as He}from"./Navigation-BZkqXjMP.js";import"./index-BMH3JwR7.js";const Ne={class:"min-h-screen bg-gray-50"},Oe={id:"employee-dashboard",class:"pt-20 pb-12"},Re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},We={class:"mb-8"},qe={key:0,class:"text-gray-600 mt-2"},Ke={key:0,class:"flex justify-center items-center py-12"},Ge={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8"},Ye={class:"flex items-center"},Je={class:"text-red-800"},Qe={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},Xe={class:"flex items-center space-x-4"},Ze={class:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold"},et={class:"text-xl font-bold text-gray-900"},tt={class:"text-gray-600"},st={class:"text-sm text-gray-500"},ot={key:0,class:"mt-2"},at={class:"flex justify-center mb-6"},lt={class:"flex space-x-4"},rt={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8"},nt={class:"border-b border-gray-200"},it={class:"flex space-x-8 px-6","aria-label":"Tabs"},dt={class:"p-6"},ut={key:0},ct={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},pt={class:"flex items-center space-x-4"},vt={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},gt={key:0,class:"text-center py-8 text-gray-500"},bt={key:1,class:"space-y-3"},yt={class:"font-medium text-gray-900"},xt={class:"text-sm text-gray-600"},ft={key:0,class:"text-xs text-gray-500"},_t={key:1,class:"text-xs text-gray-500"},wt={class:"text-xs text-gray-400"},kt={class:"flex flex-col items-end space-y-1"},ht={key:1},Ct={class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},St={class:"flex items-center space-x-4"},Dt={class:"flex items-center space-x-2"},At={class:"flex items-center space-x-2"},Tt={key:0,class:"text-center py-8 text-gray-500"},Ft={key:1,class:"space-y-3"},Lt={class:"font-medium text-gray-900"},Mt={class:"text-sm text-gray-600"},jt={class:"text-xs text-gray-500"},Et={key:2,class:"space-y-4"},Vt={class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},Ut={class:"flex items-center space-x-4 mb-3"},Pt={class:"flex items-center space-x-2"},$t={class:"flex items-center space-x-2"},Bt={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},It={class:"flex items-center space-x-4"},zt=["value"],Ht={key:1,class:"text-center py-12 bg-gray-50 rounded-lg"},Nt={key:2,class:"space-y-3"},Ot={class:"flex-1"},Rt={class:"font-medium text-gray-900"},Wt={class:"text-sm text-gray-600"},qt={class:"flex items-center space-x-4 mt-1"},Kt={class:"flex space-x-2"},Gt=["onClick"],Yt=["onClick"],Jt={key:3,class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},Qt={class:"p-6"},Xt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Zt={class:"font-medium text-gray-900"},es={class:"text-2xl font-bold text-blue-600"},ts={class:"text-sm text-gray-600"},ss={class:"text-xs text-gray-500"},os={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},as={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},ls={class:"flex justify-between items-center mb-4"},rs=["value"],ns={class:"grid grid-cols-2 gap-4"},is={class:"flex space-x-3"},ds={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},us={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},cs={class:"flex justify-between items-center mb-4"},ps={key:0,class:"grid grid-cols-2 gap-4"},vs={class:"flex space-x-3"},ms={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},gs={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden"},bs={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},ys={key:0,class:"flex justify-center items-center py-8"},xs=["innerHTML"],fs={key:2,class:"text-center py-8 text-gray-500"},_s={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ws={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},ks={class:"p-6"},hs={class:"flex items-center mb-4"},Cs={key:0,class:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3"},Ss={key:1,class:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"},Ds={key:2,class:"flex-shrink-0 w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-3"},As={class:"text-lg font-semibold text-gray-900"},Ts={class:"text-gray-600 mb-6"},Fs={class:"flex justify-end"},Ls={__name:"EmployeeDashboard",setup(le){const z=n(!0),f=n(""),b=n(null),F=n(null),C=n([]),D=n([]),A=n([]),y=n(!1),T=n(!1),V=n(!1),U=n(!1),_=n("attendance"),S=n([]),Z=n(!1),H=n(!1),P=n(""),N=n(""),ee=n([]),L=n("Salary Slip Standard"),O=n(""),R=n(""),W=n(""),q=n(""),K=n(""),G=n(""),$=n([]),te=n(!1),se=n(""),w=n("success"),c=n({leaveType:"",fromDate:"",toDate:"",description:""}),u=n({status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""}),be=o=>o.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),B=o=>o?new Date(o).toLocaleDateString():"N/A",re=o=>o?new Date(o).toLocaleTimeString():"N/A",ye=o=>({Present:"bg-green-100 text-green-800",Absent:"bg-red-100 text-red-800","On Leave":"bg-yellow-100 text-yellow-800","Half Day":"bg-blue-100 text-blue-800","Work From Home":"bg-purple-100 text-purple-800"})[o]||"bg-gray-100 text-gray-800",xe=o=>({Open:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",fe=()=>m(this,null,function*(){try{const o=yield x("ascra_frontend.api.get_employee_info");o.success&&(b.value=o.employee)}catch(o){console.error("Error loading employee info:",o),o.message&&o.message.includes("Employee record not found")?console.log("No employee record found for user, showing fallback data"):f.value=o.message||"Failed to load employee information"}}),_e=()=>m(this,null,function*(){try{const o=yield x("frappe.auth.get_logged_user");o&&(F.value={email:o,full_name:"Amit Kumar"})}catch(o){console.error("Error loading current user:",o)}}),Y=(o=null,t=null)=>m(this,null,function*(){try{const i={};o&&(i.from_date=o),t&&(i.to_date=t);const d=yield x("ascra_frontend.api.get_attendance_records",i);if(console.log("Attendance API response:",d),d.success===!1){console.error("API returned error:",d.message),C.value=[];return}console.log("Attendance records received:",d.attendance_records),console.log("Total attendance records:",d.attendance_records?d.attendance_records.length:0),C.value=d.attendance_records||[],console.log("Attendance records set in frontend:",C.value)}catch(i){console.error("Error loading attendance records:",i),C.value=[]}}),J=(o=null,t=null)=>m(this,null,function*(){try{const i={};o&&(i.from_date=o),t&&(i.to_date=t);const d=yield x("ascra_frontend.api.get_leave_applications",i);if(d.success===!1){console.error("API returned error:",d.message),D.value=[];return}d.success&&(D.value=d.leave_applications)}catch(i){console.error("Error loading leave applications:",i),D.value=[]}}),we=()=>m(this,null,function*(){try{const o=yield x("ascra_frontend.api.get_leave_balance");o.success&&(A.value=o.leave_balance)}catch(o){console.error("Error loading leave balance:",o)}}),ke=()=>m(this,null,function*(){try{const o=yield x("ascra_frontend.api.get_leave_types");if(o.success===!1){console.error("API returned error:",o.message),$.value=[];return}o.success&&($.value=o.leave_types,console.log("Leave types loaded:",$.value))}catch(o){console.error("Error loading leave types:",o),$.value=[]}}),oe=(o=null,t=null)=>m(this,null,function*(){try{const i={};o&&(i.from_date=o),t&&(i.to_date=t);const d=yield x("ascra_frontend.api.get_salary_slips",i);if(console.log("Salary slips API response:",d),d.success===!1){console.error("API returned error:",d.message),S.value=[];return}d.success?(S.value=d.salary_slips,console.log("Salary slips loaded:",S.value)):(console.log("API returned unsuccessful response:",d),S.value=[])}catch(i){console.error("Error loading salary slips:",i),S.value=[]}}),he=()=>m(this,null,function*(){y.value=!0;try{const o={status:u.value.status,attendance_date:u.value.attendanceDate};u.value.inTime&&(o.in_time=`${u.value.attendanceDate} ${u.value.inTime}:00`),u.value.outTime&&(o.out_time=`${u.value.attendanceDate} ${u.value.outTime}:00`);const t=yield x("ascra_frontend.api.mark_attendance",o);t.success?(k("Attendance marked successfully!","success"),U.value=!1,u.value={status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""},yield Y()):t.already_exists&&k(t.message||"Attendance already marked for this date","warning")}catch(o){console.error("Error marking attendance:",o),k(o.message||"Failed to mark attendance","error")}finally{y.value=!1}}),Ce=()=>m(this,null,function*(){T.value=!0;try{console.log("Submitting leave application with data:",{leave_type:c.value.leaveType,from_date:c.value.fromDate,to_date:c.value.toDate,description:c.value.description});const o=yield x("ascra_frontend.api.apply_leave",{leave_type:c.value.leaveType,from_date:c.value.fromDate,to_date:c.value.toDate,description:c.value.description});console.log("Leave application response:",o),o.success?(k("Leave application submitted successfully!","success"),V.value=!1,c.value={leaveType:"",fromDate:"",toDate:"",description:""},yield J()):(console.error("Leave application failed:",o.message),k(o.message||"Failed to submit leave application","error"))}catch(o){console.error("Error submitting leave application:",o),k(o.message||"Failed to submit leave application","error")}finally{T.value=!1}}),Se=()=>m(this,null,function*(){try{const o=yield x("ascra_frontend.api.get_salary_slip_print_formats");o.success&&(ee.value=o.print_formats)}catch(o){console.error("Error loading print formats:",o),ee.value=[{name:"Salary Slip Standard",label:"Standard Format"},{name:"Salary Slip with Year to Date",label:"With Year to Date"},{name:"Salary Slip based on Timesheet",label:"Based on Timesheet"}]}}),De=o=>m(this,null,function*(){try{Z.value=!0,H.value=!0,P.value="",N.value=o;const t=yield x("ascra_frontend.api.get_salary_slip_html",{salary_slip_name:o,print_format:L.value});t.success?P.value=t.html:(console.error("Failed to load salary slip preview:",t.message),k("Failed to load salary slip preview: "+t.message,"error"),Q())}catch(t){console.error("Error loading salary slip preview:",t),k("Error loading salary slip preview: "+t.message,"error"),Q()}finally{H.value=!1}}),ne=o=>m(this,null,function*(){try{const t=`/api/method/ascra_frontend.api.download_salary_slip_pdf?salary_slip_name=${encodeURIComponent(o)}&print_format=${encodeURIComponent(L.value)}`,i=document.createElement("a");i.href=t,i.download=`salary_slip_${o}_${L.value.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log("Salary slip download initiated for:",o,"with format:",L.value)}catch(t){console.error("Error downloading salary slip:",t),k("Error downloading salary slip: "+t.message,"error")}}),Ae=()=>{N.value&&ne(N.value)},Q=()=>{Z.value=!1,H.value=!1,P.value="",N.value=""},k=(o,t="success")=>{se.value=o,w.value=t,te.value=!0},Te=()=>{te.value=!1,se.value="",w.value="success"},ie=o=>{switch(o){case 0:return"bg-yellow-100 text-yellow-800";case 1:return"bg-green-100 text-green-800";case 2:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Fe=o=>{switch(o){case"Draft":return"bg-yellow-100 text-yellow-800";case"Submitted":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Withheld":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},Le=()=>{Y(O.value,R.value)},Me=()=>{O.value="",R.value="",Y()},je=()=>{oe(W.value,q.value)},Ee=()=>{W.value="",q.value="",oe()},Ve=()=>{J(K.value,G.value)},Ue=()=>{K.value="",G.value="",J()};return Be(()=>m(this,null,function*(){try{yield Promise.all([_e(),fe(),Y(),J(),we(),Se(),ke()])}catch(o){console.error("Error initializing employee dashboard:",o),f.value="Failed to load dashboard data"}finally{z.value=!1}})),(o,t)=>{var d,de,ue,ce,pe,ve,me;const i=ze("Button");return a(),l("div",Ne,[I(He),e("div",Oe,[e("div",Re,[e("div",We,[t[25]||(t[25]=e("h1",{class:"text-3xl font-bold text-gray-900"}," Employee Dashboard ",-1)),b.value?(a(),l("p",qe," Welcome, "+r(b.value.employee_name)+"! Manage your attendance, leaves, and view salary information. ",1)):v("",!0)]),z.value?(a(),l("div",Ke,[...t[26]||(t[26]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):f.value?(a(),l("div",Ge,[e("div",Ye,[t[27]||(t[27]=e("svg",{class:"w-6 h-6 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Je,r(f.value),1)])])):(a(),l("div",Qe,[e("div",Xe,[e("div",Ze,r(be(((d=b.value)==null?void 0:d.employee_name)||((de=F.value)==null?void 0:de.full_name)||"User")),1),e("div",null,[e("h2",et,r(((ue=b.value)==null?void 0:ue.employee_name)||((ce=F.value)==null?void 0:ce.full_name)||"Amit Kumar"),1),e("p",tt,r(((pe=b.value)==null?void 0:pe.designation)||"Employee")+r((ve=b.value)!=null&&ve.department?` - ${b.value.department}`:""),1),e("p",st,"Employee ID: "+r(((me=b.value)==null?void 0:me.employee_number)||"Not Available"),1),!b.value&&!f.value?(a(),l("div",ot,[...t[28]||(t[28]=[e("p",{class:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded"}," Employee record not linked. Contact administrator to link your user account with an Employee record. ",-1)])])):v("",!0)])])])),e("div",at,[e("div",lt,[e("button",{onClick:t[0]||(t[0]=s=>U.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg border border-blue-600 hover:bg-blue-700 hover:border-blue-700 transition-colors duration-200 shadow-sm"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",{class:"font-medium"},"Mark Attendance",-1)])]),e("button",{onClick:t[1]||(t[1]=s=>V.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-white text-green-600 rounded-lg border border-green-600 hover:bg-green-50 hover:border-green-700 hover:text-green-700 transition-colors duration-200 shadow-sm"},[...t[30]||(t[30]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"font-medium"},"Apply Leave",-1)])])])]),e("div",rt,[e("div",nt,[e("nav",it,[e("button",{onClick:t[2]||(t[2]=s=>_.value="attendance"),class:h(["py-4 px-1 border-b-2 font-medium text-sm",_.value==="attendance"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," View Attendance ",2),e("button",{onClick:t[3]||(t[3]=s=>_.value="leaves"),class:h(["py-4 px-1 border-b-2 font-medium text-sm",_.value==="leaves"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Leave Applications ",2),e("button",{onClick:t[4]||(t[4]=s=>{_.value="salary",oe()}),class:h(["py-4 px-1 border-b-2 font-medium text-sm",_.value==="salary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Salary Slips ",2)])]),e("div",dt,[_.value==="attendance"?(a(),l("div",ut,[e("div",ct,[e("div",pt,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-blue-900"},"Filter by Date:",-1)),e("div",vt,[t[31]||(t[31]=e("label",{class:"text-xs text-blue-700"},"From:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>O.value=s),class:"px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[g,O.value]])]),e("div",mt,[t[32]||(t[32]=e("label",{class:"text-xs text-blue-700"},"To:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>R.value=s),class:"px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[g,R.value]])]),e("button",{onClick:Le,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," Apply Filter "),e("button",{onClick:Me,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),C.value.length===0?(a(),l("div",gt," No attendance records found ")):(a(),l("div",bt,[(a(!0),l(M,null,j(C.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-4 bg-gray-50 rounded-lg"},[e("div",null,[e("p",yt,r(B(s.attendance_date)),1),e("p",xt,r(s.status),1),s.in_time?(a(),l("p",ft,"In: "+r(re(s.in_time)),1)):v("",!0),s.out_time?(a(),l("p",_t,"Out: "+r(re(s.out_time)),1)):v("",!0),e("p",wt,"Status: "+r(s.docstatus_label||"Unknown"),1)]),e("div",kt,[e("span",{class:h([ye(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3),e("span",{class:h([ie(s.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.docstatus_label),3)])]))),128))]))])):v("",!0),_.value==="leaves"?(a(),l("div",ht,[e("div",Ct,[e("div",St,[t[36]||(t[36]=e("label",{class:"text-sm font-medium text-green-900"},"Filter by Date:",-1)),e("div",Dt,[t[34]||(t[34]=e("label",{class:"text-xs text-green-700"},"From:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=s=>K.value=s),class:"px-2 py-1 text-sm border border-green-300 rounded focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[g,K.value]])]),e("div",At,[t[35]||(t[35]=e("label",{class:"text-xs text-green-700"},"To:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=s=>G.value=s),class:"px-2 py-1 text-sm border border-green-300 rounded focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[g,G.value]])]),e("button",{onClick:Ve,class:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," Apply Filter "),e("button",{onClick:Ue,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),D.value.length===0?(a(),l("div",Tt," No leave applications found ")):(a(),l("div",Ft,[(a(!0),l(M,null,j(D.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Lt,r(s.leave_type),1),e("p",Mt,r(B(s.from_date))+" - "+r(B(s.to_date)),1),e("p",jt,r(s.total_leave_days)+" days",1)]),e("span",{class:h([xe(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3)]))),128))]))])):v("",!0),_.value==="salary"?(a(),l("div",Et,[e("div",Vt,[e("div",Ut,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-purple-900"},"Filter by Date:",-1)),e("div",Pt,[t[37]||(t[37]=e("label",{class:"text-xs text-purple-700"},"From:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=s=>W.value=s),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"},null,512),[[g,W.value]])]),e("div",$t,[t[38]||(t[38]=e("label",{class:"text-xs text-purple-700"},"To:",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=s=>q.value=s),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"},null,512),[[g,q.value]])]),e("button",{onClick:je,class:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors"}," Apply Filter "),e("button",{onClick:Ee,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),S.value.length>0?(a(),l("div",Bt,[e("div",It,[t[40]||(t[40]=e("label",{for:"printFormat",class:"text-sm font-medium text-blue-900"}," Select Print Format: ",-1)),p(e("select",{id:"printFormat","onUpdate:modelValue":t[11]||(t[11]=s=>L.value=s),class:"block w-64 px-3 py-2 text-sm border border-blue-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(!0),l(M,null,j(ee.value,s=>(a(),l("option",{key:s.name,value:s.name},r(s.label),9,zt))),128))],512),[[ae,L.value]]),t[41]||(t[41]=e("span",{class:"text-xs text-blue-600"}," This format will be used for both preview and download ",-1))])])):v("",!0),S.value.length===0?(a(),l("div",Ht,[...t[42]||(t[42]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Salary Slips Found",-1),e("p",{class:"text-sm text-gray-500"},[E("Salary slips don't exist in the system yet."),e("br"),E("Contact HR or administrator for salary slip generation.")],-1)])])):(a(),l("div",Nt,[(a(!0),l(M,null,j(S.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-4 bg-gray-50 rounded-lg"},[e("div",Ot,[e("p",Rt,r(B(s.start_date))+" - "+r(B(s.end_date)),1),e("p",Wt,"Gross: ₹"+r(s.gross_pay)+" | Net: ₹"+r(s.net_pay),1),e("div",qt,[e("span",{class:h([Fe(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3),e("span",{class:h([ie(s.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.docstatus_label),3)])]),e("div",Kt,[e("button",{onClick:Pe=>De(s.name),class:"px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200"}," Preview ",8,Gt),e("button",{onClick:Pe=>ne(s.name),class:"px-3 py-1.5 text-sm font-medium text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 hover:border-green-300 transition-colors duration-200"}," Download ",8,Yt)])]))),128))]))])):v("",!0)])]),A.value.length>0?(a(),l("div",Jt,[t[43]||(t[43]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Leave Balance")],-1)),e("div",Qt,[e("div",Xt,[(a(!0),l(M,null,j(A.value,s=>(a(),l("div",{key:s.leave_type,class:"bg-blue-50 rounded-lg p-4"},[e("h4",Zt,r(s.leave_type),1),e("p",es,r(s.leaves_remaining||s.total_leaves_allocated-(s.leaves_taken||0)),1),e("p",ts,"Available out of "+r(s.total_leaves_allocated),1),e("p",ss,"Used: "+r(s.leaves_taken||0),1)]))),128))])])])):v("",!0)])]),V.value?(a(),l("div",os,[e("div",as,[e("div",ls,[t[45]||(t[45]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Apply for Leave",-1)),e("button",{onClick:t[12]||(t[12]=s=>V.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[44]||(t[44]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:ge(Ce,["prevent"]),class:"space-y-4"},[e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Leave Type",-1)),p(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>c.value.leaveType=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[46]||(t[46]=e("option",{value:""},"Select Leave Type",-1)),(a(!0),l(M,null,j($.value,s=>(a(),l("option",{key:s.name,value:s.name},r(s.leave_type_name),9,rs))),128))],512),[[ae,c.value.leaveType]])]),e("div",ns,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Date",-1)),p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>c.value.fromDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[g,c.value.fromDate]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"To Date",-1)),p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>c.value.toDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[g,c.value.toDate]])])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),p(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=s=>c.value.description=s),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Reason for leave..."},null,512),[[g,c.value.description]])]),e("div",is,[I(i,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:T.value},{default:X(()=>[...t[51]||(t[51]=[E(" Submit Application ",-1)])]),_:1},8,["loading"]),I(i,{type:"button",theme:"gray",variant:"outline",onClick:t[17]||(t[17]=s=>V.value=!1)},{default:X(()=>[...t[52]||(t[52]=[E(" Cancel ",-1)])]),_:1})])],32)])])):v("",!0),U.value?(a(),l("div",ds,[e("div",us,[e("div",cs,[t[54]||(t[54]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mark Attendance",-1)),e("button",{onClick:t[18]||(t[18]=s=>U.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[53]||(t[53]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:ge(he,["prevent"]),class:"space-y-4"},[e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attendance Date",-1)),p(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>u.value.attendanceDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[g,u.value.attendanceDate]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),p(e("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>u.value.status=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[56]||(t[56]=[Ie('<option value="Present" data-v-b280406b>Present</option><option value="Absent" data-v-b280406b>Absent</option><option value="Work From Home" data-v-b280406b>Work From Home</option><option value="Half Day" data-v-b280406b>Half Day</option><option value="On Leave" data-v-b280406b>On Leave</option>',5)])],512),[[ae,u.value.status]])]),u.value.status==="Present"||u.value.status==="Work From Home"?(a(),l("div",ps,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"In Time",-1)),p(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>u.value.inTime=s),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[g,u.value.inTime]])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Out Time",-1)),p(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>u.value.outTime=s),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[g,u.value.outTime]])])])):v("",!0),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Remarks (Optional)",-1)),p(e("textarea",{"onUpdate:modelValue":t[23]||(t[23]=s=>u.value.remarks=s),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional notes..."},null,512),[[g,u.value.remarks]])]),e("div",vs,[I(i,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:y.value},{default:X(()=>[...t[61]||(t[61]=[E(" Mark Attendance ",-1)])]),_:1},8,["loading"]),I(i,{type:"button",theme:"gray",variant:"outline",onClick:t[24]||(t[24]=s=>U.value=!1)},{default:X(()=>[...t[62]||(t[62]=[E(" Cancel ",-1)])]),_:1})])],32)])])):v("",!0),Z.value?(a(),l("div",ms,[e("div",gs,[e("div",{class:"flex justify-between items-center p-4 border-b border-gray-200"},[t[64]||(t[64]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Salary Slip Preview",-1)),e("button",{onClick:Q,class:"text-gray-400 hover:text-gray-600"},[...t[63]||(t[63]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",bs,[H.value?(a(),l("div",ys,[...t[65]||(t[65]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):P.value?(a(),l("div",{key:1,innerHTML:P.value,class:"salary-slip-preview"},null,8,xs)):(a(),l("div",fs," Failed to load salary slip preview "))]),e("div",{class:"flex justify-end space-x-2 p-4 border-t border-gray-200"},[e("button",{onClick:Ae,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200"}," Download PDF "),e("button",{onClick:Q,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors duration-200"}," Close ")])])])):v("",!0),te.value?(a(),l("div",_s,[e("div",ws,[e("div",ks,[e("div",hs,[w.value==="success"?(a(),l("div",Cs,[...t[66]||(t[66]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):w.value==="error"?(a(),l("div",Ss,[...t[67]||(t[67]=[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):w.value==="warning"?(a(),l("div",Ds,[...t[68]||(t[68]=[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)])])):v("",!0),e("div",null,[e("h3",As,r(w.value==="success"?"Success":w.value==="error"?"Error":"Warning"),1)])]),e("p",Ts,r(se.value),1),e("div",Fs,[e("button",{onClick:Te,class:h(["px-4 py-2 rounded-md font-medium transition-colors duration-200",w.value==="success"?"bg-green-600 hover:bg-green-700 text-white":w.value==="error"?"bg-red-600 hover:bg-red-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white"])}," OK ",2)])])])])):v("",!0)])}}},Us=$e(Ls,[["__scopeId","data-v-b280406b"]]);export{Us as default};
//# sourceMappingURL=EmployeeDashboard-BRMI-TNt.js.map
