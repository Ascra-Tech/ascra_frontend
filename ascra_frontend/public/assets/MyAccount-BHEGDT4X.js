var E=Object.defineProperty;var A=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var j=(m,n,l)=>n in m?E(m,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[n]=l,P=(m,n)=>{for(var l in n||(n={}))T.call(n,l)&&j(m,l,n[l]);if(A)for(var l of A(n))$.call(n,l)&&j(m,l,n[l]);return m};var C=(m,n,l)=>new Promise((a,p)=>{var V=r=>{try{_(l.next(r))}catch(i){p(i)}},k=r=>{try{_(l.throw(r))}catch(i){p(i)}},_=r=>r.done?a(r.value):Promise.resolve(r.value).then(V,k);_((l=l.apply(m,n)).next())});import{A as q,o as v,c,a as d,w as s,C as f,x,B as y,N as L,y as g,F as u,u as h,D as N,q as w,H as J,J as U,K as b,e as H}from"./frappe-ui-U0jLBpY2.js";import"./index-DvvvyKYK.js";import{_ as K}from"./Navigation-CgdRJdf1.js";const O={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50"},R={class:"pt-20 pb-12"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Q={class:"lg:col-span-1"},W={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},X={class:"text-center mb-6"},Z={key:0,class:"w-32 h-32 mx-auto rounded-full overflow-hidden border-4 border-blue-100"},ee=["src","alt"],se={key:1,class:"w-32 h-32 mx-auto rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-4xl font-bold"},le={class:"mt-4 text-xl font-bold text-gray-900"},te={class:"text-gray-600 text-sm"},oe={key:2,class:"text-gray-500 text-sm mt-2"},ae={class:"border-t border-gray-200 pt-6"},re={class:"space-y-4"},ne={class:"flex items-center justify-between"},ie={class:"text-sm font-medium text-gray-900"},de={key:0,class:"flex items-center justify-between"},ue={class:"text-sm font-medium text-gray-900"},pe={class:"flex items-center justify-between"},me={class:"border-t border-gray-200 pt-6 mt-6 space-y-3"},ve={class:"lg:col-span-2"},ce={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},fe={class:"flex items-center"},we={class:"text-green-800"},be={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},ge={class:"flex items-center"},_e={class:"text-red-800"},xe={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"flex justify-end space-x-4"},ke={key:3,class:"bg-white rounded-xl shadow-sm border border-gray-200"},Ve={class:"flex justify-end space-x-4"},Ae={__name:"MyAccount",setup(m){const n=b("profile"),l=b({name:"",email:"",first_name:"",last_name:"",full_name:"",user_image:"",bio:"",location:"",interest:"",phone:"",mobile_no:"",birth_date:"",gender:"",enabled:!0,creation:""}),a=b({first_name:"",last_name:"",location:"",interest:"",phone:"",mobile_no:"",bio:""}),p=b({old_password:"",new_password:"",confirm_password:""}),V=b(!1),k=b(!1),_=b(!1),r=b(""),i=b(""),z=H(()=>{if(l.value.first_name&&l.value.last_name)return l.value.first_name.charAt(0)+l.value.last_name.charAt(0);if(l.value.full_name){const t=l.value.full_name.split(" ");return t.length>1?t[0].charAt(0)+t[1].charAt(0):t[0].charAt(0)}return l.value.email.charAt(0).toUpperCase()}),B=()=>C(this,null,function*(){V.value=!0;try{const t=yield U("ascra_frontend.api.get_user_profile");t&&t.success&&(l.value=t.user,a.value={first_name:t.user.first_name||"",last_name:t.user.last_name||"",location:t.user.location||"",interest:t.user.interest||"",phone:t.user.phone||"",mobile_no:t.user.mobile_no||"",bio:t.user.bio||""})}catch(t){console.error("Error loading user profile:",t),i.value="Failed to load user profile"}finally{V.value=!1}}),F=()=>C(this,null,function*(){k.value=!0,r.value="",i.value="";try{const t=yield U("ascra_frontend.api.update_user_profile",{profile_data:JSON.stringify(a.value)});t&&t.success?(r.value="Profile updated successfully!",l.value=P(P({},l.value),t.user),setTimeout(()=>{r.value=""},5e3)):i.value=(t==null?void 0:t.message)||"Failed to update profile"}catch(t){console.error("Error updating profile:",t),i.value="An error occurred while updating your profile"}finally{k.value=!1}}),I=()=>C(this,null,function*(){if(r.value="",i.value="",p.value.new_password!==p.value.confirm_password){i.value="New passwords do not match";return}if(p.value.new_password.length<8){i.value="Password must be at least 8 characters long";return}_.value=!0;try{const t=yield U("ascra_frontend.api.update_password",{old_password:p.value.old_password,new_password:p.value.new_password});t&&t.success?(r.value="Password updated successfully!",M(),setTimeout(()=>{r.value=""},5e3)):i.value=(t==null?void 0:t.message)||"Failed to update password"}catch(t){console.error("Error updating password:",t),i.value="An error occurred while updating your password"}finally{_.value=!1}}),S=()=>{a.value={first_name:l.value.first_name||"",last_name:l.value.last_name||"",location:l.value.location||"",interest:l.value.interest||"",phone:l.value.phone||"",mobile_no:l.value.mobile_no||"",bio:l.value.bio||""},r.value="",i.value=""},M=()=>{p.value={old_password:"",new_password:"",confirm_password:""},r.value="",i.value=""},D=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return q(()=>{B()}),(t,e)=>(v(),c("div",O,[d(K),s("div",R,[s("div",Y,[e[29]||(e[29]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900"},"My Account"),s("p",{class:"text-gray-600 mt-2"},"Manage your profile and account settings")],-1)),s("div",G,[s("div",Q,[s("div",W,[s("div",X,[l.value.user_image?(v(),c("div",Z,[s("img",{src:l.value.user_image,alt:l.value.full_name,class:"w-full h-full object-cover"},null,8,ee)])):(v(),c("div",se,f(z.value),1)),s("h2",le,f(l.value.full_name||l.value.email),1),s("p",te,f(l.value.email),1),l.value.location?(v(),c("p",oe,[e[12]||(e[12]=s("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),x(" "+f(l.value.location),1)])):y("",!0)]),s("div",ae,[s("div",re,[s("div",ne,[e[13]||(e[13]=s("span",{class:"text-sm text-gray-600"},"Member Since",-1)),s("span",ie,f(D(l.value.creation)),1)]),l.value.interest?(v(),c("div",de,[e[14]||(e[14]=s("span",{class:"text-sm text-gray-600"},"Interests",-1)),s("span",ue,f(l.value.interest),1)])):y("",!0),s("div",pe,[e[15]||(e[15]=s("span",{class:"text-sm text-gray-600"},"Account Status",-1)),s("span",{class:L([l.value.enabled?"text-green-600":"text-red-600","text-sm font-medium"])},f(l.value.enabled?"Active":"Inactive"),3)])])]),s("div",me,[d(u(h),{variant:"solid",class:"w-full",onClick:e[0]||(e[0]=o=>n.value="profile")},{prefix:g(()=>[...e[16]||(e[16]=[s("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])]),default:g(()=>[e[17]||(e[17]=x(" Edit Profile ",-1))]),_:1}),d(u(h),{variant:"outline",class:"w-full",onClick:e[1]||(e[1]=o=>n.value="security")},{prefix:g(()=>[...e[18]||(e[18]=[s("svg",{class:"size-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)])]),default:g(()=>[e[19]||(e[19]=x(" Change Password ",-1))]),_:1})])])]),s("div",ve,[r.value?(v(),c("div",ce,[s("div",fe,[e[20]||(e[20]=s("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("p",we,f(r.value),1)])])):y("",!0),i.value?(v(),c("div",be,[s("div",ge,[e[21]||(e[21]=s("svg",{class:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("p",_e,f(i.value),1)])])):y("",!0),n.value==="profile"?(v(),c("div",xe,[e[24]||(e[24]=s("div",{class:"p-6 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Profile Information"),s("p",{class:"text-sm text-gray-600 mt-1"},"Update your personal information and profile details")],-1)),s("form",{onSubmit:N(F,["prevent"]),class:"p-6 space-y-6"},[s("div",ye,[d(u(w),{type:"text",modelValue:a.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.first_name=o),label:"First Name",placeholder:"John"},null,8,["modelValue"]),d(u(w),{type:"text",modelValue:a.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.last_name=o),label:"Last Name",placeholder:"Doe"},null,8,["modelValue"])]),d(u(w),{type:"text",modelValue:a.value.location,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.location=o),label:"Location",placeholder:"New York, USA"},null,8,["modelValue"]),d(u(w),{type:"text",modelValue:a.value.interest,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.interest=o),label:"Interests",placeholder:"Technology, Design, Innovation"},null,8,["modelValue"]),d(u(w),{type:"text",modelValue:a.value.phone,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.phone=o),label:"Phone",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),d(u(w),{type:"text",modelValue:a.value.mobile_no,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.mobile_no=o),label:"Mobile",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),d(u(J),{modelValue:a.value.bio,"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.bio=o),label:"Bio",placeholder:"Tell us about yourself...",rows:"4"},null,8,["modelValue"]),s("div",he,[d(u(h),{type:"button",variant:"outline",onClick:S},{default:g(()=>[...e[22]||(e[22]=[x(" Cancel ",-1)])]),_:1}),d(u(h),{type:"submit",variant:"solid",loading:k.value},{default:g(()=>[...e[23]||(e[23]=[x(" Save Changes ",-1)])]),_:1},8,["loading"])])],32)])):y("",!0),n.value==="security"?(v(),c("div",ke,[e[28]||(e[28]=s("div",{class:"p-6 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Change Password"),s("p",{class:"text-sm text-gray-600 mt-1"},"Update your password to keep your account secure")],-1)),s("form",{onSubmit:N(I,["prevent"]),class:"p-6 space-y-6"},[d(u(w),{type:"password",modelValue:p.value.old_password,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value.old_password=o),label:"Current Password",placeholder:"Enter your current password",required:""},null,8,["modelValue"]),d(u(w),{type:"password",modelValue:p.value.new_password,"onUpdate:modelValue":e[10]||(e[10]=o=>p.value.new_password=o),label:"New Password",placeholder:"Enter new password",required:""},null,8,["modelValue"]),d(u(w),{type:"password",modelValue:p.value.confirm_password,"onUpdate:modelValue":e[11]||(e[11]=o=>p.value.confirm_password=o),label:"Confirm New Password",placeholder:"Confirm new password",required:""},null,8,["modelValue"]),e[27]||(e[27]=s("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[s("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Password Requirements:"),s("ul",{class:"text-sm text-blue-800 space-y-1"},[s("li",null,"• At least 8 characters long"),s("li",null,"• Include uppercase and lowercase letters"),s("li",null,"• Include at least one number"),s("li",null,"• Include at least one special character")])],-1)),s("div",Ve,[d(u(h),{type:"button",variant:"outline",onClick:M},{default:g(()=>[...e[25]||(e[25]=[x(" Cancel ",-1)])]),_:1}),d(u(h),{type:"submit",variant:"solid",loading:_.value},{default:g(()=>[...e[26]||(e[26]=[x(" Update Password ",-1)])]),_:1},8,["loading"])])],32)])):y("",!0)])])])])]))}};export{Ae as default};
//# sourceMappingURL=MyAccount-BHEGDT4X.js.map
