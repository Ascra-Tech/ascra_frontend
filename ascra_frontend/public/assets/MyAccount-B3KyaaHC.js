var E=Object.defineProperty;var A=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var j=(p,n,t)=>n in p?E(p,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[n]=t,P=(p,n)=>{for(var t in n||(n={}))T.call(n,t)&&j(p,t,n[t]);if(A)for(var t of A(n))$.call(n,t)&&j(p,t,n[t]);return p};var C=(p,n,t)=>new Promise((o,m)=>{var V=r=>{try{g(t.next(r))}catch(d){m(d)}},k=r=>{try{g(t.throw(r))}catch(d){m(d)}},g=r=>r.done?o(r.value):Promise.resolve(r.value).then(V,k);g((t=t.apply(p,n)).next())});import{A as q,o as c,c as v,a as i,w as s,C as f,x as _,B as y,N as L,y as x,F as u,u as h,D as N,q as w,H as J,J as U,K as b,e as H}from"./frappe-ui-U0jLBpY2.js";import"./index-Dd2bkXCJ.js";import{_ as K}from"./Navigation-CnSPRkYF.js";const O={class:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50"},R={class:"pt-20 pb-12"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Q={class:"lg:col-span-1"},W={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},X={class:"text-center mb-6"},Z={key:0,class:"w-32 h-32 mx-auto rounded-full overflow-hidden border-4 border-blue-100"},ee=["src","alt"],se={key:1,class:"w-32 h-32 mx-auto rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center text-white text-4xl font-bold"},te={class:"mt-4 text-xl font-bold text-gray-900"},le={class:"text-gray-600 text-sm"},ae={key:2,class:"text-gray-500 text-sm mt-2"},oe={class:"border-t border-gray-200 pt-6"},re={class:"space-y-4"},ne={class:"flex items-center justify-between"},de={class:"text-sm font-medium text-gray-900"},ie={key:0,class:"flex items-center justify-between"},ue={class:"text-sm font-medium text-gray-900"},me={class:"flex items-center justify-between"},pe={class:"border-t border-gray-200 pt-6 mt-6 space-y-2"},ce={class:"lg:col-span-2"},ve={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},fe={class:"flex items-center"},we={class:"text-green-800"},be={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},ge={class:"flex items-center"},_e={class:"text-red-800"},ye={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={class:"flex justify-end space-x-4"},ke={key:3,class:"bg-white rounded-xl shadow-sm border border-gray-200"},Ve={class:"flex justify-end space-x-4"},Ae={__name:"MyAccount",setup(p){const n=b("profile"),t=b({name:"",email:"",first_name:"",last_name:"",full_name:"",user_image:"",bio:"",location:"",interest:"",phone:"",mobile_no:"",birth_date:"",gender:"",enabled:!0,creation:""}),o=b({first_name:"",last_name:"",location:"",interest:"",phone:"",mobile_no:"",bio:""}),m=b({old_password:"",new_password:"",confirm_password:""}),V=b(!1),k=b(!1),g=b(!1),r=b(""),d=b(""),B=H(()=>{if(t.value.first_name&&t.value.last_name)return t.value.first_name.charAt(0)+t.value.last_name.charAt(0);if(t.value.full_name){const l=t.value.full_name.split(" ");return l.length>1?l[0].charAt(0)+l[1].charAt(0):l[0].charAt(0)}return t.value.email.charAt(0).toUpperCase()}),z=()=>C(this,null,function*(){V.value=!0;try{const l=yield U("ascra_frontend.api.get_user_profile");l&&l.success&&(t.value=l.user,o.value={first_name:l.user.first_name||"",last_name:l.user.last_name||"",location:l.user.location||"",interest:l.user.interest||"",phone:l.user.phone||"",mobile_no:l.user.mobile_no||"",bio:l.user.bio||""})}catch(l){console.error("Error loading user profile:",l),d.value="Failed to load user profile"}finally{V.value=!1}}),F=()=>C(this,null,function*(){k.value=!0,r.value="",d.value="";try{const l=yield U("ascra_frontend.api.update_user_profile",{profile_data:JSON.stringify(o.value)});l&&l.success?(r.value="Profile updated successfully!",t.value=P(P({},t.value),l.user),setTimeout(()=>{r.value=""},5e3)):d.value=(l==null?void 0:l.message)||"Failed to update profile"}catch(l){console.error("Error updating profile:",l),d.value="An error occurred while updating your profile"}finally{k.value=!1}}),I=()=>C(this,null,function*(){if(r.value="",d.value="",m.value.new_password!==m.value.confirm_password){d.value="New passwords do not match";return}if(m.value.new_password.length<8){d.value="Password must be at least 8 characters long";return}g.value=!0;try{const l=yield U("ascra_frontend.api.update_password",{old_password:m.value.old_password,new_password:m.value.new_password});l&&l.success?(r.value="Password updated successfully!",M(),setTimeout(()=>{r.value=""},5e3)):d.value=(l==null?void 0:l.message)||"Failed to update password"}catch(l){console.error("Error updating password:",l),d.value="An error occurred while updating your password"}finally{g.value=!1}}),S=()=>{o.value={first_name:t.value.first_name||"",last_name:t.value.last_name||"",location:t.value.location||"",interest:t.value.interest||"",phone:t.value.phone||"",mobile_no:t.value.mobile_no||"",bio:t.value.bio||""},r.value="",d.value=""},M=()=>{m.value={old_password:"",new_password:"",confirm_password:""},r.value="",d.value=""},D=l=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return q(()=>{z()}),(l,e)=>(c(),v("div",O,[i(K),s("div",R,[s("div",Y,[e[27]||(e[27]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-bold text-gray-900"},"My Account"),s("p",{class:"text-gray-600 mt-2"},"Manage your profile and account settings")],-1)),s("div",G,[s("div",Q,[s("div",W,[s("div",X,[t.value.user_image?(c(),v("div",Z,[s("img",{src:t.value.user_image,alt:t.value.full_name,class:"w-full h-full object-cover"},null,8,ee)])):(c(),v("div",se,f(B.value),1)),s("h2",te,f(t.value.full_name||t.value.email),1),s("p",le,f(t.value.email),1),t.value.location?(c(),v("p",ae,[e[12]||(e[12]=s("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),_(" "+f(t.value.location),1)])):y("",!0)]),s("div",oe,[s("div",re,[s("div",ne,[e[13]||(e[13]=s("span",{class:"text-sm text-gray-600"},"Member Since",-1)),s("span",de,f(D(t.value.creation)),1)]),t.value.interest?(c(),v("div",ie,[e[14]||(e[14]=s("span",{class:"text-sm text-gray-600"},"Interests",-1)),s("span",ue,f(t.value.interest),1)])):y("",!0),s("div",me,[e[15]||(e[15]=s("span",{class:"text-sm text-gray-600"},"Account Status",-1)),s("span",{class:L([t.value.enabled?"text-green-600":"text-red-600","text-sm font-medium"])},f(t.value.enabled?"Active":"Inactive"),3)])])]),s("div",pe,[i(u(h),{theme:"blue",variant:"solid",class:"w-full justify-start",onClick:e[0]||(e[0]=a=>n.value="profile")},{default:x(()=>[...e[16]||(e[16]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),_(" Edit Profile ",-1)])]),_:1}),i(u(h),{theme:"purple",variant:"outline",class:"w-full justify-start",onClick:e[1]||(e[1]=a=>n.value="security")},{default:x(()=>[...e[17]||(e[17]=[s("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),_(" Change Password ",-1)])]),_:1})])])]),s("div",ce,[r.value?(c(),v("div",ve,[s("div",fe,[e[18]||(e[18]=s("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("p",we,f(r.value),1)])])):y("",!0),d.value?(c(),v("div",be,[s("div",ge,[e[19]||(e[19]=s("svg",{class:"w-5 h-5 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s("p",_e,f(d.value),1)])])):y("",!0),n.value==="profile"?(c(),v("div",ye,[e[22]||(e[22]=s("div",{class:"p-6 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Profile Information"),s("p",{class:"text-sm text-gray-600 mt-1"},"Update your personal information and profile details")],-1)),s("form",{onSubmit:N(F,["prevent"]),class:"p-6 space-y-6"},[s("div",xe,[i(u(w),{type:"text",modelValue:o.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.first_name=a),label:"First Name",placeholder:"John"},null,8,["modelValue"]),i(u(w),{type:"text",modelValue:o.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.last_name=a),label:"Last Name",placeholder:"Doe"},null,8,["modelValue"])]),i(u(w),{type:"text",modelValue:o.value.location,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.location=a),label:"Location",placeholder:"New York, USA"},null,8,["modelValue"]),i(u(w),{type:"text",modelValue:o.value.interest,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.interest=a),label:"Interests",placeholder:"Technology, Design, Innovation"},null,8,["modelValue"]),i(u(w),{type:"text",modelValue:o.value.phone,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.phone=a),label:"Phone",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),i(u(w),{type:"text",modelValue:o.value.mobile_no,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.mobile_no=a),label:"Mobile",placeholder:"+1 234 567 8900"},null,8,["modelValue"]),i(u(J),{modelValue:o.value.bio,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.bio=a),label:"Bio",placeholder:"Tell us about yourself...",rows:"4"},null,8,["modelValue"]),s("div",he,[i(u(h),{type:"button",theme:"gray",variant:"outline",onClick:S},{default:x(()=>[...e[20]||(e[20]=[_(" Cancel ",-1)])]),_:1}),i(u(h),{type:"submit",theme:"blue",variant:"solid",loading:k.value},{default:x(()=>[...e[21]||(e[21]=[_(" Save Changes ",-1)])]),_:1},8,["loading"])])],32)])):y("",!0),n.value==="security"?(c(),v("div",ke,[e[26]||(e[26]=s("div",{class:"p-6 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Change Password"),s("p",{class:"text-sm text-gray-600 mt-1"},"Update your password to keep your account secure")],-1)),s("form",{onSubmit:N(I,["prevent"]),class:"p-6 space-y-6"},[i(u(w),{type:"password",modelValue:m.value.old_password,"onUpdate:modelValue":e[9]||(e[9]=a=>m.value.old_password=a),label:"Current Password",placeholder:"Enter your current password",required:""},null,8,["modelValue"]),i(u(w),{type:"password",modelValue:m.value.new_password,"onUpdate:modelValue":e[10]||(e[10]=a=>m.value.new_password=a),label:"New Password",placeholder:"Enter new password",required:""},null,8,["modelValue"]),i(u(w),{type:"password",modelValue:m.value.confirm_password,"onUpdate:modelValue":e[11]||(e[11]=a=>m.value.confirm_password=a),label:"Confirm New Password",placeholder:"Confirm new password",required:""},null,8,["modelValue"]),e[25]||(e[25]=s("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[s("h4",{class:"text-sm font-medium text-blue-900 mb-2"},"Password Requirements:"),s("ul",{class:"text-sm text-blue-800 space-y-1"},[s("li",null,"• At least 8 characters long"),s("li",null,"• Include uppercase and lowercase letters"),s("li",null,"• Include at least one number"),s("li",null,"• Include at least one special character")])],-1)),s("div",Ve,[i(u(h),{type:"button",theme:"gray",variant:"outline",onClick:M},{default:x(()=>[...e[23]||(e[23]=[_(" Cancel ",-1)])]),_:1}),i(u(h),{type:"submit",theme:"purple",variant:"solid",loading:g.value},{default:x(()=>[...e[24]||(e[24]=[_(" Update Password ",-1)])]),_:1},8,["loading"])])],32)])):y("",!0)])])])])]))}};export{Ae as default};
//# sourceMappingURL=MyAccount-B3KyaaHC.js.map
