var Bt=Object.defineProperty,zt=Object.defineProperties;var Nt=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var Ht=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable;var mt=(U,F,h)=>F in U?Bt(U,F,{enumerable:!0,configurable:!0,writable:!0,value:h}):U[F]=h,Q=(U,F)=>{for(var h in F||(F={}))Ht.call(F,h)&&mt(U,h,F[h]);if(ct)for(var h of ct(F))Ot.call(F,h)&&mt(U,h,F[h]);return U},X=(U,F)=>zt(U,Nt(F));var A=(U,F,h)=>new Promise((v,S)=>{var d=T=>{try{c(h.next(T))}catch(M){S(M)}},y=T=>{try{c(h.throw(T))}catch(M){S(M)}},c=T=>T.done?v(T.value):Promise.resolve(T.value).then(d,y);c((h=h.apply(U,F)).next())});import{j as _,i as se,o,c as n,y as e,F as Z,P as C,Q as H,R as I,S as P,D as l,T as j,C as f,z as W,K as E,e as J,N as V,U as vt,B as G,a as te,V as gt,W as Gt,_ as Wt,H as ee,A as ye,r as Yt}from"./frappe-ui-BZ2Hvwvi.js";import{_ as Kt}from"./Navigation-BXoot8LA.js";import"./index-CgJEa-zF.js";const Qt={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Jt={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Xt={class:"flex justify-between items-center mb-6"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},es=["value"],ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ss=["value"],os=["value"],ns={key:0,class:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},ls={key:1,class:"space-y-4"},as={class:"flex justify-between items-start mb-4"},rs={class:"font-medium text-gray-900"},is=["onClick"],ds={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},us=["onUpdate:modelValue"],ps=["onUpdate:modelValue"],cs=["onUpdate:modelValue"],ms={class:"relative"},vs=["onChange"],gs={key:0,class:"mt-2"},ys=["href"],xs={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},bs={class:"flex justify-between items-center"},fs={class:"text-2xl font-bold text-blue-600"},_s={class:"flex space-x-4 pt-4 border-t border-gray-200"},Cs=["disabled"],ws={key:0,class:"flex items-center justify-center"},ks={key:1},hs={__name:"ExpenseClaimForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_([]),d=_([]),y=_([]),c=_({expense_type:"",posting_date:new Date().toISOString().split("T")[0],expense_approver:"",company:"",remarks:"",expenses:[]}),T=J(()=>c.value.expenses.reduce((a,g)=>a+(g.amount||0),0)),M=()=>{c.value.expenses.push({expense_date:new Date().toISOString().split("T")[0],amount:0,description:"",receipt_url:""})},D=a=>{c.value.expenses.splice(a,1)},u=(a,g)=>A(this,null,function*(){const k=a.target.files[0];if(k)try{const w=new FormData;w.append("file",k),w.append("doctype","Expense Claim"),w.append("is_private","1");const b=yield E("/api/method/upload_file",w);b.message==="OK"&&b.file_url&&(c.value.expenses[g].receipt_url=b.file_url)}catch(w){console.error("Error uploading file:",w)}}),i=()=>A(this,null,function*(){try{const a=yield E("frappe.client.get_list",{doctype:"Expense Claim Type",fields:["name","expense_type_name"],filters:{disabled:0}});S.value=a}catch(a){console.error("Error loading expense types:",a)}}),s=()=>A(this,null,function*(){try{const a=yield E("frappe.client.get_list",{doctype:"Employee",fields:["name","employee_name"],filters:{status:"Active"}});d.value=a}catch(a){console.error("Error loading approvers:",a)}}),r=()=>A(this,null,function*(){try{const a=yield E("frappe.client.get_list",{doctype:"Company",fields:["name","company_name"]});y.value=a}catch(a){console.error("Error loading companies:",a)}}),p=()=>A(this,null,function*(){v.value=!0;try{const a=yield E("frappe.client.insert",{doc:Q({doctype:"Expense Claim"},c.value)});a.name&&(h("success",`Expense Claim ${a.name} submitted successfully!`),h("close"))}catch(a){console.error("Error submitting expense claim:",a)}finally{v.value=!1}});return se(()=>A(this,null,function*(){yield Promise.all([i(),s(),r()])})),(a,g)=>(o(),n("div",Qt,[e("div",Jt,[e("div",Xt,[g[8]||(g[8]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Submit Expense Claim",-1)),e("button",{onClick:g[0]||(g[0]=k=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...g[7]||(g[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(p,["prevent"]),class:"space-y-6"},[e("div",Zt,[e("div",null,[g[10]||(g[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expense Type *",-1)),C(e("select",{"onUpdate:modelValue":g[1]||(g[1]=k=>c.value.expense_type=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[g[9]||(g[9]=e("option",{value:""},"Select Expense Type",-1)),(o(!0),n(I,null,P(S.value,k=>(o(),n("option",{key:k.name,value:k.name},l(k.expense_type_name),9,es))),128))],512),[[H,c.value.expense_type]])]),e("div",null,[g[11]||(g[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Posting Date *",-1)),C(e("input",{"onUpdate:modelValue":g[2]||(g[2]=k=>c.value.posting_date=k),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.posting_date]])])]),e("div",ts,[e("div",null,[g[13]||(g[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expense Approver *",-1)),C(e("select",{"onUpdate:modelValue":g[3]||(g[3]=k=>c.value.expense_approver=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[g[12]||(g[12]=e("option",{value:""},"Select Approver",-1)),(o(!0),n(I,null,P(d.value,k=>(o(),n("option",{key:k.name,value:k.name},l(k.employee_name),9,ss))),128))],512),[[H,c.value.expense_approver]])]),e("div",null,[g[15]||(g[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Company *",-1)),C(e("select",{"onUpdate:modelValue":g[4]||(g[4]=k=>c.value.company=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[g[14]||(g[14]=e("option",{value:""},"Select Company",-1)),(o(!0),n(I,null,P(y.value,k=>(o(),n("option",{key:k.name,value:k.name},l(k.company_name),9,os))),128))],512),[[H,c.value.company]])])]),e("div",null,[g[16]||(g[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Remarks",-1)),C(e("textarea",{"onUpdate:modelValue":g[5]||(g[5]=k=>c.value.remarks=k),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Additional remarks about this expense claim..."},null,512),[[j,c.value.remarks]])]),e("div",null,[e("div",{class:"flex justify-between items-center mb-4"},[g[17]||(g[17]=e("h4",{class:"text-lg font-medium text-gray-900"},"Expense Items",-1)),e("button",{type:"button",onClick:M,class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"}," + Add Item ")]),c.value.expenses.length===0?(o(),n("div",ns,[...g[18]||(g[18]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"text-gray-500"},"No expense items added",-1),e("p",{class:"text-sm text-gray-400 mt-1"},'Click "Add Item" to add your first expense',-1)])])):(o(),n("div",ls,[(o(!0),n(I,null,P(c.value.expenses,(k,w)=>(o(),n("div",{key:w,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",as,[e("h5",rs,"Item "+l(w+1),1),e("button",{type:"button",onClick:b=>D(w),class:"text-red-500 hover:text-red-700"},[...g[19]||(g[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,is)]),e("div",ds,[e("div",null,[g[20]||(g[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expense Date *",-1)),C(e("input",{"onUpdate:modelValue":b=>k.expense_date=b,type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,8,us),[[j,k.expense_date]])]),e("div",null,[g[21]||(g[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount *",-1)),C(e("input",{"onUpdate:modelValue":b=>k.amount=b,type:"number",step:"0.01",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0.00"},null,8,ps),[[j,k.amount,void 0,{number:!0}]])]),e("div",null,[g[22]||(g[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),C(e("input",{"onUpdate:modelValue":b=>k.description=b,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Expense description"},null,8,cs),[[j,k.description]])]),e("div",null,[g[23]||(g[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Receipt",-1)),e("div",ms,[e("input",{type:"file",onChange:b=>u(b,w),accept:"image/*,.pdf",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm file:mr-4 file:py-1 file:px-2 file:rounded file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,40,vs),k.receipt_url?(o(),n("div",gs,[e("a",{href:k.receipt_url,target:"_blank",class:"text-xs text-blue-600 hover:text-blue-800 underline"},"View Receipt",8,ys)])):f("",!0)])])])]))),128))]))]),T.value>0?(o(),n("div",xs,[e("div",bs,[g[24]||(g[24]=e("span",{class:"text-lg font-medium text-blue-900"},"Total Claim Amount:",-1)),e("span",fs,"₹"+l(T.value.toFixed(2)),1)])])):f("",!0),e("div",_s,[e("button",{type:"submit",disabled:v.value||c.value.expenses.length===0,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",ws,[...g[25]||(g[25]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",ks,"Submit Expense Claim"))],8,Cs),e("button",{type:"button",onClick:g[6]||(g[6]=k=>a.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},$s={class:"space-y-4"},Ss={class:"flex flex-col items-center"},Ds={class:"text-xs text-gray-500"},js=["accept","multiple"],As={key:0,class:"space-y-2"},Ts={class:"flex items-center space-x-3 flex-1 min-w-0"},Ms={class:"flex-shrink-0"},Es={key:0,class:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center"},Fs={key:1,class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},Vs={key:2,class:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center"},Us={class:"flex-1 min-w-0"},qs={class:"text-sm font-medium text-gray-900 truncate"},Is={class:"text-xs text-gray-500"},Ps={class:"flex items-center space-x-2"},Ls={key:0,class:"text-xs text-green-600 font-medium"},Rs={key:1,class:"text-xs text-blue-600 font-medium"},Bs={key:2,class:"text-xs text-red-600 font-medium"},zs=["onClick","disabled"],Ns={key:1,class:"w-full bg-gray-200 rounded-full h-2"},ue={__name:"FileUploadComponent",props:{accept:{type:String,default:"image/*,.pdf,.doc,.docx"},multiple:{type:Boolean,default:!1},maxSize:{type:Number,default:10},doctype:{type:String,required:!0},docname:{type:String,default:""},isPrivate:{type:Boolean,default:!0}},emits:["upload-success","upload-error","files-changed"],setup(U,{expose:F,emit:h}){const v=U,S=h,d=_(null),y=_([]),c=_(!1),T=_(!1),M=_(0),D=J(()=>v.accept.replace(/\*/g,"").replace(/,/g,", ")),u=()=>{d.value.click()},i=k=>{const w=Array.from(k.target.files);r(w)},s=k=>{c.value=!1;const w=Array.from(k.dataTransfer.files);r(w)},r=k=>{const w=k.filter(b=>b.size>v.maxSize*1024*1024?(console.error(`File ${b.name} exceeds maximum size of ${v.maxSize}MB`),!1):v.accept.split(",").map(z=>z.trim()).some(z=>z.includes("*")?b.type.startsWith(z.replace("*","")):b.type===z)?!0:(console.error(`File ${b.name} type not accepted`),!1));v.multiple?y.value.push(...w.map(b=>({file:b,name:b.name,size:b.size,type:b.type,uploaded:!1,uploading:!1,error:!1,url:""}))):y.value=w.map(b=>({file:b,name:b.name,size:b.size,type:b.type,uploaded:!1,uploading:!1,error:!1,url:""})),S("files-changed",y.value)},p=k=>{y.value.splice(k,1),S("files-changed",y.value)},a=k=>{if(k===0)return"0 Bytes";const w=1024,b=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(k)/Math.log(w));return parseFloat((k/Math.pow(w,$)).toFixed(2))+" "+b[$]};return F({uploadFiles:()=>A(this,null,function*(){if(y.value.length===0)return[];T.value=!0,M.value=0;const k=[];try{for(let w=0;w<y.value.length;w++){const b=y.value[w];if(b.uploaded){k.push(b);continue}b.uploading=!0,M.value=w/y.value.length*100;const $=new FormData;$.append("file",b.file),$.append("doctype",v.doctype),v.docname&&$.append("docname",v.docname),$.append("is_private",v.isPrivate?"1":"0");try{const L=yield E("/api/method/upload_file",$);if(L.message==="OK"&&L.file_url)b.uploaded=!0,b.url=L.file_url,b.uploading=!1,k.push(b),S("upload-success",b);else throw new Error("Upload failed")}catch(L){b.error=!0,b.uploading=!1,S("upload-error",{file:b,error:L})}M.value=(w+1)/y.value.length*100}}catch(w){console.error("Upload error:",w)}finally{T.value=!1,M.value=100}return k}),files:y,clearFiles:()=>{y.value=[],S("files-changed",[])}}),(k,w)=>(o(),n("div",$s,[e("div",{onClick:u,onDragover:w[0]||(w[0]=Z(b=>c.value=!0,["prevent"])),onDragleave:w[1]||(w[1]=Z(b=>c.value=!1,["prevent"])),onDrop:Z(s,["prevent"]),class:V(["border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",c.value?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"])},[w[3]||(w[3]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("div",Ss,[w[2]||(w[2]=e("p",{class:"text-sm text-gray-600 mb-2"},[e("span",{class:"font-medium"},"Click to upload"),W(" or drag and drop ")],-1)),e("p",Ds,l(D.value)+" (Max "+l(U.maxSize)+"MB) ",1)]),e("input",{ref_key:"fileInput",ref:d,type:"file",accept:U.accept,multiple:U.multiple,onChange:i,class:"hidden"},null,40,js)],34),y.value.length>0?(o(),n("div",As,[w[8]||(w[8]=e("h4",{class:"text-sm font-medium text-gray-900"},"Uploaded Files",-1)),(o(!0),n(I,null,P(y.value,(b,$)=>(o(),n("div",{key:$,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",Ts,[e("div",Ms,[b.type.startsWith("image/")?(o(),n("div",Es,[...w[4]||(w[4]=[e("svg",{class:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])):b.type==="application/pdf"?(o(),n("div",Fs,[...w[5]||(w[5]=[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)])])):(o(),n("div",Vs,[...w[6]||(w[6]=[e("svg",{class:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]))]),e("div",Us,[e("p",qs,l(b.name),1),e("p",Is,l(a(b.size)),1)])]),e("div",Ps,[b.uploaded?(o(),n("span",Ls,"Uploaded")):b.uploading?(o(),n("span",Rs,"Uploading...")):b.error?(o(),n("span",Bs,"Error")):f("",!0),e("button",{onClick:L=>p($),class:"text-red-500 hover:text-red-700 transition-colors",disabled:b.uploading},[...w[7]||(w[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,zs)])]))),128))])):f("",!0),T.value?(o(),n("div",Ns,[e("div",{style:vt({width:M.value+"%"}),class:"bg-blue-600 h-2 rounded-full transition-all duration-300"},null,4)])):f("",!0)]))}},Hs={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Os={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},Gs={class:"flex justify-between items-center mb-6"},Ws={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ys={key:0,class:"space-y-4"},Ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Js=["value"],Xs={class:"flex space-x-4 pt-4 border-t border-gray-200"},Zs=["disabled"],eo={key:0,class:"flex items-center justify-center"},to={key:1},so={__name:"AttendanceRegularizationForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_([]),d=_(null),y=_({attendance_date:new Date().toISOString().split("T")[0],status:"",in_time:"",out_time:"",reason:"",shift_type:"",working_hours:"",additional_info:"",supporting_documents:[]}),c=D=>{y.value.supporting_documents=D},T=()=>A(this,null,function*(){try{const D=yield E("frappe.client.get_list",{doctype:"Shift Type",fields:["name","shift_name"],filters:{disabled:0}});S.value=D}catch(D){console.error("Error loading shift types:",D)}}),M=()=>A(this,null,function*(){v.value=!0;try{let D=[];y.value.supporting_documents.length>0&&(D=yield d.value.uploadFiles());const u=X(Q({doctype:"Attendance Request"},y.value),{supporting_documents:D.map(s=>s.url)}),i=yield E("frappe.client.insert",{doc:u});i.name&&(h("success",`Attendance Request ${i.name} submitted successfully!`),h("close"))}catch(D){console.error("Error submitting attendance request:",D)}finally{v.value=!1}});return se(()=>A(this,null,function*(){yield T()})),(D,u)=>(o(),n("div",Hs,[e("div",Os,[e("div",Gs,[u[11]||(u[11]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Request Attendance Regularization",-1)),e("button",{onClick:u[0]||(u[0]=i=>D.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...u[10]||(u[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(M,["prevent"]),class:"space-y-6"},[e("div",null,[u[12]||(u[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attendance Date *",-1)),C(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>y.value.attendance_date=i),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,y.value.attendance_date]])]),e("div",Ws,[u[15]||(u[15]=e("div",null,[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Current Status"),e("div",{class:"p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("p",{class:"text-sm text-gray-600"},"Current attendance status will be shown here")])],-1)),e("div",null,[u[14]||(u[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Requested Status *",-1)),C(e("select",{"onUpdate:modelValue":u[2]||(u[2]=i=>y.value.status=i),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...u[13]||(u[13]=[G('<option value="">Select Status</option><option value="Present">Present</option><option value="Absent">Absent</option><option value="Half Day">Half Day</option><option value="Work From Home">Work From Home</option><option value="On Leave">On Leave</option>',6)])],512),[[H,y.value.status]])])]),y.value.status==="Present"||y.value.status==="Half Day"?(o(),n("div",Ys,[u[18]||(u[18]=e("h4",{class:"text-sm font-medium text-gray-900"},"Time Details",-1)),e("div",Ks,[e("div",null,[u[16]||(u[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Check In Time",-1)),C(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>y.value.in_time=i),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,y.value.in_time]])]),e("div",null,[u[17]||(u[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Check Out Time",-1)),C(e("input",{"onUpdate:modelValue":u[4]||(u[4]=i=>y.value.out_time=i),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,y.value.out_time]])])])])):f("",!0),e("div",null,[u[19]||(u[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason for Regularization *",-1)),C(e("textarea",{"onUpdate:modelValue":u[5]||(u[5]=i=>y.value.reason=i),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Please explain why this attendance needs to be regularized..."},null,512),[[j,y.value.reason]])]),e("div",null,[u[20]||(u[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents (Optional)",-1)),te(ue,{ref_key:"fileUpload",ref:d,doctype:"Attendance Request","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:c},null,512)]),e("div",null,[u[24]||(u[24]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Shift Details",-1)),e("div",Qs,[e("div",null,[u[22]||(u[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Shift Type",-1)),C(e("select",{"onUpdate:modelValue":u[6]||(u[6]=i=>y.value.shift_type=i),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[u[21]||(u[21]=e("option",{value:""},"Select Shift Type",-1)),(o(!0),n(I,null,P(S.value,i=>(o(),n("option",{key:i.name,value:i.name},l(i.shift_name),9,Js))),128))],512),[[H,y.value.shift_type]])]),e("div",null,[u[23]||(u[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Working Hours",-1)),C(e("input",{"onUpdate:modelValue":u[7]||(u[7]=i=>y.value.working_hours=i),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 9:00 AM - 6:00 PM"},null,512),[[j,y.value.working_hours]])])])]),e("div",null,[u[25]||(u[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Additional Information",-1)),C(e("textarea",{"onUpdate:modelValue":u[8]||(u[8]=i=>y.value.additional_info=i),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional information that might help in processing this request..."},null,512),[[j,y.value.additional_info]])]),e("div",Xs,[e("button",{type:"submit",disabled:v.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",eo,[...u[26]||(u[26]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",to,"Submit Regularization Request"))],8,Zs),e("button",{type:"button",onClick:u[9]||(u[9]=i=>D.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},oo={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},no={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},lo={class:"flex justify-between items-center mb-6"},ao={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ro={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},io={class:"flex justify-between items-center"},uo={class:"text-lg font-bold text-blue-600"},po={class:"text-xs text-blue-700 mt-1"},co=["value"],mo={class:"flex space-x-4 pt-4 border-t border-gray-200"},vo=["disabled"],go={key:0,class:"flex items-center justify-center"},yo={key:1},xo={__name:"CompOffRequestForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_([]),d=_(null),y=_(8),c=_({work_from_date:new Date().toISOString().split("T")[0],work_from_time:"",work_to_time:"",leave_date:"",reason:"",compensatory_leave_type:"",additional_info:"",supporting_documents:[]}),T=J(()=>{if(!c.value.work_from_time||!c.value.work_to_time)return 0;const i=new Date(`2000-01-01T${c.value.work_from_time}`);let r=(new Date(`2000-01-01T${c.value.work_to_time}`)-i)/(1e3*60*60);return r=Math.max(0,r-y.value),Math.round(r*100)/100}),M=i=>{c.value.supporting_documents=i},D=()=>A(this,null,function*(){try{const i=yield E("frappe.client.get_list",{doctype:"Leave Type",fields:["name","leave_type_name"],filters:{allow_compensatory_leave:1,disabled:0}});S.value=i}catch(i){console.error("Error loading comp-off leave types:",i)}}),u=()=>A(this,null,function*(){v.value=!0;try{let i=[];c.value.supporting_documents.length>0&&(i=yield d.value.uploadFiles());const s=X(Q({doctype:"Compensatory Leave Request"},c.value),{extra_hours_worked:T.value,supporting_documents:i.map(p=>p.url)}),r=yield E("frappe.client.insert",{doc:s});r.name&&(h("success",`Comp-off Request ${r.name} submitted successfully!`),h("close"))}catch(i){console.error("Error submitting comp-off request:",i)}finally{v.value=!1}});return gt([()=>c.value.work_from_time,()=>c.value.work_to_time],()=>{},{deep:!0}),se(()=>A(this,null,function*(){yield D()})),(i,s)=>(o(),n("div",oo,[e("div",no,[e("div",lo,[s[10]||(s[10]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Request Compensatory Leave",-1)),e("button",{onClick:s[0]||(s[0]=r=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...s[9]||(s[9]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(u,["prevent"]),class:"space-y-6"},[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work Date *",-1)),C(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>c.value.work_from_date=r),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.work_from_date]]),s[12]||(s[12]=e("p",{class:"text-xs text-gray-500 mt-1"},"Select the date on which you worked extra hours",-1))]),e("div",ao,[e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work From Time *",-1)),C(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>c.value.work_from_time=r),type:"time",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.work_from_time]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Work To Time *",-1)),C(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>c.value.work_to_time=r),type:"time",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.work_to_time]])])]),e("div",ro,[e("div",io,[s[15]||(s[15]=e("span",{class:"text-sm font-medium text-blue-900"},"Extra Hours Worked:",-1)),e("span",uo,l(T.value)+" hours",1)]),e("p",po,"Calculated based on standard working hours ("+l(y.value)+" hours)",1)]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Comp-off Date *",-1)),C(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>c.value.leave_date=r),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.leave_date]]),s[17]||(s[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Date on which you want to take the compensatory leave",-1))]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason for Extra Work *",-1)),C(e("textarea",{"onUpdate:modelValue":s[5]||(s[5]=r=>c.value.reason=r),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Please explain why you worked extra hours..."},null,512),[[j,c.value.reason]])]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Comp-off Leave Type *",-1)),C(e("select",{"onUpdate:modelValue":s[6]||(s[6]=r=>c.value.compensatory_leave_type=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[s[19]||(s[19]=e("option",{value:""},"Select Leave Type",-1)),(o(!0),n(I,null,P(S.value,r=>(o(),n("option",{key:r.name,value:r.name},l(r.leave_type_name),9,co))),128))],512),[[H,c.value.compensatory_leave_type]])]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents (Optional)",-1)),te(ue,{ref_key:"fileUpload",ref:d,doctype:"Compensatory Leave Request","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:M},null,512),s[22]||(s[22]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload any documents that support your extra work claim",-1))]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Additional Information",-1)),C(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=r=>c.value.additional_info=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional information about the work or request..."},null,512),[[j,c.value.additional_info]])]),e("div",mo,[e("button",{type:"submit",disabled:v.value||T.value<=0,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",go,[...s[24]||(s[24]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",yo,"Submit Comp-off Request"))],8,vo),e("button",{type:"button",onClick:s[8]||(s[8]=r=>i.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},bo={class:"bg-white rounded-xl shadow-sm border border-gray-200"},fo={class:"p-6 border-b border-gray-200"},_o={class:"flex justify-between items-center"},Co={class:"flex items-center space-x-2"},wo={class:"text-sm font-medium text-gray-900 min-w-[120px] text-center"},ko={class:"p-6"},ho={key:0,class:"flex justify-center items-center py-8"},$o={key:1,class:"space-y-4"},So={class:"grid grid-cols-7 gap-1"},Do={class:"grid grid-cols-7 gap-1"},jo=["onClick"],Ao={class:"flex flex-col h-full"},To={class:"flex justify-between items-start"},Mo={key:0,class:"mt-auto"},Eo={class:"text-xs text-gray-600"},Fo={key:0,class:"text-xs text-gray-500 truncate"},Vo={key:1,class:"mt-auto"},Uo={class:"mt-6 pt-4 border-t border-gray-200"},qo={class:"flex flex-wrap gap-3"},Io={class:"text-xs text-gray-500"},Po={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Lo={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},Ro={class:"flex justify-between items-center mb-4"},Bo={class:"space-y-4"},zo={class:"text-gray-900"},No={key:0},Ho={class:"text-gray-900"},Oo={class:"text-gray-900"},Go={key:0},Wo={class:"text-gray-900"},Yo={key:1},Ko={class:"text-gray-900"},Qo={key:1},Jo={class:"mt-6 pt-4 border-t border-gray-200"},Xo={__name:"ShiftCalendar",props:{employeeId:{type:String,required:!0}},setup(U){const F=U,h=_(!1),v=_(new Date().getMonth()),S=_(new Date().getFullYear()),d=_([]),y=_(null),c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],T=J(()=>new Date(S.value,v.value).toLocaleDateString("en-US",{month:"long",year:"numeric"})),M=J(()=>new Date(S.value,v.value,1).getDay()),D=J(()=>{const w=[],b=new Date(S.value,v.value+1,0).getDate(),$=new Date;for(let L=1;L<=b;L++){const z=new Date(S.value,v.value,L),Y=z.toISOString().split("T")[0],re=d.value.find(ae=>ae.start_date<=Y&&ae.end_date>=Y);w.push({dayNumber:L,date:Y,isToday:z.toDateString()===$.toDateString(),isWeekend:z.getDay()===0||z.getDay()===6,shift:re?re.shift_type_details:null})}return w}),u=J(()=>{const w=d.value.filter($=>$.shift_type_details).map($=>$.shift_type_details),b={};return w.forEach($=>{b[$.name]=$}),Object.values(b)}),i=()=>{v.value===0?(v.value=11,S.value--):v.value--,k()},s=()=>{v.value===11?(v.value=0,S.value++):v.value++,k()},r=w=>{y.value=w},p=w=>{const b=["bg-blue-100 text-blue-800","bg-green-100 text-green-800","bg-purple-100 text-purple-800","bg-orange-100 text-orange-800","bg-pink-100 text-pink-800","bg-indigo-100 text-indigo-800"],L=w.name.split("").reduce((z,Y)=>z+Y.charCodeAt(0),0)%b.length;return b[L]},a=w=>{if(!w)return"N/A";const[b,$]=w.split(":"),L=parseInt(b),z=L>=12?"PM":"AM";return`${L>12?L-12:L===0?12:L}:${$} ${z}`},g=w=>new Date(w).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=()=>A(this,null,function*(){h.value=!0;try{const w=new Date(S.value,v.value,1).toISOString().split("T")[0],b=new Date(S.value,v.value+1,0).toISOString().split("T")[0],$=yield E("frappe.client.get_list",{doctype:"Shift Assignment",fields:["name","shift_type","start_date","end_date"],filters:{employee:F.employeeId,start_date:["<=",b],end_date:[">=",w],docstatus:1}}),L=yield Promise.all($.map(z=>A(this,null,function*(){const Y=yield E("frappe.client.get_value",{doctype:"Shift Type",name:z.shift_type,fields:["shift_name","start_time","end_time","location","description"]});return X(Q({},z),{shift_type_details:Y})})));d.value=L}catch(w){console.error("Error loading shift assignments:",w),d.value=[]}finally{h.value=!1}});return gt([v,S],()=>{k()}),se(()=>{k()}),(w,b)=>(o(),n("div",bo,[e("div",fo,[e("div",_o,[b[4]||(b[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Shift Schedule",-1)),e("div",Co,[e("button",{onClick:i,class:"p-2 text-gray-500 hover:text-gray-700 transition-colors"},[...b[2]||(b[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("span",wo,l(T.value),1),e("button",{onClick:s,class:"p-2 text-gray-500 hover:text-gray-700 transition-colors"},[...b[3]||(b[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])])]),e("div",ko,[h.value?(o(),n("div",ho,[...b[5]||(b[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(o(),n("div",$o,[e("div",So,[(o(),n(I,null,P(c,$=>e("div",{key:$,class:"text-center text-xs font-medium text-gray-500 py-2"},l($),1)),64))]),e("div",Do,[(o(!0),n(I,null,P(M.value,$=>(o(),n("div",{key:`empty-${$}`,class:"h-20 border border-gray-100 rounded-lg"}))),128)),(o(!0),n(I,null,P(D.value,$=>(o(),n("div",{key:$.date,class:V(["h-20 border rounded-lg p-2 cursor-pointer transition-colors",$.isToday?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50",$.isWeekend?"bg-gray-50":""]),onClick:L=>r($)},[e("div",Ao,[e("div",To,[e("span",{class:V(["text-sm font-medium",$.isToday?"text-blue-600":"text-gray-900"])},l($.dayNumber),3),$.shift?(o(),n("span",{key:0,class:V(["text-xs px-1 py-0.5 rounded",p($.shift)])},l($.shift.shift_name),3)):f("",!0)]),$.shift?(o(),n("div",Mo,[e("div",Eo,l(a($.shift.start_time))+" - "+l(a($.shift.end_time)),1),$.shift.location?(o(),n("div",Fo,l($.shift.location),1)):f("",!0)])):$.isWeekend?f("",!0):(o(),n("div",Vo,[...b[6]||(b[6]=[e("div",{class:"text-xs text-gray-400"},"No shift assigned",-1)])]))])],10,jo))),128))])])),e("div",Uo,[b[7]||(b[7]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Shift Types",-1)),e("div",qo,[(o(!0),n(I,null,P(u.value,$=>(o(),n("div",{key:$.name,class:"flex items-center space-x-2"},[e("span",{class:V([p($),"text-xs px-2 py-1 rounded"])},l($.shift_name),3),e("span",Io,l(a($.start_time))+" - "+l(a($.end_time)),1)]))),128))])])]),y.value?(o(),n("div",Po,[e("div",Lo,[e("div",Ro,[b[9]||(b[9]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Shift Details",-1)),e("button",{onClick:b[0]||(b[0]=$=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[...b[8]||(b[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Bo,[e("div",null,[b[10]||(b[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date",-1)),e("p",zo,l(g(y.value.date)),1)]),y.value.shift?(o(),n("div",No,[e("div",null,[b[11]||(b[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Shift Type",-1)),e("p",Ho,l(y.value.shift.shift_name),1)]),e("div",null,[b[12]||(b[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Working Hours",-1)),e("p",Oo,l(a(y.value.shift.start_time))+" - "+l(a(y.value.shift.end_time)),1)]),y.value.shift.location?(o(),n("div",Go,[b[13]||(b[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Location",-1)),e("p",Wo,l(y.value.shift.location),1)])):f("",!0),y.value.shift.description?(o(),n("div",Yo,[b[14]||(b[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",Ko,l(y.value.shift.description),1)])):f("",!0)])):(o(),n("div",Qo,[...b[15]||(b[15]=[e("p",{class:"text-gray-500"},"No shift assigned for this date",-1)])]))]),e("div",Jo,[e("button",{onClick:b[1]||(b[1]=$=>y.value=null),class:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Close ")])])])):f("",!0)]))}},Zo={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},en={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},tn={class:"flex justify-between items-center mb-6"},sn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},on={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nn=["min"],ln={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},an={class:"flex justify-between items-center"},rn={class:"text-lg font-bold text-blue-600"},dn={class:"space-y-4"},un={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pn={key:0},cn={class:"space-y-4"},mn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vn={class:"space-y-3"},gn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},yn={class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},xn={class:"flex justify-between items-center"},bn={class:"text-lg font-bold text-gray-900"},fn={class:"flex space-x-4 pt-4 border-t border-gray-200"},_n=["disabled"],Cn={key:0,class:"flex items-center justify-center"},wn={key:1},kn={__name:"TravelRequestForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_(null),d=_({purpose:"",travel_type:"",departure_date:"",return_date:"",destination:"",accommodation_required:"",accommodation_type:"",transportation_mode:"",transportation_class:"",estimated_transportation:0,estimated_accommodation:0,estimated_meals:0,business_purpose:"",additional_info:"",supporting_documents:[]}),y=J(()=>{if(!d.value.departure_date||!d.value.return_date)return 0;const D=new Date(d.value.departure_date),u=new Date(d.value.return_date),i=Math.abs(u-D);return Math.ceil(i/(1e3*60*60*24))+1}),c=J(()=>(d.value.estimated_transportation||0)+(d.value.estimated_accommodation||0)+(d.value.estimated_meals||0)),T=D=>{d.value.supporting_documents=D},M=()=>A(this,null,function*(){v.value=!0;try{let D=[];d.value.supporting_documents.length>0&&(D=yield S.value.uploadFiles());const u=X(Q({doctype:"Travel Request"},d.value),{duration:y.value,total_estimated_expenses:c.value,supporting_documents:D.map(s=>s.url)}),i=yield E("frappe.client.insert",{doc:u});i.name&&(h("success",`Travel Request ${i.name} submitted successfully!`),h("close"))}catch(D){console.error("Error submitting travel request:",D)}finally{v.value=!1}});return(D,u)=>(o(),n("div",Zo,[e("div",en,[e("div",tn,[u[17]||(u[17]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Submit Travel Request",-1)),e("button",{onClick:u[0]||(u[0]=i=>D.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...u[16]||(u[16]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(M,["prevent"]),class:"space-y-6"},[e("div",sn,[e("div",null,[u[18]||(u[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose of Travel *",-1)),C(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>d.value.purpose=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Client Meeting, Conference, Training"},null,512),[[j,d.value.purpose]])]),e("div",null,[u[20]||(u[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Travel Type *",-1)),C(e("select",{"onUpdate:modelValue":u[2]||(u[2]=i=>d.value.travel_type=i),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...u[19]||(u[19]=[e("option",{value:""},"Select Travel Type",-1),e("option",{value:"Domestic"},"Domestic",-1),e("option",{value:"International"},"International",-1)])],512),[[H,d.value.travel_type]])])]),e("div",on,[e("div",null,[u[21]||(u[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Departure Date *",-1)),C(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>d.value.departure_date=i),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,d.value.departure_date]])]),e("div",null,[u[22]||(u[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Return Date *",-1)),C(e("input",{"onUpdate:modelValue":u[4]||(u[4]=i=>d.value.return_date=i),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:d.value.departure_date},null,8,nn),[[j,d.value.return_date]])])]),d.value.departure_date&&d.value.return_date?(o(),n("div",ln,[e("div",an,[u[23]||(u[23]=e("span",{class:"text-sm font-medium text-blue-900"},"Travel Duration:",-1)),e("span",rn,l(y.value)+" days",1)])])):f("",!0),e("div",null,[u[24]||(u[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Destination Details *",-1)),C(e("textarea",{"onUpdate:modelValue":u[5]||(u[5]=i=>d.value.destination=i),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"City, Country, Venue details..."},null,512),[[j,d.value.destination]])]),e("div",dn,[u[29]||(u[29]=e("h4",{class:"text-sm font-medium text-gray-900"},"Accommodation Details",-1)),e("div",un,[e("div",null,[u[26]||(u[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Accommodation Required",-1)),C(e("select",{"onUpdate:modelValue":u[6]||(u[6]=i=>d.value.accommodation_required=i),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...u[25]||(u[25]=[e("option",{value:""},"Select Option",-1),e("option",{value:"Yes"},"Yes",-1),e("option",{value:"No"},"No",-1)])],512),[[H,d.value.accommodation_required]])]),d.value.accommodation_required==="Yes"?(o(),n("div",pn,[u[28]||(u[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Accommodation Type",-1)),C(e("select",{"onUpdate:modelValue":u[7]||(u[7]=i=>d.value.accommodation_type=i),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...u[27]||(u[27]=[G('<option value="">Select Type</option><option value="Hotel">Hotel</option><option value="Guest House">Guest House</option><option value="Apartment">Apartment</option><option value="Other">Other</option>',5)])],512),[[H,d.value.accommodation_type]])])):f("",!0)])]),e("div",cn,[u[33]||(u[33]=e("h4",{class:"text-sm font-medium text-gray-900"},"Transportation Details",-1)),e("div",mn,[e("div",null,[u[31]||(u[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Transportation Mode",-1)),C(e("select",{"onUpdate:modelValue":u[8]||(u[8]=i=>d.value.transportation_mode=i),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...u[30]||(u[30]=[G('<option value="">Select Mode</option><option value="Flight">Flight</option><option value="Train">Train</option><option value="Bus">Bus</option><option value="Car">Car</option><option value="Taxi">Taxi</option><option value="Other">Other</option>',7)])],512),[[H,d.value.transportation_mode]])]),e("div",null,[u[32]||(u[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Class/Type",-1)),C(e("input",{"onUpdate:modelValue":u[9]||(u[9]=i=>d.value.transportation_class=i),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Economy, Business, AC, Non-AC"},null,512),[[j,d.value.transportation_class]])])])]),e("div",null,[u[38]||(u[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Estimated Expenses",-1)),e("div",vn,[e("div",gn,[e("div",null,[u[34]||(u[34]=e("label",{class:"block text-xs text-gray-600 mb-1"},"Transportation",-1)),C(e("input",{"onUpdate:modelValue":u[10]||(u[10]=i=>d.value.estimated_transportation=i),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0.00"},null,512),[[j,d.value.estimated_transportation,void 0,{number:!0}]])]),e("div",null,[u[35]||(u[35]=e("label",{class:"block text-xs text-gray-600 mb-1"},"Accommodation",-1)),C(e("input",{"onUpdate:modelValue":u[11]||(u[11]=i=>d.value.estimated_accommodation=i),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0.00"},null,512),[[j,d.value.estimated_accommodation,void 0,{number:!0}]])]),e("div",null,[u[36]||(u[36]=e("label",{class:"block text-xs text-gray-600 mb-1"},"Meals & Others",-1)),C(e("input",{"onUpdate:modelValue":u[12]||(u[12]=i=>d.value.estimated_meals=i),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0.00"},null,512),[[j,d.value.estimated_meals,void 0,{number:!0}]])])]),e("div",yn,[e("div",xn,[u[37]||(u[37]=e("span",{class:"text-sm font-medium text-gray-900"},"Total Estimated:",-1)),e("span",bn,"₹"+l(c.value.toFixed(2)),1)])])])]),e("div",null,[u[39]||(u[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Business Purpose *",-1)),C(e("textarea",{"onUpdate:modelValue":u[13]||(u[13]=i=>d.value.business_purpose=i),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe the business purpose and expected outcomes of this travel..."},null,512),[[j,d.value.business_purpose]])]),e("div",null,[u[40]||(u[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents (Optional)",-1)),te(ue,{ref_key:"fileUpload",ref:S,doctype:"Travel Request","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:T},null,512),u[41]||(u[41]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload invitation letters, conference details, etc.",-1))]),e("div",null,[u[42]||(u[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Additional Information",-1)),C(e("textarea",{"onUpdate:modelValue":u[14]||(u[14]=i=>d.value.additional_info=i),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional information about the travel request..."},null,512),[[j,d.value.additional_info]])]),e("div",fn,[e("button",{type:"submit",disabled:v.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",Cn,[...u[43]||(u[43]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",wn,"Submit Travel Request"))],8,_n),e("button",{type:"button",onClick:u[15]||(u[15]=i=>D.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},hn={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$n={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Sn={class:"flex justify-between items-center mb-6"},Dn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jn=["value"],An={key:0,class:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300"},Tn={key:1,class:"space-y-4"},Mn={class:"flex justify-between items-start mb-4"},En={class:"font-medium text-gray-900"},Fn=["onClick"],Vn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Un=["onUpdate:modelValue"],qn=["onUpdate:modelValue"],In=["onUpdate:modelValue"],Pn=["onUpdate:modelValue"],Ln={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4"},Rn={class:"flex justify-between items-center"},Bn={class:"text-2xl font-bold text-green-600"},zn={class:"flex space-x-4 pt-4 border-t border-gray-200"},Nn=["disabled"],Hn={key:0,class:"flex items-center justify-center"},On={key:1},Gn={__name:"TaxDeclarationForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_([]),d=_(null),y=_({financial_year:"",declaration_type:"",remarks:"",declaration_items:[],supporting_documents:[]}),c=J(()=>y.value.declaration_items.reduce((s,r)=>s+(r.amount||0),0)),T=()=>{y.value.declaration_items.push({description:"",amount:0,section:"",date:new Date().toISOString().split("T")[0]})},M=s=>{y.value.declaration_items.splice(s,1)},D=s=>{y.value.supporting_documents=s},u=()=>A(this,null,function*(){try{const s=yield E("frappe.client.get_list",{doctype:"Financial Year",fields:["name","year_name"],filters:{disabled:0},order_by:"year_name desc"});S.value=s}catch(s){console.error("Error loading financial years:",s)}}),i=()=>A(this,null,function*(){v.value=!0;try{let s=[];y.value.supporting_documents.length>0&&(s=yield d.value.uploadFiles());const r=X(Q({doctype:"Employee Tax Exemption Declaration"},y.value),{total_amount:c.value,supporting_documents:s.map(a=>a.url)}),p=yield E("frappe.client.insert",{doc:r});p.name&&(h("success",`Tax Declaration ${p.name} submitted successfully!`),h("close"))}catch(s){console.error("Error submitting tax declaration:",s)}finally{v.value=!1}});return se(()=>A(this,null,function*(){yield u()})),(s,r)=>(o(),n("div",hn,[e("div",$n,[e("div",Sn,[r[6]||(r[6]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Submit Tax Declaration",-1)),e("button",{onClick:r[0]||(r[0]=p=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...r[5]||(r[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(i,["prevent"]),class:"space-y-6"},[e("div",Dn,[e("div",null,[r[8]||(r[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Financial Year *",-1)),C(e("select",{"onUpdate:modelValue":r[1]||(r[1]=p=>y.value.financial_year=p),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[r[7]||(r[7]=e("option",{value:""},"Select Financial Year",-1)),(o(!0),n(I,null,P(S.value,p=>(o(),n("option",{key:p.name,value:p.name},l(p.year_name),9,jn))),128))],512),[[H,y.value.financial_year]])]),e("div",null,[r[10]||(r[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Declaration Type *",-1)),C(e("select",{"onUpdate:modelValue":r[2]||(r[2]=p=>y.value.declaration_type=p),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...r[9]||(r[9]=[G('<option value="">Select Type</option><option value="Section 80C">Section 80C</option><option value="Section 80D">Section 80D</option><option value="Section 80E">Section 80E</option><option value="Section 80G">Section 80G</option><option value="Section 80GG">Section 80GG</option><option value="Section 80TTA">Section 80TTA</option><option value="Section 80TTB">Section 80TTB</option><option value="Section 80CC">Section 80CC</option><option value="Section 80CCD">Section 80CCD</option><option value="Section 80CCE">Section 80CCE</option><option value="Section 80CCF">Section 80CCF</option><option value="Section 80CCG">Section 80CCG</option><option value="Section 80CCH">Section 80CCH</option><option value="Section 80CC(1)">Section 80CC(1)</option><option value="Section 80CC(2)">Section 80CC(2)</option><option value="Section 80CC(3)">Section 80CC(3)</option><option value="Section 80CC(4)">Section 80CC(4)</option><option value="Section 80CC(5)">Section 80CC(5)</option><option value="Section 80CC(6)">Section 80CC(6)</option><option value="Section 80CC(7)">Section 80CC(7)</option><option value="Section 80CC(8)">Section 80CC(8)</option><option value="Section 80CC(9)">Section 80CC(9)</option><option value="Section 80CC(10)">Section 80CC(10)</option><option value="Section 80CC(11)">Section 80CC(11)</option><option value="Section 80CC(12)">Section 80CC(12)</option><option value="Section 80CC(13)">Section 80CC(13)</option><option value="Section 80CC(14)">Section 80CC(14)</option><option value="Section 80CC(15)">Section 80CC(15)</option><option value="Section 80CC(16)">Section 80CC(16)</option><option value="Section 80CC(17)">Section 80CC(17)</option><option value="Section 80CC(18)">Section 80CC(18)</option><option value="Section 80CC(19)">Section 80CC(19)</option><option value="Section 80CC(20)">Section 80CC(20)</option><option value="Section 80CC(21)">Section 80CC(21)</option><option value="Section 80CC(22)">Section 80CC(22)</option><option value="Section 80CC(23)">Section 80CC(23)</option><option value="Section 80CC(24)">Section 80CC(24)</option><option value="Section 80CC(25)">Section 80CC(25)</option><option value="Section 80CC(26)">Section 80CC(26)</option><option value="Section 80CC(27)">Section 80CC(27)</option><option value="Section 80CC(28)">Section 80CC(28)</option><option value="Section 80CC(29)">Section 80CC(29)</option><option value="Section 80CC(30)">Section 80CC(30)</option><option value="Section 80CC(31)">Section 80CC(31)</option><option value="Section 80CC(32)">Section 80CC(32)</option><option value="Section 80CC(33)">Section 80CC(33)</option><option value="Section 80CC(34)">Section 80CC(34)</option><option value="Section 80CC(35)">Section 80CC(35)</option><option value="Section 80CC(36)">Section 80CC(36)</option><option value="Section 80CC(37)">Section 80CC(37)</option><option value="Section 80CC(38)">Section 80CC(38)</option><option value="Section 80CC(39)">Section 80CC(39)</option><option value="Section 80CC(40)">Section 80CC(40)</option><option value="Section 80CC(41)">Section 80CC(41)</option><option value="Section 80CC(42)">Section 80CC(42)</option><option value="Section 80CC(43)">Section 80CC(43)</option><option value="Section 80CC(44)">Section 80CC(44)</option><option value="Section 80CC(45)">Section 80CC(45)</option><option value="Section 80CC(46)">Section 80CC(46)</option><option value="Section 80CC(47)">Section 80CC(47)</option><option value="Section 80CC(48)">Section 80CC(48)</option><option value="Section 80CC(49)">Section 80CC(49)</option><option value="Section 80CC(50)">Section 80CC(50)</option><option value="Section 80CC(51)">Section 80CC(51)</option><option value="Section 80CC(52)">Section 80CC(52)</option><option value="Section 80CC(53)">Section 80CC(53)</option><option value="Section 80CC(54)">Section 80CC(54)</option><option value="Section 80CC(55)">Section 80CC(55)</option><option value="Section 80CC(56)">Section 80CC(56)</option><option value="Section 80CC(57)">Section 80CC(57)</option><option value="Section 80CC(58)">Section 80CC(58)</option><option value="Section 80CC(59)">Section 80CC(59)</option><option value="Section 80CC(60)">Section 80CC(60)</option><option value="Section 80CC(61)">Section 80CC(61)</option><option value="Section 80CC(62)">Section 80CC(62)</option><option value="Section 80CC(63)">Section 80CC(63)</option><option value="Section 80CC(64)">Section 80CC(64)</option><option value="Section 80CC(65)">Section 80CC(65)</option><option value="Section 80CC(66)">Section 80CC(66)</option><option value="Section 80CC(67)">Section 80CC(67)</option><option value="Section 80CC(68)">Section 80CC(68)</option><option value="Section 80CC(69)">Section 80CC(69)</option><option value="Section 80CC(70)">Section 80CC(70)</option><option value="Section 80CC(71)">Section 80CC(71)</option><option value="Section 80CC(72)">Section 80CC(72)</option><option value="Section 80CC(73)">Section 80CC(73)</option><option value="Section 80CC(74)">Section 80CC(74)</option><option value="Section 80CC(75)">Section 80CC(75)</option><option value="Section 80CC(76)">Section 80CC(76)</option><option value="Section 80CC(77)">Section 80CC(77)</option><option value="Section 80CC(78)">Section 80CC(78)</option><option value="Section 80CC(79)">Section 80CC(79)</option><option value="Section 80CC(80)">Section 80CC(80)</option><option value="Section 80CC(81)">Section 80CC(81)</option><option value="Section 80CC(82)">Section 80CC(82)</option><option value="Section 80CC(83)">Section 80CC(83)</option><option value="Section 80CC(84)">Section 80CC(84)</option><option value="Section 80CC(85)">Section 80CC(85)</option><option value="Section 80CC(86)">Section 80CC(86)</option><option value="Section 80CC(87)">Section 80CC(87)</option><option value="Section 80CC(88)">Section 80CC(88)</option><option value="Section 80CC(89)">Section 80CC(89)</option><option value="Section 80CC(90)">Section 80CC(90)</option><option value="Section 80CC(91)">Section 80CC(91)</option><option value="Section 80CC(92)">Section 80CC(92)</option><option value="Section 80CC(93)">Section 80CC(93)</option><option value="Section 80CC(94)">Section 80CC(94)</option><option value="Section 80CC(95)">Section 80CC(95)</option><option value="Section 80CC(96)">Section 80CC(96)</option><option value="Section 80CC(97)">Section 80CC(97)</option><option value="Section 80CC(98)">Section 80CC(98)</option><option value="Section 80CC(99)">Section 80CC(99)</option><option value="Section 80CC(100)">Section 80CC(100)</option><option value="Section 80CC(101)">Section 80CC(101)</option><option value="Section 80CC(102)">Section 80CC(102)</option><option value="Section 80CC(103)">Section 80CC(103)</option><option value="Section 80CC(104)">Section 80CC(104)</option><option value="Section 80CC(105)">Section 80CC(105)</option><option value="Section 80CC(106)">Section 80CC(106)</option><option value="Section 80CC(107)">Section 80CC(107)</option><option value="Section 80CC(108)">Section 80CC(108)</option><option value="Section 80CC(109)">Section 80CC(109)</option><option value="Section 80CC(110)">Section 80CC(110)</option><option value="Section 80CC(111)">Section 80CC(111)</option><option value="Section 80CC(112)">Section 80CC(112)</option><option value="Section 80CC(113)">Section 80CC(113)</option><option value="Section 80CC(114)">Section 80CC(114)</option><option value="Section 80CC(115)">Section 80CC(115)</option><option value="Section 80CC(116)">Section 80CC(116)</option><option value="Section 80CC(117)">Section 80CC(117)</option><option value="Section 80CC(118)">Section 80CC(118)</option><option value="Section 80CC(119)">Section 80CC(119)</option><option value="Section 80CC(120)">Section 80CC(120)</option><option value="Section 80CC(121)">Section 80CC(121)</option><option value="Section 80CC(122)">Section 80CC(122)</option><option value="Section 80CC(123)">Section 80CC(123)</option><option value="Section 80CC(124)">Section 80CC(124)</option><option value="Section 80CC(125)">Section 80CC(125)</option><option value="Section 80CC(126)">Section 80CC(126)</option><option value="Section 80CC(127)">Section 80CC(127)</option><option value="Section 80CC(128)">Section 80CC(128)</option><option value="Section 80CC(129)">Section 80CC(129)</option><option value="Section 80CC(130)">Section 80CC(130)</option><option value="Section 80CC(131)">Section 80CC(131)</option><option value="Section 80CC(132)">Section 80CC(132)</option><option value="Section 80CC(133)">Section 80CC(133)</option><option value="Section 80CC(134)">Section 80CC(134)</option><option value="Section 80CC(135)">Section 80CC(135)</option><option value="Section 80CC(136)">Section 80CC(136)</option><option value="Section 80CC(137)">Section 80CC(137)</option><option value="Section 80CC(138)">Section 80CC(138)</option><option value="Section 80CC(139)">Section 80CC(139)</option><option value="Section 80CC(140)">Section 80CC(140)</option><option value="Section 80CC(141)">Section 80CC(141)</option><option value="Section 80CC(142)">Section 80CC(142)</option><option value="Section 80CC(143)">Section 80CC(143)</option><option value="Section 80CC(144)">Section 80CC(144)</option><option value="Section 80CC(145)">Section 80CC(145)</option><option value="Section 80CC(146)">Section 80CC(146)</option><option value="Section 80CC(147)">Section 80CC(147)</option><option value="Section 80CC(148)">Section 80CC(148)</option><option value="Section 80CC(149)">Section 80CC(149)</option><option value="Section 80CC(150)">Section 80CC(150)</option>',164)])],512),[[H,y.value.declaration_type]])])]),e("div",null,[e("div",{class:"flex justify-between items-center mb-4"},[r[11]||(r[11]=e("h4",{class:"text-lg font-medium text-gray-900"},"Declaration Items",-1)),e("button",{type:"button",onClick:T,class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"}," + Add Item ")]),y.value.declaration_items.length===0?(o(),n("div",An,[...r[12]||(r[12]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"text-gray-500"},"No declaration items added",-1),e("p",{class:"text-sm text-gray-400 mt-1"},'Click "Add Item" to add your first declaration item',-1)])])):(o(),n("div",Tn,[(o(!0),n(I,null,P(y.value.declaration_items,(p,a)=>(o(),n("div",{key:a,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",Mn,[e("h5",En,"Item "+l(a+1),1),e("button",{type:"button",onClick:g=>M(a),class:"text-red-500 hover:text-red-700"},[...r[13]||(r[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Fn)]),e("div",Vn,[e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),C(e("input",{"onUpdate:modelValue":g=>p.description=g,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Description of the investment/expense"},null,8,Un),[[j,p.description]])]),e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount *",-1)),C(e("input",{"onUpdate:modelValue":g=>p.amount=g,type:"number",step:"0.01",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0.00"},null,8,qn),[[j,p.amount,void 0,{number:!0}]])]),e("div",null,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Section *",-1)),C(e("input",{"onUpdate:modelValue":g=>p.section=g,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"e.g., 80C, 80D"},null,8,In),[[j,p.section]])]),e("div",null,[r[17]||(r[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date *",-1)),C(e("input",{"onUpdate:modelValue":g=>p.date=g,type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,8,Pn),[[j,p.date]])])])]))),128))]))]),c.value>0?(o(),n("div",Ln,[e("div",Rn,[r[18]||(r[18]=e("span",{class:"text-lg font-medium text-green-900"},"Total Declaration Amount:",-1)),e("span",Bn,"₹"+l(c.value.toFixed(2)),1)])])):f("",!0),e("div",null,[r[19]||(r[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents (Optional)",-1)),te(ue,{ref_key:"fileUpload",ref:d,doctype:"Employee Tax Exemption Declaration","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:D},null,512),r[20]||(r[20]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload receipts, certificates, or other supporting documents",-1))]),e("div",null,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Remarks",-1)),C(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=p=>y.value.remarks=p),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Additional remarks about this tax declaration..."},null,512),[[j,y.value.remarks]])]),e("div",zn,[e("button",{type:"submit",disabled:v.value||y.value.declaration_items.length===0,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",Hn,[...r[22]||(r[22]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",On,"Submit Tax Declaration"))],8,Nn),e("button",{type:"button",onClick:r[4]||(r[4]=p=>s.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},Wn={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Yn={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Kn={class:"flex justify-between items-center mb-6"},Qn=["value"],Jn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xn={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Zn={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},el={class:"text-lg font-bold text-blue-600"},tl={class:"text-lg font-bold text-blue-600"},sl={class:"text-lg font-bold text-blue-600"},ol={class:"text-xs text-blue-700 mt-2"},nl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ll={class:"space-y-4"},al={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},il={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},dl={class:"mt-4"},ul={class:"flex items-center"},pl={class:"flex space-x-4 pt-4 border-t border-gray-200"},cl=["disabled"],ml={key:0,class:"flex items-center justify-center"},vl={key:1},gl={__name:"LoanApplicationForm",emits:["close","success"],setup(U,{emit:F}){const h=F,v=_(!1),S=_([]),d=_(null),y=_(12),c=_({loan_type:"",loan_amount:0,repayment_period:12,purpose:"",application_date:new Date().toISOString().split("T")[0],requested_disbursement_date:"",guarantor_name:"",guarantor_relation:"",guarantor_contact:"",guarantor_address:"",additional_info:"",accept_terms:!1,supporting_documents:[]}),T=J(()=>{if(!c.value.loan_amount||!c.value.repayment_period||!y.value)return 0;const r=c.value.loan_amount,p=y.value/12/100,a=c.value.repayment_period;return r*p*Math.pow(1+p,a)/(Math.pow(1+p,a)-1)}),M=J(()=>!T.value||!c.value.repayment_period?0:T.value*c.value.repayment_period-c.value.loan_amount),D=J(()=>c.value.loan_amount+M.value),u=r=>{c.value.supporting_documents=r},i=()=>A(this,null,function*(){try{const r=yield E("frappe.client.get_list",{doctype:"Loan Type",fields:["name","loan_type_name","maximum_loan_amount","interest_rate"],filters:{disabled:0}});S.value=r}catch(r){console.error("Error loading loan types:",r)}}),s=()=>A(this,null,function*(){v.value=!0;try{let r=[];c.value.supporting_documents.length>0&&(r=yield d.value.uploadFiles());const p=X(Q({doctype:"Loan Application"},c.value),{emi_amount:T.value,total_interest:M.value,total_payment:D.value,supporting_documents:r.map(g=>g.url)}),a=yield E("frappe.client.insert",{doc:p});a.name&&(h("success",`Loan Application ${a.name} submitted successfully!`),h("close"))}catch(r){console.error("Error submitting loan application:",r)}finally{v.value=!1}});return se(()=>A(this,null,function*(){yield i()})),(r,p)=>(o(),n("div",Wn,[e("div",Yn,[e("div",Kn,[p[15]||(p[15]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Apply for Loan",-1)),e("button",{onClick:p[0]||(p[0]=a=>r.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...p[14]||(p[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(s,["prevent"]),class:"space-y-6"},[e("div",null,[p[17]||(p[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Loan Type *",-1)),C(e("select",{"onUpdate:modelValue":p[1]||(p[1]=a=>c.value.loan_type=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[p[16]||(p[16]=e("option",{value:""},"Select Loan Type",-1)),(o(!0),n(I,null,P(S.value,a=>(o(),n("option",{key:a.name,value:a.name},l(a.loan_type_name),9,Qn))),128))],512),[[H,c.value.loan_type]])]),e("div",Jn,[e("div",null,[p[18]||(p[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Loan Amount (₹) *",-1)),C(e("input",{"onUpdate:modelValue":p[2]||(p[2]=a=>c.value.loan_amount=a),type:"number",step:"0.01",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"},null,512),[[j,c.value.loan_amount,void 0,{number:!0}]])]),e("div",null,[p[19]||(p[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Repayment Period (Months) *",-1)),C(e("input",{"onUpdate:modelValue":p[3]||(p[3]=a=>c.value.repayment_period=a),type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12"},null,512),[[j,c.value.repayment_period,void 0,{number:!0}]])])]),c.value.loan_amount&&c.value.repayment_period?(o(),n("div",Xn,[e("div",Zn,[e("div",null,[p[20]||(p[20]=e("span",{class:"text-sm font-medium text-blue-900"},"EMI Amount:",-1)),e("p",el,"₹"+l(T.value.toFixed(2)),1)]),e("div",null,[p[21]||(p[21]=e("span",{class:"text-sm font-medium text-blue-900"},"Total Interest:",-1)),e("p",tl,"₹"+l(M.value.toFixed(2)),1)]),e("div",null,[p[22]||(p[22]=e("span",{class:"text-sm font-medium text-blue-900"},"Total Payment:",-1)),e("p",sl,"₹"+l(D.value.toFixed(2)),1)])]),e("p",ol," Calculated at "+l(y.value)+"% interest rate per annum ",1)])):f("",!0),e("div",null,[p[23]||(p[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Loan Purpose *",-1)),C(e("textarea",{"onUpdate:modelValue":p[4]||(p[4]=a=>c.value.purpose=a),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe the purpose of this loan..."},null,512),[[j,c.value.purpose]])]),e("div",nl,[e("div",null,[p[24]||(p[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Application Date",-1)),C(e("input",{"onUpdate:modelValue":p[5]||(p[5]=a=>c.value.application_date=a),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.application_date]])]),e("div",null,[p[25]||(p[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Requested Disbursement Date",-1)),C(e("input",{"onUpdate:modelValue":p[6]||(p[6]=a=>c.value.requested_disbursement_date=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.requested_disbursement_date]])])]),e("div",ll,[p[30]||(p[30]=e("h4",{class:"text-sm font-medium text-gray-900"},"Guarantor Information",-1)),e("div",al,[e("div",null,[p[26]||(p[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guarantor Name *",-1)),C(e("input",{"onUpdate:modelValue":p[7]||(p[7]=a=>c.value.guarantor_name=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Full name of guarantor"},null,512),[[j,c.value.guarantor_name]])]),e("div",null,[p[27]||(p[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guarantor Relation *",-1)),C(e("input",{"onUpdate:modelValue":p[8]||(p[8]=a=>c.value.guarantor_relation=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Father, Spouse, Friend"},null,512),[[j,c.value.guarantor_relation]])])]),e("div",rl,[e("div",null,[p[28]||(p[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guarantor Contact *",-1)),C(e("input",{"onUpdate:modelValue":p[9]||(p[9]=a=>c.value.guarantor_contact=a),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mobile number or email"},null,512),[[j,c.value.guarantor_contact]])]),e("div",null,[p[29]||(p[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Guarantor Address",-1)),C(e("textarea",{"onUpdate:modelValue":p[10]||(p[10]=a=>c.value.guarantor_address=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Guarantor's address"},null,512),[[j,c.value.guarantor_address]])])])]),e("div",null,[p[31]||(p[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents",-1)),te(ue,{ref_key:"fileUpload",ref:d,doctype:"Loan Application","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:u},null,512),p[32]||(p[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload ID proof, address proof, income proof, etc.",-1))]),e("div",null,[p[33]||(p[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Additional Information",-1)),C(e("textarea",{"onUpdate:modelValue":p[11]||(p[11]=a=>c.value.additional_info=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional information about the loan application..."},null,512),[[j,c.value.additional_info]])]),e("div",null,[e("div",il,[p[35]||(p[35]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Terms and Conditions",-1)),p[36]||(p[36]=e("div",{class:"space-y-2 text-sm text-gray-600"},[e("p",null,"1. I declare that all information provided in this loan application is true and correct."),e("p",null,"2. I understand that the loan approval is subject to company policy and management discretion."),e("p",null,"3. I agree to repay the loan amount as per the approved terms and conditions."),e("p",null,"4. I authorize the company to verify all information provided and conduct necessary background checks."),e("p",null,"5. I understand that the company may reject this application without providing any reason.")],-1)),e("div",dl,[e("label",ul,[C(e("input",{"onUpdate:modelValue":p[12]||(p[12]=a=>c.value.accept_terms=a),type:"checkbox",required:"",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Gt,c.value.accept_terms]]),p[34]||(p[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"I accept the terms and conditions",-1))])])])]),e("div",pl,[e("button",{type:"submit",disabled:v.value||!c.value.accept_terms,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[v.value?(o(),n("span",ml,[...p[37]||(p[37]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",vl,"Submit Loan Application"))],8,cl),e("button",{type:"button",onClick:p[13]||(p[13]=a=>r.$emit("close")),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])]))}},yl={class:"bg-white rounded-xl shadow-sm border border-gray-200"},xl={class:"p-6 border-b border-gray-200"},bl={class:"flex justify-between items-center"},fl={class:"flex items-center space-x-2"},_l=["value"],Cl={class:"p-6"},wl={key:0,class:"flex justify-center items-center py-8"},kl={key:1,class:"space-y-4"},hl={class:"flex justify-between items-start"},$l={class:"flex-1"},Sl={class:"flex items-center space-x-3 mb-2"},Dl={class:"font-medium text-gray-900"},jl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},Al={class:"font-medium text-gray-900"},Tl={class:"font-medium text-gray-900"},Ml={class:"font-medium text-gray-900"},El={class:"font-medium text-gray-900"},Fl={key:0,class:"mt-3"},Vl={class:"text-gray-900 text-sm mt-1"},Ul={class:"ml-4 flex-shrink-0"},ql=["onClick"],Il={key:2,class:"text-center py-8 text-gray-500"},Pl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ll={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Rl={class:"flex justify-between items-center mb-6"},Bl={class:"space-y-6"},zl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Nl={class:"space-y-2 text-sm"},Hl={class:"flex justify-between"},Ol={class:"font-medium text-gray-900"},Gl={class:"flex justify-between"},Wl={class:"font-medium text-gray-900"},Yl={class:"flex justify-between"},Kl={class:"font-medium text-gray-900"},Ql={class:"space-y-2 text-sm"},Jl={class:"flex justify-between"},Xl={class:"font-medium text-gray-900"},Zl={class:"flex justify-between"},ea={class:"font-medium text-gray-900"},ta={class:"flex justify-between"},sa={key:0},oa={class:"space-y-3"},na={class:"flex justify-between items-center mb-2"},la={class:"font-medium text-gray-900"},aa={class:"flex items-center space-x-2"},ra={class:"text-sm text-gray-600"},ia={class:"w-20 bg-gray-200 rounded-full h-2"},da={class:"text-sm text-gray-600"},ua={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},pa={class:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center"},ca={class:"text-2xl font-bold text-gray-900"},ma={class:"text-2xl font-bold text-gray-900"},va={class:"text-2xl font-bold text-gray-900"},ga={key:1},ya={class:"space-y-3"},xa={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},ba={class:"text-sm text-blue-800"},fa={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-3"},_a={class:"text-sm text-green-800"},Ca={class:"mt-6 pt-4 border-t border-gray-200"},wa={__name:"AppraisalView",props:{employeeId:{type:String,required:!0}},setup(U){const F=U,h=_(!1),v=_([]),S=_([]),d=_(""),y=_(null),c=i=>({Draft:"bg-gray-100 text-gray-800",Submitted:"bg-blue-100 text-blue-800","In Review":"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",T=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",M=()=>A(this,null,function*(){h.value=!0;try{const i={employee:F.employeeId};d.value&&(i.appraisal_cycle=d.value);const s=yield E("frappe.client.get_list",{doctype:"Appraisal",fields:["name","employee_name","appraisal_cycle","start_date","end_date","status","total_score","percentage","rating","remarks","feedback","employee_feedback","department","designation"],filters:i,order_by:"creation desc"}),r=yield Promise.all(s.map(p=>A(this,null,function*(){const a=yield E("frappe.client.get_list",{doctype:"Appraisal KRA",fields:["kra","description","score","max_score"],filters:{parent:p.name}});return X(Q({},p),{kra_scores:a})})));v.value=r}catch(i){console.error("Error loading appraisals:",i),v.value=[]}finally{h.value=!1}}),D=()=>A(this,null,function*(){try{const i=yield E("frappe.client.get_list",{doctype:"Appraisal Cycle",fields:["name","cycle_name","start_date","end_date"],filters:{status:"Active"},order_by:"creation desc"});S.value=i}catch(i){console.error("Error loading appraisal cycles:",i),S.value=[]}}),u=i=>{y.value=i};return se(()=>A(this,null,function*(){yield Promise.all([D(),M()])})),(i,s)=>(o(),n("div",yl,[e("div",xl,[e("div",bl,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Performance Appraisals",-1)),e("div",fl,[C(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>d.value=r),onChange:M,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},[s[3]||(s[3]=e("option",{value:""},"All Cycles",-1)),(o(!0),n(I,null,P(S.value,r=>(o(),n("option",{key:r.name,value:r.name},l(r.cycle_name),9,_l))),128))],544),[[H,d.value]])])])]),e("div",Cl,[h.value?(o(),n("div",wl,[...s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):v.value.length>0?(o(),n("div",kl,[(o(!0),n(I,null,P(v.value,r=>(o(),n("div",{key:r.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",hl,[e("div",$l,[e("div",Sl,[e("h4",Dl,l(r.employee_name),1),e("span",{class:V([c(r.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(r.status),3)]),e("div",jl,[e("div",null,[s[6]||(s[6]=e("span",{class:"text-gray-600"},"Appraisal Cycle:",-1)),e("p",Al,l(r.appraisal_cycle),1)]),e("div",null,[s[7]||(s[7]=e("span",{class:"text-gray-600"},"Period:",-1)),e("p",Tl,l(T(r.start_date))+" - "+l(T(r.end_date)),1)]),e("div",null,[s[8]||(s[8]=e("span",{class:"text-gray-600"},"Total Score:",-1)),e("p",Ml,l(r.total_score||"N/A"),1)]),e("div",null,[s[9]||(s[9]=e("span",{class:"text-gray-600"},"Rating:",-1)),e("p",El,l(r.rating||"Pending"),1)])]),r.remarks?(o(),n("div",Fl,[s[10]||(s[10]=e("span",{class:"text-gray-600 text-sm"},"Remarks:",-1)),e("p",Vl,l(r.remarks),1)])):f("",!0)]),e("div",Ul,[e("button",{onClick:p=>u(r),class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," View Details ",8,ql)])])]))),128))])):(o(),n("div",Il,[...s[11]||(s[11]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Appraisals Found",-1),e("p",{class:"text-sm text-gray-500"},"Performance appraisals will appear here when available",-1)])]))]),y.value?(o(),n("div",Pl,[e("div",Ll,[e("div",Rl,[s[13]||(s[13]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Appraisal Details",-1)),e("button",{onClick:s[1]||(s[1]=r=>y.value=null),class:"text-gray-400 hover:text-gray-600"},[...s[12]||(s[12]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Bl,[e("div",zl,[e("div",null,[s[17]||(s[17]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Employee Information",-1)),e("div",Nl,[e("div",Hl,[s[14]||(s[14]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",Ol,l(y.value.employee_name),1)]),e("div",Gl,[s[15]||(s[15]=e("span",{class:"text-gray-600"},"Department:",-1)),e("span",Wl,l(y.value.department||"N/A"),1)]),e("div",Yl,[s[16]||(s[16]=e("span",{class:"text-gray-600"},"Designation:",-1)),e("span",Kl,l(y.value.designation||"N/A"),1)])])]),e("div",null,[s[21]||(s[21]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Appraisal Information",-1)),e("div",Ql,[e("div",Jl,[s[18]||(s[18]=e("span",{class:"text-gray-600"},"Cycle:",-1)),e("span",Xl,l(y.value.appraisal_cycle),1)]),e("div",Zl,[s[19]||(s[19]=e("span",{class:"text-gray-600"},"Period:",-1)),e("span",ea,l(T(y.value.start_date))+" - "+l(T(y.value.end_date)),1)]),e("div",ta,[s[20]||(s[20]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:V([c(y.value.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(y.value.status),3)])])])]),y.value.kra_scores&&y.value.kra_scores.length>0?(o(),n("div",sa,[s[22]||(s[22]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Performance Scores",-1)),e("div",oa,[(o(!0),n(I,null,P(y.value.kra_scores,r=>(o(),n("div",{key:r.kra,class:"border border-gray-200 rounded-lg p-3"},[e("div",na,[e("span",la,l(r.kra),1),e("div",aa,[e("span",ra,l(r.score)+"/"+l(r.max_score),1),e("div",ia,[e("div",{style:vt({width:`${r.score/r.max_score*100}%`}),class:"bg-blue-600 h-2 rounded-full"},null,4)])])]),e("p",da,l(r.description||"No description available"),1)]))),128))])])):f("",!0),e("div",ua,[e("div",pa,[e("div",null,[s[23]||(s[23]=e("span",{class:"text-sm text-gray-600"},"Total Score",-1)),e("p",ca,l(y.value.total_score||"N/A"),1)]),e("div",null,[s[24]||(s[24]=e("span",{class:"text-sm text-gray-600"},"Percentage",-1)),e("p",ma,l(y.value.percentage||"N/A")+"%",1)]),e("div",null,[s[25]||(s[25]=e("span",{class:"text-sm text-gray-600"},"Rating",-1)),e("p",va,l(y.value.rating||"Pending"),1)])])]),y.value.feedback||y.value.employee_feedback?(o(),n("div",ga,[s[28]||(s[28]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Feedback",-1)),e("div",ya,[y.value.feedback?(o(),n("div",xa,[s[26]||(s[26]=e("h5",{class:"font-medium text-blue-900 mb-1"},"Manager Feedback",-1)),e("p",ba,l(y.value.feedback),1)])):f("",!0),y.value.employee_feedback?(o(),n("div",fa,[s[27]||(s[27]=e("h5",{class:"font-medium text-green-900 mb-1"},"Employee Feedback",-1)),e("p",_a,l(y.value.employee_feedback),1)])):f("",!0)])])):f("",!0)]),e("div",Ca,[e("button",{onClick:s[2]||(s[2]=r=>y.value=null),class:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Close ")])])])):f("",!0)]))}},ka={class:"bg-white rounded-xl shadow-sm border border-gray-200"},ha={class:"p-6 border-b border-gray-200"},$a={class:"flex justify-between items-center"},Sa={class:"flex items-center space-x-2"},Da={class:"p-6"},ja={key:0,class:"flex justify-center items-center py-8"},Aa={key:1,class:"space-y-4"},Ta={class:"flex justify-between items-start"},Ma={class:"flex-1"},Ea={class:"flex items-center space-x-3 mb-2"},Fa={class:"font-medium text-gray-900"},Va={key:0,class:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full"},Ua={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},qa={class:"font-medium text-gray-900"},Ia={class:"font-medium text-gray-900"},Pa={class:"font-medium text-gray-900"},La={class:"font-medium text-gray-900"},Ra={key:0,class:"mt-3"},Ba={class:"text-gray-900 text-sm mt-1"},za={key:1,class:"mt-3"},Na={class:"flex flex-wrap gap-1 mt-1"},Ha={class:"ml-4 flex-shrink-0"},Oa=["onClick"],Ga={key:2,class:"text-center py-8 text-gray-500"},Wa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ya={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Ka={class:"flex justify-between items-center mb-6"},Qa={class:"space-y-6"},Ja={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xa={class:"space-y-2 text-sm"},Za={class:"flex justify-between"},er={class:"font-medium text-gray-900"},tr={class:"flex justify-between"},sr={class:"font-medium text-gray-900"},or={class:"flex justify-between"},nr={class:"flex justify-between"},lr={class:"font-medium text-gray-900"},ar={class:"space-y-2 text-sm"},rr={class:"flex justify-between"},ir={class:"font-medium text-gray-900"},dr={class:"flex justify-between"},ur={class:"font-medium text-gray-900"},pr={class:"flex justify-between"},cr={class:"font-medium text-gray-900"},mr={class:"flex justify-between"},vr={class:"font-medium text-gray-900"},gr={class:"space-y-3"},yr={key:0,class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},xr={class:"text-sm text-gray-700"},br={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},fr={class:"flex flex-wrap gap-1"},_r={key:2,class:"bg-green-50 border border-green-200 rounded-lg p-3"},Cr={class:"text-sm text-green-700"},wr={key:0},kr={class:"bg-purple-50 border border-purple-200 rounded-lg p-3"},hr={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},$r={class:"font-medium text-gray-900"},Sr={key:0},Dr={class:"font-medium text-gray-900"},jr={key:1},Ar={class:"font-medium text-gray-900"},Tr={key:2},Mr={class:"font-medium text-gray-900"},Er={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fr={class:"text-center bg-gray-50 border border-gray-200 rounded-lg p-3"},Vr={class:"text-2xl font-bold text-gray-900"},Ur={class:"text-center bg-blue-50 border border-blue-200 rounded-lg p-3"},qr={class:"text-2xl font-bold text-blue-600"},Ir={class:"text-center bg-green-50 border border-green-200 rounded-lg p-3"},Pr={class:"text-2xl font-bold text-green-600"},Lr={key:1},Rr={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},Br={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},zr={class:"font-medium text-gray-900"},Nr={class:"font-medium text-gray-900"},Hr={class:"font-medium text-gray-900"},Or={class:"font-medium text-gray-900"},Gr={key:0,class:"mt-3"},Wr={class:"text-sm text-gray-700 mt-1"},Yr={class:"mt-6 pt-4 border-t border-gray-200"},Kr={__name:"TrainingPortal",props:{employeeId:{type:String,required:!0}},setup(U){const F=U,h=_(!1),v=_([]),S=_(""),d=_(null),y=i=>({Planned:"bg-blue-100 text-blue-800",Ongoing:"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",c=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",T=(i,s)=>{if(!i||!s)return"N/A";const r=new Date(i),p=new Date(s),a=Math.abs(p-r);return`${Math.ceil(a/(1e3*60*60*24))} days`},M=i=>{if(!i.capacity)return"N/A";const s=i.enrolled_count||0;return Math.max(0,i.capacity-s)},D=()=>A(this,null,function*(){h.value=!0;try{const i={employee:F.employeeId};S.value&&(i.status=S.value);const s=yield E("frappe.client.get_list",{doctype:"Training Event",fields:["name","event_name","event_type","start_date","end_date","status","location","trainer","trainer_email","trainer_qualification","trainer_experience","capacity","enrolled_count","description","skills","objectives","is_mandatory"],filters:i,order_by:"start_date desc"}),r=yield Promise.all(s.map(p=>A(this,null,function*(){let a=null;if(p.status==="Completed"){const g=yield E("frappe.client.get_list",{doctype:"Training Result",fields:["status","score","grade","certificate_issued","feedback"],filters:{training_event:p.name,employee:F.employeeId}});a=g.length>0?g[0]:null}return X(Q({},p),{training_result:a})})));v.value=r}catch(i){console.error("Error loading training programs:",i),v.value=[]}finally{h.value=!1}}),u=i=>{d.value=i};return se(()=>A(this,null,function*(){yield D()})),(i,s)=>(o(),n("div",ka,[e("div",ha,[e("div",$a,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Training Programs",-1)),e("div",Sa,[C(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>S.value=r),onChange:D,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},[...s[3]||(s[3]=[G('<option value="">All Status</option><option value="Planned">Planned</option><option value="Ongoing">Ongoing</option><option value="Completed">Completed</option><option value="Cancelled">Cancelled</option>',5)])],544),[[H,S.value]])])])]),e("div",Da,[h.value?(o(),n("div",ja,[...s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):v.value.length>0?(o(),n("div",Aa,[(o(!0),n(I,null,P(v.value,r=>(o(),n("div",{key:r.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",Ta,[e("div",Ma,[e("div",Ea,[e("h4",Fa,l(r.event_name),1),e("span",{class:V([y(r.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(r.status),3),r.is_mandatory?(o(),n("span",Va," Mandatory ")):f("",!0)]),e("div",Ua,[e("div",null,[s[6]||(s[6]=e("span",{class:"text-gray-600"},"Start Date:",-1)),e("p",qa,l(c(r.start_date)),1)]),e("div",null,[s[7]||(s[7]=e("span",{class:"text-gray-600"},"End Date:",-1)),e("p",Ia,l(c(r.end_date)),1)]),e("div",null,[s[8]||(s[8]=e("span",{class:"text-gray-600"},"Location:",-1)),e("p",Pa,l(r.location||"Online"),1)]),e("div",null,[s[9]||(s[9]=e("span",{class:"text-gray-600"},"Trainer:",-1)),e("p",La,l(r.trainer||"N/A"),1)])]),r.description?(o(),n("div",Ra,[s[10]||(s[10]=e("span",{class:"text-gray-600 text-sm"},"Description:",-1)),e("p",Ba,l(r.description),1)])):f("",!0),r.skills?(o(),n("div",za,[s[11]||(s[11]=e("span",{class:"text-gray-600 text-sm"},"Skills:",-1)),e("div",Na,[(o(!0),n(I,null,P(r.skills.split(","),p=>(o(),n("span",{key:p,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"},l(p.trim()),1))),128))])])):f("",!0)]),e("div",Ha,[e("button",{onClick:p=>u(r),class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," View Details ",8,Oa)])])]))),128))])):(o(),n("div",Ga,[...s[12]||(s[12]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332-.523 4.5-1.747M4 7l8 4 8-4"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Training Programs Found",-1),e("p",{class:"text-sm text-gray-500"},"Training programs will appear here when available",-1)])]))]),d.value?(o(),n("div",Wa,[e("div",Ya,[e("div",Ka,[s[14]||(s[14]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Training Program Details",-1)),e("button",{onClick:s[1]||(s[1]=r=>d.value=null),class:"text-gray-400 hover:text-gray-600"},[...s[13]||(s[13]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Qa,[e("div",Ja,[e("div",null,[s[19]||(s[19]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Program Information",-1)),e("div",Xa,[e("div",Za,[s[15]||(s[15]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",er,l(d.value.event_name),1)]),e("div",tr,[s[16]||(s[16]=e("span",{class:"text-gray-600"},"Type:",-1)),e("span",sr,l(d.value.event_type||"N/A"),1)]),e("div",or,[s[17]||(s[17]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:V([y(d.value.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(d.value.status),3)]),e("div",nr,[s[18]||(s[18]=e("span",{class:"text-gray-600"},"Mandatory:",-1)),e("span",lr,l(d.value.is_mandatory?"Yes":"No"),1)])])]),e("div",null,[s[24]||(s[24]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Schedule Information",-1)),e("div",ar,[e("div",rr,[s[20]||(s[20]=e("span",{class:"text-gray-600"},"Start Date:",-1)),e("span",ir,l(c(d.value.start_date)),1)]),e("div",dr,[s[21]||(s[21]=e("span",{class:"text-gray-600"},"End Date:",-1)),e("span",ur,l(c(d.value.end_date)),1)]),e("div",pr,[s[22]||(s[22]=e("span",{class:"text-gray-600"},"Duration:",-1)),e("span",cr,l(T(d.value.start_date,d.value.end_date)),1)]),e("div",mr,[s[23]||(s[23]=e("span",{class:"text-gray-600"},"Location:",-1)),e("span",vr,l(d.value.location||"Online"),1)])])])]),e("div",null,[s[28]||(s[28]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Training Details",-1)),e("div",gr,[d.value.description?(o(),n("div",yr,[s[25]||(s[25]=e("h5",{class:"font-medium text-gray-900 mb-1"},"Description",-1)),e("p",xr,l(d.value.description),1)])):f("",!0),d.value.skills?(o(),n("div",br,[s[26]||(s[26]=e("h5",{class:"font-medium text-blue-900 mb-1"},"Skills Covered",-1)),e("div",fr,[(o(!0),n(I,null,P(d.value.skills.split(","),r=>(o(),n("span",{key:r,class:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"},l(r.trim()),1))),128))])])):f("",!0),d.value.objectives?(o(),n("div",_r,[s[27]||(s[27]=e("h5",{class:"font-medium text-green-900 mb-1"},"Objectives",-1)),e("p",Cr,l(d.value.objectives),1)])):f("",!0)])]),d.value.trainer?(o(),n("div",wr,[s[33]||(s[33]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Trainer Information",-1)),e("div",kr,[e("div",hr,[e("div",null,[s[29]||(s[29]=e("span",{class:"text-gray-600"},"Trainer:",-1)),e("p",$r,l(d.value.trainer),1)]),d.value.trainer_email?(o(),n("div",Sr,[s[30]||(s[30]=e("span",{class:"text-gray-600"},"Email:",-1)),e("p",Dr,l(d.value.trainer_email),1)])):f("",!0),d.value.trainer_qualification?(o(),n("div",jr,[s[31]||(s[31]=e("span",{class:"text-gray-600"},"Qualification:",-1)),e("p",Ar,l(d.value.trainer_qualification),1)])):f("",!0),d.value.trainer_experience?(o(),n("div",Tr,[s[32]||(s[32]=e("span",{class:"text-gray-600"},"Experience:",-1)),e("p",Mr,l(d.value.trainer_experience),1)])):f("",!0)])])])):f("",!0),e("div",null,[s[37]||(s[37]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Enrollment Information",-1)),e("div",Er,[e("div",Fr,[s[34]||(s[34]=e("span",{class:"text-sm text-gray-600"},"Total Seats",-1)),e("p",Vr,l(d.value.capacity||"N/A"),1)]),e("div",Ur,[s[35]||(s[35]=e("span",{class:"text-sm text-gray-600"},"Enrolled",-1)),e("p",qr,l(d.value.enrolled_count||"0"),1)]),e("div",Ir,[s[36]||(s[36]=e("span",{class:"text-sm text-gray-600"},"Available",-1)),e("p",Pr,l(M(d.value)),1)])])]),d.value.status==="Completed"&&d.value.training_result?(o(),n("div",Lr,[s[43]||(s[43]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Training Result",-1)),e("div",Rr,[e("div",Br,[e("div",null,[s[38]||(s[38]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",zr,l(d.value.training_result.status),1)]),e("div",null,[s[39]||(s[39]=e("span",{class:"text-gray-600"},"Score:",-1)),e("p",Nr,l(d.value.training_result.score||"N/A"),1)]),e("div",null,[s[40]||(s[40]=e("span",{class:"text-gray-600"},"Grade:",-1)),e("p",Hr,l(d.value.training_result.grade||"N/A"),1)]),e("div",null,[s[41]||(s[41]=e("span",{class:"text-gray-600"},"Certificate:",-1)),e("p",Or,l(d.value.training_result.certificate_issued?"Issued":"Not Issued"),1)])]),d.value.training_result.feedback?(o(),n("div",Gr,[s[42]||(s[42]=e("span",{class:"text-gray-600 text-sm"},"Feedback:",-1)),e("p",Wr,l(d.value.training_result.feedback),1)])):f("",!0)])])):f("",!0)]),e("div",Yr,[e("button",{onClick:s[2]||(s[2]=r=>d.value=null),class:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Close ")])])])):f("",!0)]))}},Qr={class:"bg-white rounded-xl shadow-sm border border-gray-200"},Jr={class:"p-6 border-b border-gray-200"},Xr={class:"flex justify-between items-center"},Zr={class:"p-6"},ei={key:0,class:"flex justify-center items-center py-8"},ti={key:1,class:"space-y-4"},si={class:"flex justify-between items-start"},oi={class:"flex-1"},ni={class:"flex items-center space-x-3 mb-2"},li={class:"font-medium text-gray-900"},ai={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},ri={class:"font-medium text-gray-900"},ii={class:"font-medium text-gray-900"},di={class:"font-medium text-gray-900"},ui={class:"font-medium text-gray-900"},pi={class:"mt-3"},ci={class:"text-gray-900 text-sm mt-1 line-clamp-2"},mi={key:0,class:"mt-3"},vi={class:"text-gray-900 text-sm mt-1"},gi={class:"ml-4 flex-shrink-0"},yi=["onClick"],xi={key:2,class:"text-center py-8 text-gray-500"},bi={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fi={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},_i={class:"flex justify-between items-center mb-6"},Ci={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wi={class:"flex space-x-4 pt-4 border-t border-gray-200"},ki=["disabled"],hi={key:0,class:"flex items-center justify-center"},$i={key:1},Si={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Di={class:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto"},ji={class:"flex justify-between items-center mb-6"},Ai={class:"space-y-6"},Ti={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mi={class:"space-y-2 text-sm"},Ei={class:"flex justify-between"},Fi={class:"font-medium text-gray-900"},Vi={class:"flex justify-between"},Ui={class:"font-medium text-gray-900"},qi={class:"flex justify-between"},Ii={class:"flex justify-between"},Pi={class:"space-y-2 text-sm"},Li={class:"flex justify-between"},Ri={class:"font-medium text-gray-900"},Bi={class:"flex justify-between"},zi={class:"font-medium text-gray-900"},Ni={class:"flex justify-between"},Hi={class:"font-medium text-gray-900"},Oi={class:"flex justify-between"},Gi={class:"font-medium text-gray-900"},Wi={class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},Yi={class:"text-sm text-gray-700"},Ki={key:0},Qi={class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},Ji={class:"text-sm text-blue-700"},Xi={key:1},Zi={class:"bg-green-50 border border-green-200 rounded-lg p-3"},ed={class:"text-sm text-green-700"},td={key:2},sd={class:"space-y-3"},od={class:"flex justify-between items-start mb-2"},nd={class:"font-medium text-gray-900"},ld={class:"text-xs text-gray-500"},ad={class:"text-sm text-gray-700"},rd={class:"mt-6 pt-4 border-t border-gray-200"},id={__name:"GrievanceSystem",props:{employeeId:{type:String,required:!0}},setup(U){const F=U,h=_(!1),v=_([]),S=_(!1),d=_(null),y=_(null),c=_({subject:"",category:"",priority:"",description:"",expected_resolution_date:"",suggested_resolution:"",supporting_documents:[]}),T=p=>({Open:"bg-yellow-100 text-yellow-800","In Progress":"bg-blue-100 text-blue-800",Resolved:"bg-green-100 text-green-800",Closed:"bg-gray-100 text-gray-800",Rejected:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",M=p=>({Low:"bg-gray-100 text-gray-800",Medium:"bg-blue-100 text-blue-800",High:"bg-orange-100 text-orange-800",Critical:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",D=p=>p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",u=p=>{c.value.supporting_documents=p},i=()=>A(this,null,function*(){h.value=!0;try{const p=yield E("frappe.client.get_list",{doctype:"Employee Grievance",fields:["name","subject","category","priority","status","description","creation","modified","expected_resolution_date","assigned_to","suggested_resolution","resolution_details"],filters:{employee:F.employeeId},order_by:"creation desc"}),a=yield Promise.all(p.map(g=>A(this,null,function*(){const k=yield E("frappe.client.get_list",{doctype:"Comment",fields:["name","comment","commented_by","creation"],filters:{reference_doctype:"Employee Grievance",reference_name:g.name},order_by:"creation asc"});return X(Q({},g),{comments:k})})));v.value=a}catch(p){console.error("Error loading grievances:",p),v.value=[]}finally{h.value=!1}}),s=()=>A(this,null,function*(){h.value=!0;try{let p=[];c.value.supporting_documents.length>0&&(p=yield y.value.uploadFiles());const a=X(Q({doctype:"Employee Grievance"},c),{employee:F.employeeId,supporting_documents:p.map(k=>k.url)});(yield E("frappe.client.insert",{doc:a})).name&&(S.value=!1,c.value={subject:"",category:"",priority:"",description:"",expected_resolution_date:"",suggested_resolution:"",supporting_documents:[]},yield i(),alert("Grievance submitted successfully!"))}catch(p){console.error("Error submitting grievance:",p),alert("Failed to submit grievance. Please try again.")}finally{h.value=!1}}),r=p=>{d.value=p};return se(()=>A(this,null,function*(){yield i()})),(p,a)=>(o(),n("div",Qr,[e("div",Jr,[e("div",Xr,[a[11]||(a[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Employee Grievances",-1)),e("button",{onClick:a[0]||(a[0]=g=>S.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Grievance ")])]),e("div",Zr,[h.value?(o(),n("div",ei,[...a[12]||(a[12]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):v.value.length>0?(o(),n("div",ti,[(o(!0),n(I,null,P(v.value,g=>(o(),n("div",{key:g.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",si,[e("div",oi,[e("div",ni,[e("h4",li,l(g.subject),1),e("span",{class:V([T(g.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(g.status),3),e("span",{class:V([M(g.priority),"px-2 py-1 text-xs font-medium rounded-full"])},l(g.priority),3)]),e("div",ai,[e("div",null,[a[13]||(a[13]=e("span",{class:"text-gray-600"},"Category:",-1)),e("p",ri,l(g.category),1)]),e("div",null,[a[14]||(a[14]=e("span",{class:"text-gray-600"},"Date:",-1)),e("p",ii,l(D(g.creation)),1)]),e("div",null,[a[15]||(a[15]=e("span",{class:"text-gray-600"},"Expected Resolution:",-1)),e("p",di,l(D(g.expected_resolution_date)),1)]),e("div",null,[a[16]||(a[16]=e("span",{class:"text-gray-600"},"Assigned To:",-1)),e("p",ui,l(g.assigned_to||"Unassigned"),1)])]),e("div",pi,[a[17]||(a[17]=e("span",{class:"text-gray-600 text-sm"},"Description:",-1)),e("p",ci,l(g.description),1)]),g.resolution_details?(o(),n("div",mi,[a[18]||(a[18]=e("span",{class:"text-gray-600 text-sm"},"Resolution:",-1)),e("p",vi,l(g.resolution_details),1)])):f("",!0)]),e("div",gi,[e("button",{onClick:k=>r(g),class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," View Details ",8,yi)])])]))),128))])):(o(),n("div",xi,[...a[19]||(a[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.651 2.032-3 3.772-3s3.223 1.349 3.772 3c.549 1.651 2.032 3 3.772 3s3.223-1.349 3.772-3c.549-1.651 2.032-3 3.772-3s-3.223-1.349-3.772-3z"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Grievances Found",-1),e("p",{class:"text-sm text-gray-500"},"Submit a grievance to report any workplace issues",-1)])]))]),S.value?(o(),n("div",bi,[e("div",fi,[e("div",_i,[a[21]||(a[21]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Submit Grievance",-1)),e("button",{onClick:a[1]||(a[1]=g=>S.value=!1),class:"text-gray-400 hover:text-gray-600"},[...a[20]||(a[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(s,["prevent"]),class:"space-y-6"},[e("div",null,[a[22]||(a[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject *",-1)),C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=g=>c.value.subject=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Brief description of the issue"},null,512),[[j,c.value.subject]])]),e("div",Ci,[e("div",null,[a[24]||(a[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category *",-1)),C(e("select",{"onUpdate:modelValue":a[3]||(a[3]=g=>c.value.category=g),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...a[23]||(a[23]=[G('<option value="">Select Category</option><option value="Work Environment">Work Environment</option><option value="Harassment">Harassment</option><option value="Discrimination">Discrimination</option><option value="Salary &amp; Benefits">Salary &amp; Benefits</option><option value="Workload">Workload</option><option value="Policy &amp; Procedures">Policy &amp; Procedures</option><option value="Other">Other</option>',8)])],512),[[H,c.value.category]])]),e("div",null,[a[26]||(a[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Priority *",-1)),C(e("select",{"onUpdate:modelValue":a[4]||(a[4]=g=>c.value.priority=g),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...a[25]||(a[25]=[G('<option value="">Select Priority</option><option value="Low">Low</option><option value="Medium">Medium</option><option value="High">High</option><option value="Critical">Critical</option>',5)])],512),[[H,c.value.priority]])])]),e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),C(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=g=>c.value.description=g),rows:"4",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Detailed description of the grievance..."},null,512),[[j,c.value.description]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Expected Resolution Date *",-1)),C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=g=>c.value.expected_resolution_date=g),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,c.value.expected_resolution_date]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Suggested Resolution (Optional)",-1)),C(e("textarea",{"onUpdate:modelValue":a[7]||(a[7]=g=>c.value.suggested_resolution=g),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"How would you like this issue to be resolved?"},null,512),[[j,c.value.suggested_resolution]])]),e("div",null,[a[30]||(a[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Supporting Documents (Optional)",-1)),te(ue,{ref_key:"fileUpload",ref:y,doctype:"Employee Grievance","is-private":!0,accept:"image/*,.pdf,.doc,.docx",onFilesChanged:u},null,512),a[31]||(a[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Upload any relevant documents to support your grievance",-1))]),e("div",wi,[e("button",{type:"submit",disabled:h.value,class:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"},[h.value?(o(),n("span",hi,[...a[32]||(a[32]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),W(" Submitting... ",-1)])])):(o(),n("span",$i,"Submit Grievance"))],8,ki),e("button",{type:"button",onClick:a[8]||(a[8]=g=>S.value=!1),class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Cancel ")])],32)])])):f("",!0),d.value?(o(),n("div",Si,[e("div",Di,[e("div",ji,[a[34]||(a[34]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Grievance Details",-1)),e("button",{onClick:a[9]||(a[9]=g=>d.value=null),class:"text-gray-400 hover:text-gray-600"},[...a[33]||(a[33]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ai,[e("div",Ti,[e("div",null,[a[39]||(a[39]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Grievance Information",-1)),e("div",Mi,[e("div",Ei,[a[35]||(a[35]=e("span",{class:"text-gray-600"},"Subject:",-1)),e("span",Fi,l(d.value.subject),1)]),e("div",Vi,[a[36]||(a[36]=e("span",{class:"text-gray-600"},"Category:",-1)),e("span",Ui,l(d.value.category),1)]),e("div",qi,[a[37]||(a[37]=e("span",{class:"text-gray-600"},"Priority:",-1)),e("span",{class:V([M(d.value.priority),"px-2 py-1 text-xs font-medium rounded-full"])},l(d.value.priority),3)]),e("div",Ii,[a[38]||(a[38]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:V([T(d.value.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(d.value.status),3)])])]),e("div",null,[a[44]||(a[44]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Timeline Information",-1)),e("div",Pi,[e("div",Li,[a[40]||(a[40]=e("span",{class:"text-gray-600"},"Created:",-1)),e("span",Ri,l(D(d.value.creation)),1)]),e("div",Bi,[a[41]||(a[41]=e("span",{class:"text-gray-600"},"Expected Resolution:",-1)),e("span",zi,l(D(d.value.expected_resolution_date)),1)]),e("div",Ni,[a[42]||(a[42]=e("span",{class:"text-gray-600"},"Assigned To:",-1)),e("span",Hi,l(d.value.assigned_to||"Unassigned"),1)]),e("div",Oi,[a[43]||(a[43]=e("span",{class:"text-gray-600"},"Last Updated:",-1)),e("span",Gi,l(D(d.value.modified)),1)])])])]),e("div",null,[a[45]||(a[45]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Description",-1)),e("div",Wi,[e("p",Yi,l(d.value.description),1)])]),d.value.suggested_resolution?(o(),n("div",Ki,[a[46]||(a[46]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Suggested Resolution",-1)),e("div",Qi,[e("p",Ji,l(d.value.suggested_resolution),1)])])):f("",!0),d.value.resolution_details?(o(),n("div",Xi,[a[47]||(a[47]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Resolution Details",-1)),e("div",Zi,[e("p",ed,l(d.value.resolution_details),1)])])):f("",!0),d.value.comments&&d.value.comments.length>0?(o(),n("div",td,[a[48]||(a[48]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Comments & Updates",-1)),e("div",sd,[(o(!0),n(I,null,P(d.value.comments,g=>(o(),n("div",{key:g.name,class:"border border-gray-200 rounded-lg p-3"},[e("div",od,[e("span",nd,l(g.commented_by),1),e("span",ld,l(D(g.creation)),1)]),e("p",ad,l(g.comment),1)]))),128))])])):f("",!0)]),e("div",rd,[e("button",{onClick:a[10]||(a[10]=g=>d.value=null),class:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Close ")])])])):f("",!0)]))}},dd={class:"bg-white rounded-xl shadow-sm border border-gray-200"},ud={class:"p-6 border-b border-gray-200"},pd={class:"flex justify-between items-center"},cd={class:"flex items-center space-x-2"},md={class:"p-6"},vd={key:0,class:"flex justify-center items-center py-8"},gd={key:1,class:"space-y-4"},yd={class:"flex justify-between items-start"},xd={class:"flex-1"},bd={class:"flex items-center space-x-3 mb-2"},fd={class:"font-medium text-gray-900"},_d={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm"},Cd={class:"font-medium text-gray-900"},wd={class:"font-medium text-gray-900"},kd={class:"font-medium text-gray-900"},hd={class:"font-medium text-gray-900"},$d={key:0,class:"mt-3"},Sd={class:"text-gray-900 text-sm mt-1 line-clamp-2"},Dd={class:"ml-4 flex-shrink-0"},jd=["onClick"],Ad={key:2,class:"text-center py-8 text-gray-500"},Td={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Md={class:"bg-white rounded-xl p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},Ed={class:"flex justify-between items-center mb-6"},Fd={class:"space-y-6"},Vd={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ud={class:"space-y-2 text-sm"},qd={class:"flex justify-between"},Id={class:"font-medium text-gray-900"},Pd={class:"flex justify-between"},Ld={class:"font-medium text-gray-900"},Rd={class:"flex justify-between"},Bd={class:"font-medium text-gray-900"},zd={class:"flex justify-between"},Nd={class:"font-medium text-gray-900"},Hd={class:"space-y-2 text-sm"},Od={class:"flex justify-between"},Gd={class:"flex justify-between"},Wd={class:"flex justify-between"},Yd={class:"font-medium text-gray-900"},Kd={class:"flex justify-between"},Qd={class:"font-medium text-gray-900"},Jd={class:"space-y-3"},Xd={class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},Zd={class:"text-sm text-gray-700"},eu={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},tu={class:"text-sm text-blue-700"},su={key:0},ou={class:"space-y-2"},nu={class:"flex items-center justify-between"},lu={class:"flex items-center space-x-3"},au=["checked"],ru={class:"font-medium text-gray-900"},iu={key:0,class:"text-sm text-gray-600 mt-2"},du={key:1},uu={class:"bg-green-50 border border-green-200 rounded-lg p-3"},pu={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},cu={class:"font-medium text-gray-900"},mu={class:"font-medium text-gray-900"},vu={class:"font-medium text-gray-900"},gu={class:"font-medium text-gray-900"},yu={key:0,class:"mt-3"},xu={class:"text-sm text-gray-700 mt-1"},bu={key:2},fu={class:"bg-purple-50 border border-purple-200 rounded-lg p-3"},_u={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Cu={class:"font-medium text-gray-900"},wu={class:"font-medium text-gray-900"},ku={class:"font-medium text-gray-900"},hu={class:"font-medium text-gray-900"},$u={key:0,class:"mt-3"},Su={class:"text-sm text-gray-700 mt-1"},Du={key:3},ju={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},Au={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Tu={class:"font-medium text-gray-900"},Mu={class:"font-medium text-gray-900"},Eu={class:"font-medium text-gray-900"},Fu={class:"font-medium text-gray-900"},Vu={key:0,class:"mt-3"},Uu={class:"text-sm text-gray-700 mt-1"},qu={class:"mt-6 pt-4 border-t border-gray-200"},Iu={__name:"ExitProcess",props:{employeeId:{type:String,required:!0}},setup(U){const F=U,h=_(!1),v=_([]),S=_(""),d=_(null),y=i=>({Initiated:"bg-yellow-100 text-yellow-800","In Progress":"bg-blue-100 text-blue-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",c=i=>({Resignation:"bg-blue-100 text-blue-800",Termination:"bg-red-100 text-red-800",Retirement:"bg-green-100 text-green-800","End of Contract":"bg-purple-100 text-purple-800"})[i]||"bg-gray-100 text-gray-800",T=i=>i?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",M=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",D=()=>A(this,null,function*(){h.value=!0;try{const i={employee:F.employeeId};S.value&&(i.status=S.value);const s=yield E("frappe.client.get_list",{doctype:"Employee Separation",fields:["name","employee","employee_name","department","designation","exit_type","status","exit_date","last_working_day","reason","notes"],filters:i,order_by:"creation desc"}),r=yield Promise.all(s.map(p=>A(this,null,function*(){const a=yield E("frappe.client.get_list",{doctype:"Exit Checklist",fields:["name","checklist_item","is_completed","notes"],filters:{parent:p.name}});let g=null;const k=yield E("frappe.client.get_list",{doctype:"Employee Handover",fields:["name","handover_to","handover_date","assets_returned","clearance_status","notes"],filters:{employee_separation:p.name}});k.length>0&&(g=k[0]);let w=null;const b=yield E("frappe.client.get_list",{doctype:"Exit Interview",fields:["name","interview_date","interviewer","feedback","recommendations","notes"],filters:{employee_separation:p.name}});b.length>0&&(w=b[0]);let $=null;const L=yield E("frappe.client.get_list",{doctype:"Final Settlement",fields:["name","settlement_date","total_amount","status","payment_method","notes"],filters:{employee_separation:p.name}});return L.length>0&&($=L[0]),X(Q({},p),{checklist_items:a,handover_details:g,exit_interview:w,final_settlement:$})})));v.value=r}catch(i){console.error("Error loading exit processes:",i),v.value=[]}finally{h.value=!1}}),u=i=>{d.value=i};return se(()=>A(this,null,function*(){yield D()})),(i,s)=>(o(),n("div",dd,[e("div",ud,[e("div",pd,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Exit Process",-1)),e("div",cd,[C(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>S.value=r),onChange:D,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},[...s[3]||(s[3]=[G('<option value="">All Status</option><option value="Initiated">Initiated</option><option value="In Progress">In Progress</option><option value="Completed">Completed</option><option value="Cancelled">Cancelled</option>',5)])],544),[[H,S.value]])])])]),e("div",md,[h.value?(o(),n("div",vd,[...s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):v.value.length>0?(o(),n("div",gd,[(o(!0),n(I,null,P(v.value,r=>(o(),n("div",{key:r.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",yd,[e("div",xd,[e("div",bd,[e("h4",fd,l(r.employee_name),1),e("span",{class:V([y(r.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(r.status),3),e("span",{class:V([c(r.exit_type),"px-2 py-1 text-xs font-medium rounded-full"])},l(r.exit_type),3)]),e("div",_d,[e("div",null,[s[6]||(s[6]=e("span",{class:"text-gray-600"},"Exit Date:",-1)),e("p",Cd,l(M(r.exit_date)),1)]),e("div",null,[s[7]||(s[7]=e("span",{class:"text-gray-600"},"Last Working Day:",-1)),e("p",wd,l(M(r.last_working_day)),1)]),e("div",null,[s[8]||(s[8]=e("span",{class:"text-gray-600"},"Reason:",-1)),e("p",kd,l(r.reason),1)]),e("div",null,[s[9]||(s[9]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",hd,l(r.status),1)])]),r.notes?(o(),n("div",$d,[s[10]||(s[10]=e("span",{class:"text-gray-600 text-sm"},"Notes:",-1)),e("p",Sd,l(r.notes),1)])):f("",!0)]),e("div",Dd,[e("button",{onClick:p=>u(r),class:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," View Details ",8,jd)])])]))),128))])):(o(),n("div",Ad,[...s[11]||(s[11]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4 4m4-4v4m0-4h-4M6 4l-4 4m0 0l4-4m-4 4v4m0-4h4"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Exit Processes Found",-1),e("p",{class:"text-sm text-gray-500"},"Exit processes will appear here when initiated",-1)])]))]),d.value?(o(),n("div",Td,[e("div",Md,[e("div",Ed,[s[13]||(s[13]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Exit Process Details",-1)),e("button",{onClick:s[1]||(s[1]=r=>d.value=null),class:"text-gray-400 hover:text-gray-600"},[...s[12]||(s[12]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Fd,[e("div",Vd,[e("div",null,[s[18]||(s[18]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Employee Information",-1)),e("div",Ud,[e("div",qd,[s[14]||(s[14]=e("span",{class:"text-gray-600"},"Name:",-1)),e("span",Id,l(d.value.employee_name),1)]),e("div",Pd,[s[15]||(s[15]=e("span",{class:"text-gray-600"},"Employee ID:",-1)),e("span",Ld,l(d.value.employee),1)]),e("div",Rd,[s[16]||(s[16]=e("span",{class:"text-gray-600"},"Department:",-1)),e("span",Bd,l(d.value.department||"N/A"),1)]),e("div",zd,[s[17]||(s[17]=e("span",{class:"text-gray-600"},"Designation:",-1)),e("span",Nd,l(d.value.designation||"N/A"),1)])])]),e("div",null,[s[23]||(s[23]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Exit Information",-1)),e("div",Hd,[e("div",Od,[s[19]||(s[19]=e("span",{class:"text-gray-600"},"Exit Type:",-1)),e("span",{class:V([c(d.value.exit_type),"px-2 py-1 text-xs font-medium rounded-full"])},l(d.value.exit_type),3)]),e("div",Gd,[s[20]||(s[20]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:V([y(d.value.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(d.value.status),3)]),e("div",Wd,[s[21]||(s[21]=e("span",{class:"text-gray-600"},"Exit Date:",-1)),e("span",Yd,l(M(d.value.exit_date)),1)]),e("div",Kd,[s[22]||(s[22]=e("span",{class:"text-gray-600"},"Last Working Day:",-1)),e("span",Qd,l(M(d.value.last_working_day)),1)])])])]),e("div",null,[s[26]||(s[26]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Exit Details",-1)),e("div",Jd,[e("div",Xd,[s[24]||(s[24]=e("h5",{class:"font-medium text-gray-900 mb-1"},"Reason for Exit",-1)),e("p",Zd,l(d.value.reason),1)]),d.value.notes?(o(),n("div",eu,[s[25]||(s[25]=e("h5",{class:"font-medium text-blue-900 mb-1"},"Additional Notes",-1)),e("p",tu,l(d.value.notes),1)])):f("",!0)])]),d.value.checklist_items&&d.value.checklist_items.length>0?(o(),n("div",su,[s[27]||(s[27]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Exit Checklist",-1)),e("div",ou,[(o(!0),n(I,null,P(d.value.checklist_items,r=>(o(),n("div",{key:r.name,class:"border border-gray-200 rounded-lg p-3"},[e("div",nu,[e("div",lu,[e("input",{type:"checkbox",checked:r.is_completed,disabled:"",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,au),e("span",ru,l(r.checklist_item),1)]),e("span",{class:V([T(r.is_completed),"px-2 py-1 text-xs font-medium rounded-full"])},l(r.is_completed?"Completed":"Pending"),3)]),r.notes?(o(),n("p",iu,l(r.notes),1)):f("",!0)]))),128))])])):f("",!0),d.value.handover_details?(o(),n("div",du,[s[33]||(s[33]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Handover Details",-1)),e("div",uu,[e("div",pu,[e("div",null,[s[28]||(s[28]=e("span",{class:"text-gray-600"},"Handover To:",-1)),e("p",cu,l(d.value.handover_details.handover_to||"N/A"),1)]),e("div",null,[s[29]||(s[29]=e("span",{class:"text-gray-600"},"Handover Date:",-1)),e("p",mu,l(M(d.value.handover_details.handover_date)),1)]),e("div",null,[s[30]||(s[30]=e("span",{class:"text-gray-600"},"Assets Returned:",-1)),e("p",vu,l(d.value.handover_details.assets_returned||"Pending"),1)]),e("div",null,[s[31]||(s[31]=e("span",{class:"text-gray-600"},"Clearance Status:",-1)),e("p",gu,l(d.value.handover_details.clearance_status||"Pending"),1)])]),d.value.handover_details.notes?(o(),n("div",yu,[s[32]||(s[32]=e("span",{class:"text-gray-600 text-sm"},"Notes:",-1)),e("p",xu,l(d.value.handover_details.notes),1)])):f("",!0)])])):f("",!0),d.value.exit_interview?(o(),n("div",bu,[s[39]||(s[39]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Exit Interview",-1)),e("div",fu,[e("div",_u,[e("div",null,[s[34]||(s[34]=e("span",{class:"text-gray-600"},"Interview Date:",-1)),e("p",Cu,l(M(d.value.exit_interview.interview_date)),1)]),e("div",null,[s[35]||(s[35]=e("span",{class:"text-gray-600"},"Interviewer:",-1)),e("p",wu,l(d.value.exit_interview.interviewer||"N/A"),1)]),e("div",null,[s[36]||(s[36]=e("span",{class:"text-gray-600"},"Feedback:",-1)),e("p",ku,l(d.value.exit_interview.feedback||"N/A"),1)]),e("div",null,[s[37]||(s[37]=e("span",{class:"text-gray-600"},"Recommendations:",-1)),e("p",hu,l(d.value.exit_interview.recommendations||"N/A"),1)])]),d.value.exit_interview.notes?(o(),n("div",$u,[s[38]||(s[38]=e("span",{class:"text-gray-600 text-sm"},"Notes:",-1)),e("p",Su,l(d.value.exit_interview.notes),1)])):f("",!0)])])):f("",!0),d.value.final_settlement?(o(),n("div",Du,[s[45]||(s[45]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Final Settlement",-1)),e("div",ju,[e("div",Au,[e("div",null,[s[40]||(s[40]=e("span",{class:"text-gray-600"},"Settlement Date:",-1)),e("p",Tu,l(M(d.value.final_settlement.settlement_date)),1)]),e("div",null,[s[41]||(s[41]=e("span",{class:"text-gray-600"},"Total Amount:",-1)),e("p",Mu,"₹"+l(d.value.final_settlement.total_amount||"N/A"),1)]),e("div",null,[s[42]||(s[42]=e("span",{class:"text-gray-600"},"Status:",-1)),e("p",Eu,l(d.value.final_settlement.status||"Pending"),1)]),e("div",null,[s[43]||(s[43]=e("span",{class:"text-gray-600"},"Payment Method:",-1)),e("p",Fu,l(d.value.final_settlement.payment_method||"N/A"),1)])]),d.value.final_settlement.notes?(o(),n("div",Vu,[s[44]||(s[44]=e("span",{class:"text-gray-600 text-sm"},"Notes:",-1)),e("p",Uu,l(d.value.final_settlement.notes),1)])):f("",!0)])])):f("",!0)]),e("div",qu,[e("button",{onClick:s[2]||(s[2]=r=>d.value=null),class:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-medium"}," Close ")])])])):f("",!0)]))}},Pu={class:"min-h-screen bg-surface-gray-1"},Lu={id:"employee-dashboard",class:"pt-20 pb-12"},Ru={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Bu={class:"mb-8"},zu={key:0,class:"text-ink-gray-6 mt-2"},Nu={key:0,class:"flex justify-center items-center py-12"},Hu={key:1,class:"bg-surface-red-2 border border-outline-red-2 rounded-lg p-6 mb-8"},Ou={class:"flex items-center"},Gu={class:"text-red-800"},Wu={key:2,class:"bg-surface-white rounded-xl shadow-sm border border-outline-gray-2 p-6 mb-8"},Yu={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ku={class:"flex flex-col items-center lg:items-start"},Qu={class:"relative mb-4"},Ju=["src","alt"],Xu={key:1,class:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg"},Zu={class:"text-center lg:text-left"},e0={class:"text-2xl font-bold text-ink-gray-9 mb-1"},t0={class:"text-ink-blue-3 font-semibold"},s0={class:"text-ink-gray-5"},o0={class:"text-sm text-ink-gray-4 mt-1"},n0={class:"space-y-3"},l0={class:"flex justify-between"},a0={class:"font-medium text-ink-gray-9"},r0={class:"flex justify-between"},i0={class:"font-medium text-ink-gray-9"},d0={class:"flex justify-between"},u0={class:"font-medium text-ink-gray-9"},p0={class:"flex justify-between"},c0={class:"font-medium text-ink-gray-9"},m0={class:"flex justify-between"},v0={class:"font-medium text-ink-gray-9"},g0={class:"flex justify-between"},y0={class:"font-medium text-ink-gray-9 text-sm"},x0={class:"space-y-3"},b0={class:"flex justify-between"},f0={class:"font-medium text-ink-gray-9"},_0={class:"flex justify-between"},C0={class:"font-medium text-ink-gray-9"},w0={class:"flex justify-between"},k0={class:"font-medium text-ink-gray-9"},h0={class:"flex justify-between"},$0={class:"font-medium text-ink-gray-9"},S0={class:"flex justify-between"},D0={key:0,class:"flex justify-between"},j0={class:"font-medium text-ink-gray-9"},A0={key:0,class:"mt-8 pt-6 border-t border-outline-gray-2"},T0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},M0={key:0},E0={class:"font-medium text-ink-gray-9"},F0={key:1},V0={class:"font-medium text-ink-gray-9"},U0={key:2},q0={class:"font-medium text-ink-gray-9"},I0={key:1,class:"mt-8 pt-6 border-t border-outline-gray-2"},P0={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},L0={key:0},R0={class:"text-ink-gray-6 text-sm"},B0={key:1},z0={class:"text-ink-gray-6 text-sm"},N0={key:2,class:"mt-4"},H0={class:"flex justify-center mb-6"},O0={class:"flex flex-wrap gap-3 justify-center"},G0=["disabled"],W0=["disabled"],Y0={class:"bg-surface-white rounded-xl shadow-sm border border-outline-gray-2 mb-8"},K0={class:"flex"},Q0={class:"w-64 border-r border-outline-gray-2 bg-gray-50"},J0={class:"p-4"},X0={class:"mb-6"},Z0={class:"space-y-1"},ep={class:"mb-6"},tp={class:"space-y-1"},sp={class:"mb-6"},op={class:"space-y-1"},np={class:"flex-1"},lp={class:"p-6"},ap={key:0},rp={class:"bg-surface-blue-2 border border-outline-blue-1 rounded-lg p-4 mb-4"},ip={class:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"},dp={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},up={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},pp={key:0,class:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4"},cp={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},mp={class:"flex-1 min-w-0"},vp={class:"text-sm font-medium text-gray-900 truncate"},gp={class:"text-xs text-gray-500"},yp={key:0,class:"mt-3 text-center"},xp={class:"text-xs text-amber-600 hover:text-amber-700 font-medium"},bp={key:1,class:"text-center py-8 text-ink-gray-5"},fp={key:2,class:"space-y-3"},_p={class:"font-medium text-ink-gray-9"},Cp={class:"text-sm text-ink-gray-6"},wp={key:0,class:"text-xs text-ink-gray-5"},kp={key:1,class:"text-xs text-ink-gray-5"},hp={class:"text-xs text-ink-gray-4"},$p={class:"flex flex-col items-end space-y-1"},Sp={key:1},Dp={class:"bg-surface-green-2 border border-outline-green-1 rounded-lg p-4 mb-4"},jp={class:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"},Ap={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},Tp={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},Mp={key:0,class:"text-center py-8 text-gray-500"},Ep={key:1,class:"space-y-3"},Fp={class:"font-medium text-gray-900"},Vp={class:"text-sm text-gray-600"},Up={class:"text-xs text-gray-500"},qp={key:2,class:"space-y-4"},Ip={class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},Pp={class:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4 mb-3"},Lp={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},Rp={class:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2"},Bp={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},zp={class:"flex items-center space-x-4"},Np=["value"],Hp={key:1,class:"text-center py-12 bg-gray-50 rounded-lg"},Op={key:2,class:"space-y-3"},Gp={class:"flex-1"},Wp={class:"font-medium text-gray-900"},Yp={class:"text-sm text-gray-600"},Kp={class:"flex items-center space-x-4 mt-1"},Qp={class:"flex space-x-2"},Jp=["onClick"],Xp=["onClick"],Zp={key:3},ec={class:"flex justify-between items-center mb-6"},tc={key:4},sc={class:"flex justify-between items-center mb-6"},oc={key:5},nc={class:"flex justify-between items-center mb-6"},lc={key:6},ac={key:1,class:"text-center py-8 text-gray-500"},rc={key:7},ic={class:"flex justify-between items-center mb-6"},dc={key:8},uc={class:"flex justify-between items-center mb-6"},pc={key:9},cc={class:"flex justify-between items-center mb-6"},mc={key:10},vc={key:1,class:"text-center py-8 text-gray-500"},gc={key:11},yc={key:1,class:"text-center py-8 text-gray-500"},xc={key:12},bc={key:1,class:"text-center py-8 text-gray-500"},fc={key:13},_c={key:1,class:"text-center py-8 text-gray-500"},Cc={key:3,class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},wc={class:"p-6"},kc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},hc={class:"font-medium text-gray-900"},$c={class:"text-2xl font-bold text-blue-600"},Sc={class:"text-sm text-gray-600"},Dc={class:"text-xs text-gray-500"},jc={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ac={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},Tc={class:"flex justify-between items-center mb-4"},Mc=["value"],Ec={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},Fc={class:"flex justify-between items-center"},Vc={class:"text-lg font-bold text-blue-600"},Uc={class:"text-xs text-blue-700 mt-1"},qc={key:0,class:"text-xs text-blue-600 mt-1"},Ic={class:"grid grid-cols-2 gap-4"},Pc={key:1,class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},Lc={class:"flex justify-between items-center"},Rc={class:"text-lg font-bold text-gray-900"},Bc={key:0,class:"mt-2"},zc={class:"flex justify-between items-center"},Nc={key:0,class:"mt-2 text-xs text-red-600"},Hc={class:"flex space-x-3"},Oc={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Gc={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},Wc={class:"flex justify-between items-center mb-4"},Yc={key:0,class:"grid grid-cols-2 gap-4"},Kc={class:"flex space-x-3"},Qc={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Jc={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden"},Xc={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},Zc={key:0,class:"flex justify-center items-center py-8"},em=["innerHTML"],tm={key:2,class:"text-center py-8 text-gray-500"},sm={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},om={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},nm={class:"p-6"},lm={class:"flex items-center mb-4"},am={key:0,class:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3"},rm={key:1,class:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"},im={key:2,class:"flex-shrink-0 w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-3"},dm={class:"text-lg font-semibold text-gray-900"},um={class:"text-gray-600 mb-6"},pm={class:"flex justify-end"},cm={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},mm={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto"},vm={class:"flex justify-between items-center mb-6"},gm={key:0,class:"text-center py-8"},ym={key:1,class:"space-y-4"},xm={class:"flex items-start justify-between"},bm={class:"flex-1"},fm={class:"flex items-center space-x-2 mb-2"},_m={class:"font-semibold text-gray-900"},Cm={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},wm={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},km={class:"font-medium text-gray-900"},hm={class:"font-medium text-gray-900"},$m={key:0},Sm={class:"font-medium text-gray-900"},Dm={key:1},jm={class:"font-medium text-gray-900"},Am={__name:"EmployeeDashboard",setup(U){const F=_(!0),h=_(""),v=_(null),S=_(null),d=_([]),y=_([]),c=_([]),T=_(!1),M=_(!1),D=_(!1),u=_(!1),i=_("attendance"),s=_([]),r=_(!1),p=_(!1),a=_(""),g=_(""),k=_([]),w=_("Salary Slip Standard"),b=_(""),$=_(""),L=_(""),z=_(""),Y=_(""),re=_(""),ae=_([]),O=_(null),oe=_(0),ie=_([]),me=_([]),xe=_(!1),be=_(!1),fe=_(!1),_e=_(!1),Ce=_(!1),we=_(!1),ke=_(!1),he=_(!1),$e=_(""),le=_("success"),B=_({leaveType:"",fromDate:"",toDate:"",description:""}),N=_({status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""}),yt=x=>x.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),De=x=>x?new Date(x).toLocaleTimeString():"N/A",xt=x=>({Present:"bg-green-100 text-green-800",Absent:"bg-red-100 text-red-800","On Leave":"bg-yellow-100 text-yellow-800","Half Day":"bg-blue-100 text-blue-800","Work From Home":"bg-purple-100 text-purple-800"})[x]||"bg-gray-100 text-gray-800",bt=x=>({Open:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"})[x]||"bg-gray-100 text-gray-800",ft=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_employee_info");x.success&&(v.value=x.employee)}catch(x){console.error("Error loading employee info:",x),x.message&&x.message.includes("Employee record not found")?console.log("No employee record found for user, showing fallback data"):h.value=x.message||"Failed to load employee information"}}),_t=()=>A(this,null,function*(){try{const x=yield E("frappe.auth.get_logged_user");x&&(S.value={email:x,full_name:"Amit Kumar"})}catch(x){console.error("Error loading current user:",x)}}),pe=(x=null,t=null)=>A(this,null,function*(){try{const q={};x&&(q.from_date=x),t&&(q.to_date=t);const R=yield E("ascra_frontend.api.get_attendance_records",q);if(console.log("Attendance API response:",R),R.success===!1){console.error("API returned error:",R.message),d.value=[];return}console.log("Attendance records received:",R.attendance_records),console.log("Total attendance records:",R.attendance_records?R.attendance_records.length:0),d.value=R.attendance_records||[],console.log("Attendance records set in frontend:",d.value)}catch(q){console.error("Error loading attendance records:",q),d.value=[]}}),ve=(x=null,t=null)=>A(this,null,function*(){try{const q={};x&&(q.from_date=x),t&&(q.to_date=t);const R=yield E("ascra_frontend.api.get_leave_applications",q);if(R.success===!1){console.error("API returned error:",R.message),y.value=[];return}R.success&&(y.value=R.leave_applications)}catch(q){console.error("Error loading leave applications:",q),y.value=[]}}),Ct=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_leave_balance");x.success&&(c.value=x.leave_balance)}catch(x){console.error("Error loading leave balance:",x)}}),wt=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_leave_types");if(x.success===!1){console.error("API returned error:",x.message),ae.value=[];return}x.success&&(ae.value=x.leave_types,console.log("Leave types loaded:",ae.value))}catch(x){console.error("Error loading leave types:",x),ae.value=[]}}),Se=(x=null,t=null)=>A(this,null,function*(){try{const q={};x&&(q.from_date=x),t&&(q.to_date=t);const R=yield E("ascra_frontend.api.get_salary_slips",q);if(console.log("Salary slips API response:",R),R.success===!1){console.error("API returned error:",R.message),s.value=[];return}R.success?(s.value=R.salary_slips,console.log("Salary slips loaded:",s.value)):(console.log("API returned unsuccessful response:",R),s.value=[])}catch(q){console.error("Error loading salary slips:",q),s.value=[]}}),kt=()=>A(this,null,function*(){T.value=!0;try{const x={status:N.value.status,attendance_date:N.value.attendanceDate};N.value.inTime&&(x.in_time=`${N.value.attendanceDate} ${N.value.inTime}:00`),N.value.outTime&&(x.out_time=`${N.value.attendanceDate} ${N.value.outTime}:00`);const t=yield E("ascra_frontend.api.mark_attendance",x);t.success?(K("Attendance marked successfully!","success"),u.value=!1,N.value={status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""},yield pe()):t.already_exists&&K(t.message||"Attendance already marked for this date","warning")}catch(x){console.error("Error marking attendance:",x),K(x.message||"Failed to mark attendance","error")}finally{T.value=!1}}),ht=()=>A(this,null,function*(){M.value=!0;try{console.log("Submitting leave application with data:",{leave_type:B.value.leaveType,from_date:B.value.fromDate,to_date:B.value.toDate,description:B.value.description});const x=yield E("ascra_frontend.api.apply_leave",{leave_type:B.value.leaveType,from_date:B.value.fromDate,to_date:B.value.toDate,description:B.value.description});console.log("Leave application response:",x),x.success?(K("Leave application submitted successfully!","success"),D.value=!1,B.value={leaveType:"",fromDate:"",toDate:"",description:""},yield ve()):(console.error("Leave application failed:",x.message),K(x.message||"Failed to submit leave application","error"))}catch(x){console.error("Error submitting leave application:",x),K(x.message||"Failed to submit leave application","error")}finally{M.value=!1}}),$t=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_salary_slip_print_formats");x.success&&(k.value=x.print_formats)}catch(x){console.error("Error loading print formats:",x),k.value=[{name:"Salary Slip Standard",label:"Standard Format"},{name:"Salary Slip with Year to Date",label:"With Year to Date"},{name:"Salary Slip based on Timesheet",label:"Based on Timesheet"}]}}),St=x=>A(this,null,function*(){try{r.value=!0,p.value=!0,a.value="",g.value=x;const t=yield E("ascra_frontend.api.get_salary_slip_html",{salary_slip_name:x,print_format:w.value});t.success?a.value=t.html:(console.error("Failed to load salary slip preview:",t.message),K("Failed to load salary slip preview: "+t.message,"error"),ge())}catch(t){console.error("Error loading salary slip preview:",t),K("Error loading salary slip preview: "+t.message,"error"),ge()}finally{p.value=!1}}),je=x=>A(this,null,function*(){try{const t=`/api/method/ascra_frontend.api.download_salary_slip_pdf?salary_slip_name=${encodeURIComponent(x)}&print_format=${encodeURIComponent(w.value)}`,q=document.createElement("a");q.href=t,q.download=`salary_slip_${x}_${w.value.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(q),q.click(),document.body.removeChild(q),console.log("Salary slip download initiated for:",x,"with format:",w.value)}catch(t){console.error("Error downloading salary slip:",t),K("Error downloading salary slip: "+t.message,"error")}}),Dt=()=>{g.value&&je(g.value)},ge=()=>{r.value=!1,p.value=!1,a.value="",g.value=""},K=(x,t="success")=>{$e.value=x,le.value=t,he.value=!0},jt=()=>{he.value=!1,$e.value="",le.value="success"},At=x=>{x.target.style.display="none"},ne=x=>{if(!x)return null;try{return new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return x}},Tt=x=>{switch(x){case"Active":return"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium";case"Inactive":return"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium";case"Suspended":return"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium";case"Left":return"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium";default:return"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"}},Ae=x=>{switch(x){case 0:return"bg-yellow-100 text-yellow-800";case 1:return"bg-green-100 text-green-800";case 2:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Mt=x=>{switch(x){case"Draft":return"bg-yellow-100 text-yellow-800";case"Submitted":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Withheld":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},Et=()=>{pe(b.value,$.value)},Ft=()=>{b.value="",$.value="",pe()},Vt=()=>{Se(L.value,z.value)},Ut=()=>{L.value="",z.value="",Se()},qt=()=>{ve(Y.value,re.value)},It=()=>{Y.value="",re.value="",ve()},Te=()=>A(this,null,function*(){if(!B.value.leaveType){O.value=null;return}try{const x=yield E("ascra_frontend.api.get_leave_balance_for_date",{date:B.value.fromDate||new Date().toISOString().split("T")[0]});if(x.success){const t=x.leave_balance.find(q=>q.leave_type===B.value.leaveType);O.value=t||null}}catch(x){console.error("Error loading leave balance for type:",x),O.value=null}}),Me=()=>{if(!B.value.fromDate||!B.value.toDate){oe.value=0;return}const x=new Date(B.value.fromDate),t=new Date(B.value.toDate);if(x>t){oe.value=0;return}let q=0;const R=new Date(x);for(;R<=t;){const ce=R.getDay();ce!==0&&ce!==6&&q++,R.setDate(R.getDate()+1)}oe.value=q,B.value.leaveType&&Te()},Pt=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_holiday_list");x.success&&(ie.value=x.holidays||[])}catch(x){console.error("Error loading holidays:",x),ie.value=[]}}),Lt=()=>A(this,null,function*(){try{const x=yield E("ascra_frontend.api.get_employee_bank_accounts");x.success&&(me.value=x.bank_accounts||[])}catch(x){console.error("Error loading bank accounts:",x),me.value=[]}}),Ee=(x="IN")=>A(this,null,function*(){try{T.value=!0;const t=yield E("ascra_frontend.api.check_in_attendance",{log_type:x});t.success?(K(t.message,"success"),yield pe()):K(t.message||"Failed to mark attendance","error")}catch(t){console.error("Error checking in attendance:",t),K("Failed to mark attendance. Please try again.","error")}finally{T.value=!1}}),de=x=>{K(x,"success")};return se(()=>A(this,null,function*(){try{yield Promise.all([_t(),ft(),pe(),ve(),Ct(),$t(),wt(),Pt(),Lt()])}catch(x){console.error("Error initializing employee dashboard:",x),h.value="Failed to load dashboard data"}finally{F.value=!1}})),(x,t)=>{var R,ce,Fe,Ve,Ue,qe,Ie,Pe,Le,Re,Be,ze,Ne,He,Oe,Ge,We,Ye,Ke,Qe,Je,Xe,Ze,et,tt,st,ot,nt,lt,at,rt,it,dt,ut,pt;const q=Yt("Button");return o(),n("div",Pu,[te(Kt),e("div",Lu,[e("div",Ru,[e("div",Bu,[t[51]||(t[51]=e("h1",{class:"text-3xl font-bold text-ink-gray-9"}," Employee Dashboard ",-1)),v.value?(o(),n("p",zu," Welcome, "+l(v.value.employee_name)+"! Manage your attendance, leaves, and view salary information. ",1)):f("",!0)]),F.value?(o(),n("div",Nu,[...t[52]||(t[52]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):h.value?(o(),n("div",Hu,[e("div",Ou,[t[53]||(t[53]=e("svg",{class:"w-6 h-6 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Gu,l(h.value),1)])])):(o(),n("div",Wu,[e("div",Yu,[e("div",Ku,[e("div",Qu,[(R=v.value)!=null&&R.image?(o(),n("img",{key:0,src:v.value.image,alt:v.value.employee_name,class:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg",onError:At},null,40,Ju)):(o(),n("div",Xu,l(yt(((ce=v.value)==null?void 0:ce.employee_name)||((Fe=S.value)==null?void 0:Fe.full_name)||"User")),1)),t[54]||(t[54]=e("div",{class:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"},null,-1))]),e("div",Zu,[e("h2",e0,l(((Ve=v.value)==null?void 0:Ve.employee_name)||((Ue=S.value)==null?void 0:Ue.full_name)||"Employee"),1),e("p",t0,l(((qe=v.value)==null?void 0:qe.designation)||"Employee"),1),e("p",s0,l(((Ie=v.value)==null?void 0:Ie.department)||"General"),1),e("p",o0,"ID: "+l(((Pe=v.value)==null?void 0:Pe.employee_number)||"Not Available"),1)])]),e("div",null,[t[61]||(t[61]=e("h3",{class:"text-lg font-semibold text-ink-gray-9 mb-4"},"Personal Information",-1)),e("div",n0,[e("div",l0,[t[55]||(t[55]=e("span",{class:"text-ink-gray-6"},"Gender:",-1)),e("span",a0,l(((Le=v.value)==null?void 0:Le.gender)||"Not specified"),1)]),e("div",r0,[t[56]||(t[56]=e("span",{class:"text-ink-gray-6"},"Date of Birth:",-1)),e("span",i0,l(ne((Re=v.value)==null?void 0:Re.date_of_birth)||"Not specified"),1)]),e("div",d0,[t[57]||(t[57]=e("span",{class:"text-ink-gray-6"},"Marital Status:",-1)),e("span",u0,l(((Be=v.value)==null?void 0:Be.marital_status)||"Not specified"),1)]),e("div",p0,[t[58]||(t[58]=e("span",{class:"text-ink-gray-6"},"Blood Group:",-1)),e("span",c0,l(((ze=v.value)==null?void 0:ze.blood_group)||"Not specified"),1)]),e("div",m0,[t[59]||(t[59]=e("span",{class:"text-ink-gray-6"},"Mobile:",-1)),e("span",v0,l(((Ne=v.value)==null?void 0:Ne.cell_number)||"Not specified"),1)]),e("div",g0,[t[60]||(t[60]=e("span",{class:"text-ink-gray-6"},"Personal Email:",-1)),e("span",y0,l(((He=v.value)==null?void 0:He.personal_email)||"Not specified"),1)])])]),e("div",null,[t[68]||(t[68]=e("h3",{class:"text-lg font-semibold text-ink-gray-9 mb-4"},"Employment Details",-1)),e("div",x0,[e("div",b0,[t[62]||(t[62]=e("span",{class:"text-ink-gray-6"},"Company:",-1)),e("span",f0,l(((Oe=v.value)==null?void 0:Oe.company)||"Not specified"),1)]),e("div",_0,[t[63]||(t[63]=e("span",{class:"text-ink-gray-6"},"Branch:",-1)),e("span",C0,l(((Ge=v.value)==null?void 0:Ge.branch)||"Not specified"),1)]),e("div",w0,[t[64]||(t[64]=e("span",{class:"text-ink-gray-6"},"Date of Joining:",-1)),e("span",k0,l(ne((We=v.value)==null?void 0:We.date_of_joining)||"Not specified"),1)]),e("div",h0,[t[65]||(t[65]=e("span",{class:"text-ink-gray-6"},"Reports To:",-1)),e("span",$0,l(((Ye=v.value)==null?void 0:Ye.reports_to_name)||"Not specified"),1)]),e("div",S0,[t[66]||(t[66]=e("span",{class:"text-ink-gray-6"},"Status:",-1)),e("span",{class:V(Tt((Ke=v.value)==null?void 0:Ke.status))},l(((Qe=v.value)==null?void 0:Qe.status)||"Active"),3)]),(Je=v.value)!=null&&Je.holiday_list?(o(),n("div",D0,[t[67]||(t[67]=e("span",{class:"text-ink-gray-6"},"Holiday List:",-1)),e("span",j0,l(v.value.holiday_list),1)])):f("",!0)])])]),(Xe=v.value)!=null&&Xe.person_to_be_contacted||(Ze=v.value)!=null&&Ze.emergency_phone_number?(o(),n("div",A0,[t[72]||(t[72]=e("h3",{class:"text-lg font-semibold text-ink-gray-9 mb-4"},"Emergency Contact",-1)),e("div",T0,[(et=v.value)!=null&&et.person_to_be_contacted?(o(),n("div",M0,[t[69]||(t[69]=e("span",{class:"text-ink-gray-6"},"Contact Person:",-1)),e("p",E0,l(v.value.person_to_be_contacted),1)])):f("",!0),(tt=v.value)!=null&&tt.relation?(o(),n("div",F0,[t[70]||(t[70]=e("span",{class:"text-ink-gray-6"},"Relation:",-1)),e("p",V0,l(v.value.relation),1)])):f("",!0),(st=v.value)!=null&&st.emergency_phone_number?(o(),n("div",U0,[t[71]||(t[71]=e("span",{class:"text-ink-gray-6"},"Emergency Phone:",-1)),e("p",q0,l(v.value.emergency_phone_number),1)])):f("",!0)])])):f("",!0),(ot=v.value)!=null&&ot.current_address||(nt=v.value)!=null&&nt.permanent_address?(o(),n("div",I0,[t[75]||(t[75]=e("h3",{class:"text-lg font-semibold text-ink-gray-9 mb-4"},"Address Information",-1)),e("div",P0,[(lt=v.value)!=null&&lt.current_address?(o(),n("div",L0,[t[73]||(t[73]=e("h4",{class:"font-medium text-ink-gray-7 mb-2"},"Current Address",-1)),e("p",R0,l(v.value.current_address),1)])):f("",!0),(at=v.value)!=null&&at.permanent_address?(o(),n("div",B0,[t[74]||(t[74]=e("h4",{class:"font-medium text-ink-gray-7 mb-2"},"Permanent Address",-1)),e("p",z0,l(v.value.permanent_address),1)])):f("",!0)])])):f("",!0),!v.value&&!h.value?(o(),n("div",N0,[...t[76]||(t[76]=[e("p",{class:"text-sm text-orange-600 bg-orange-50 px-3 py-2 rounded-lg"}," Employee record not linked. Contact administrator to link your user account with an Employee record. ",-1)])])):f("",!0)])),e("div",H0,[e("div",O0,[e("button",{onClick:t[0]||(t[0]=m=>Ee("IN")),disabled:T.value,class:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg border border-green-600 hover:bg-green-700 hover:border-green-700 transition-colors duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},[...t[77]||(t[77]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),e("span",{class:"font-medium"},"Check In",-1)])],8,G0),e("button",{onClick:t[1]||(t[1]=m=>Ee("OUT")),disabled:T.value,class:"flex items-center space-x-2 px-6 py-3 bg-orange-600 text-white rounded-lg border border-orange-600 hover:bg-orange-700 hover:border-orange-700 transition-colors duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"},[...t[78]||(t[78]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),e("span",{class:"font-medium"},"Check Out",-1)])],8,W0),e("button",{onClick:t[2]||(t[2]=m=>D.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-white text-blue-600 rounded-lg border border-blue-600 hover:bg-blue-50 hover:border-blue-700 hover:text-blue-700 transition-colors duration-200 shadow-sm"},[...t[79]||(t[79]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"font-medium"},"Apply Leave",-1)])]),e("button",{onClick:t[3]||(t[3]=m=>xe.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-lg border border-purple-600 hover:bg-purple-700 hover:border-purple-700 transition-colors duration-200 shadow-sm"},[...t[80]||(t[80]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),e("span",{class:"font-medium"},"Bank Accounts",-1)])])])]),e("div",Y0,[e("div",K0,[e("div",Q0,[e("div",J0,[t[84]||(t[84]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Self Service Portal",-1)),e("div",X0,[t[81]||(t[81]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3"},"Core Functions",-1)),e("div",Z0,[e("button",{onClick:t[4]||(t[4]=m=>i.value="attendance"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="attendance"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," View Attendance ",2),e("button",{onClick:t[5]||(t[5]=m=>i.value="leaves"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="leaves"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Leave Applications ",2),e("button",{onClick:t[6]||(t[6]=m=>{i.value="salary",Se()}),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="salary"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Salary Slips ",2)])]),e("div",ep,[t[82]||(t[82]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3"},"Requests & Forms",-1)),e("div",tp,[e("button",{onClick:t[7]||(t[7]=m=>i.value="expenses"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="expenses"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Expense Claims ",2),e("button",{onClick:t[8]||(t[8]=m=>i.value="regularization"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="regularization"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Attendance Regularization ",2),e("button",{onClick:t[9]||(t[9]=m=>i.value="compoff"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="compoff"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Comp-off Requests ",2),e("button",{onClick:t[10]||(t[10]=m=>i.value="shifts"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="shifts"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Shift Schedule ",2),e("button",{onClick:t[11]||(t[11]=m=>i.value="travel"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="travel"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Travel Requests ",2),e("button",{onClick:t[12]||(t[12]=m=>i.value="tax"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="tax"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Tax Declarations ",2),e("button",{onClick:t[13]||(t[13]=m=>i.value="loan"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="loan"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Loan Applications ",2)])]),e("div",sp,[t[83]||(t[83]=e("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3"},"HR Management",-1)),e("div",op,[e("button",{onClick:t[14]||(t[14]=m=>i.value="appraisal"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="appraisal"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Performance ",2),e("button",{onClick:t[15]||(t[15]=m=>i.value="training"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="training"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Training ",2),e("button",{onClick:t[16]||(t[16]=m=>i.value="grievance"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="grievance"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Grievances ",2),e("button",{onClick:t[17]||(t[17]=m=>i.value="exit"),class:V(["w-full text-left px-3 py-2 text-sm rounded-md transition-colors",i.value==="exit"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])}," Exit Process ",2)])])])]),e("div",np,[e("div",lp,[i.value==="attendance"?(o(),n("div",ap,[e("div",rp,[e("div",ip,[t[87]||(t[87]=e("label",{class:"text-sm font-medium text-ink-blue-3"},"Filter by Date:",-1)),e("div",dp,[t[85]||(t[85]=e("label",{class:"text-xs text-ink-blue-2"},"From:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[18]||(t[18]=m=>b.value=m),class:"px-2 py-1 text-sm border border-outline-blue-1 rounded focus:outline-none focus:ring-1 focus:ring-ink-blue-3 w-full sm:w-auto"},null,512),[[j,b.value]])]),e("div",up,[t[86]||(t[86]=e("label",{class:"text-xs text-ink-blue-2"},"To:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[19]||(t[19]=m=>$.value=m),class:"px-2 py-1 text-sm border border-outline-blue-1 rounded focus:outline-none focus:ring-1 focus:ring-ink-blue-3 w-full sm:w-auto"},null,512),[[j,$.value]])]),e("div",{class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"},[e("button",{onClick:Et,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," Apply Filter "),e("button",{onClick:Ft,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])])]),ie.value.length>0?(o(),n("div",pp,[t[89]||(t[89]=e("h4",{class:"text-sm font-semibold text-amber-900 mb-3"},"Upcoming Holidays",-1)),e("div",cp,[(o(!0),n(I,null,P(ie.value.slice(0,6),m=>(o(),n("div",{key:m.holiday_date,class:"flex items-center space-x-3 p-2 bg-white rounded border border-amber-100"},[t[88]||(t[88]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",mp,[e("p",vp,l(m.description),1),e("p",gp,l(ne(m.holiday_date)),1)])]))),128))]),ie.value.length>6?(o(),n("div",yp,[e("button",xp," View "+l(ie.value.length-6)+" more holidays → ",1)])):f("",!0)])):f("",!0),d.value.length===0?(o(),n("div",bp," No attendance records found ")):(o(),n("div",fp,[(o(!0),n(I,null,P(d.value,m=>(o(),n("div",{key:m.name,class:"flex justify-between items-center p-4 bg-surface-gray-2 rounded-lg"},[e("div",null,[e("p",_p,l(ne(m.attendance_date)),1),e("p",Cp,l(m.status),1),m.in_time?(o(),n("p",wp,"In: "+l(De(m.in_time)),1)):f("",!0),m.out_time?(o(),n("p",kp,"Out: "+l(De(m.out_time)),1)):f("",!0),e("p",hp,"Status: "+l(m.docstatus_label||"Unknown"),1)]),e("div",$p,[e("span",{class:V([xt(m.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(m.status),3),e("span",{class:V([Ae(m.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},l(m.docstatus_label),3)])]))),128))]))])):f("",!0),i.value==="leaves"?(o(),n("div",Sp,[e("div",Dp,[e("div",jp,[t[92]||(t[92]=e("label",{class:"text-sm font-medium text-ink-green-3"},"Filter by Date:",-1)),e("div",Ap,[t[90]||(t[90]=e("label",{class:"text-xs text-ink-green-2"},"From:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[20]||(t[20]=m=>Y.value=m),class:"px-2 py-1 text-sm border border-outline-green-1 rounded focus:outline-none focus:ring-1 focus:ring-ink-green-3 w-full sm:w-auto"},null,512),[[j,Y.value]])]),e("div",Tp,[t[91]||(t[91]=e("label",{class:"text-xs text-ink-green-2"},"To:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[21]||(t[21]=m=>re.value=m),class:"px-2 py-1 text-sm border border-outline-green-1 rounded focus:outline-none focus:ring-1 focus:ring-ink-green-3 w-full sm:w-auto"},null,512),[[j,re.value]])]),e("div",{class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"},[e("button",{onClick:qt,class:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," Apply Filter "),e("button",{onClick:It,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])])]),y.value.length===0?(o(),n("div",Mp," No leave applications found ")):(o(),n("div",Ep,[(o(!0),n(I,null,P(y.value,m=>(o(),n("div",{key:m.name,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Fp,l(m.leave_type),1),e("p",Vp,l(ne(m.from_date))+" - "+l(ne(m.to_date)),1),e("p",Up,l(m.total_leave_days)+" days",1)]),e("span",{class:V([bt(m.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(m.status),3)]))),128))]))])):f("",!0),i.value==="salary"?(o(),n("div",qp,[e("div",Ip,[e("div",Pp,[t[95]||(t[95]=e("label",{class:"text-sm font-medium text-purple-900"},"Filter by Date:",-1)),e("div",Lp,[t[93]||(t[93]=e("label",{class:"text-xs text-purple-700"},"From:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[22]||(t[22]=m=>L.value=m),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500 w-full sm:w-auto"},null,512),[[j,L.value]])]),e("div",Rp,[t[94]||(t[94]=e("label",{class:"text-xs text-purple-700"},"To:",-1)),C(e("input",{type:"date","onUpdate:modelValue":t[23]||(t[23]=m=>z.value=m),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500 w-full sm:w-auto"},null,512),[[j,z.value]])]),e("div",{class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"},[e("button",{onClick:Vt,class:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors"}," Apply Filter "),e("button",{onClick:Ut,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])])]),s.value.length>0?(o(),n("div",Bp,[e("div",zp,[t[96]||(t[96]=e("label",{for:"printFormat",class:"text-sm font-medium text-blue-900"}," Select Print Format: ",-1)),C(e("select",{id:"printFormat","onUpdate:modelValue":t[24]||(t[24]=m=>w.value=m),class:"block w-64 px-3 py-2 text-sm border border-blue-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(o(!0),n(I,null,P(k.value,m=>(o(),n("option",{key:m.name,value:m.name},l(m.label),9,Np))),128))],512),[[H,w.value]]),t[97]||(t[97]=e("span",{class:"text-xs text-blue-600"}," This format will be used for both preview and download ",-1))])])):f("",!0),s.value.length===0?(o(),n("div",Hp,[...t[98]||(t[98]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Salary Slips Found",-1),e("p",{class:"text-sm text-gray-500"},[W("Salary slips don't exist in the system yet."),e("br"),W("Contact HR or administrator for salary slip generation.")],-1)])])):(o(),n("div",Op,[(o(!0),n(I,null,P(s.value,m=>(o(),n("div",{key:m.name,class:"flex justify-between items-center p-4 bg-gray-50 rounded-lg"},[e("div",Gp,[e("p",Wp,l(ne(m.start_date))+" - "+l(ne(m.end_date)),1),e("p",Yp,"Gross: ₹"+l(m.gross_pay)+" | Net: ₹"+l(m.net_pay),1),e("div",Kp,[e("span",{class:V([Mt(m.status),"px-2 py-1 text-xs font-medium rounded-full"])},l(m.status),3),e("span",{class:V([Ae(m.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},l(m.docstatus_label),3)])]),e("div",Qp,[e("button",{onClick:Rt=>St(m.name),class:"px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200"}," Preview ",8,Jp),e("button",{onClick:Rt=>je(m.name),class:"px-3 py-1.5 text-sm font-medium text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 hover:border-green-300 transition-colors duration-200"}," Download ",8,Xp)])]))),128))]))])):f("",!0),i.value==="expenses"?(o(),n("div",Zp,[e("div",ec,[t[99]||(t[99]=e("h4",{class:"text-lg font-medium text-gray-900"},"Expense Claims",-1)),e("button",{onClick:t[25]||(t[25]=m=>be.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Expense Claim ")]),t[100]||(t[100]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Expense Claims Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Submit your first expense claim to get started</p></div>',1))])):f("",!0),i.value==="regularization"?(o(),n("div",tc,[e("div",sc,[t[101]||(t[101]=e("h4",{class:"text-lg font-medium text-gray-900"},"Attendance Regularization Requests",-1)),e("button",{onClick:t[26]||(t[26]=m=>fe.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Request ")]),t[102]||(t[102]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Regularization Requests Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Submit a request to regularize your attendance</p></div>',1))])):f("",!0),i.value==="compoff"?(o(),n("div",oc,[e("div",nc,[t[103]||(t[103]=e("h4",{class:"text-lg font-medium text-gray-900"},"Comp-off Requests",-1)),e("button",{onClick:t[27]||(t[27]=m=>_e.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Comp-off Request ")]),t[104]||(t[104]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Comp-off Requests Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Request compensatory leave for extra work hours</p></div>',1))])):f("",!0),i.value==="shifts"?(o(),n("div",lc,[t[106]||(t[106]=e("h4",{class:"text-lg font-medium text-gray-900 mb-6"},"Shift Schedule",-1)),(rt=v.value)!=null&&rt.name?(o(),ee(Xo,{key:0,"employee-id":v.value.name},null,8,["employee-id"])):(o(),n("div",ac,[...t[105]||(t[105]=[e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Employee Information Required",-1),e("p",{class:"text-sm text-gray-500"},"Please ensure your employee record is linked",-1)])]))])):f("",!0),i.value==="travel"?(o(),n("div",rc,[e("div",ic,[t[107]||(t[107]=e("h4",{class:"text-lg font-medium text-gray-900"},"Travel Requests",-1)),e("button",{onClick:t[28]||(t[28]=m=>Ce.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Travel Request ")]),t[108]||(t[108]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2v1a2 2 0 002 2 2.5 2.5 0 012.5 2.5v.5a2 2 0 012 2v2a2 2 0 002 2h2a2 2 0 002-2v-2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2v1a2 2 0 002 2 2.5 2.5 0 012.5 2.5v.5a2 2 0 012 2v2a2 2 0 002 2h2a2 2 0 002-2v-2.945" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Travel Requests Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Submit a travel request for business trips</p></div>',1))])):f("",!0),i.value==="tax"?(o(),n("div",dc,[e("div",uc,[t[109]||(t[109]=e("h4",{class:"text-lg font-medium text-gray-900"},"Tax Declarations",-1)),e("button",{onClick:t[29]||(t[29]=m=>we.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Tax Declaration ")]),t[110]||(t[110]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Tax Declarations Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Submit your tax savings declarations</p></div>',1))])):f("",!0),i.value==="loan"?(o(),n("div",pc,[e("div",cc,[t[111]||(t[111]=e("h4",{class:"text-lg font-medium text-gray-900"},"Loan Applications",-1)),e("button",{onClick:t[30]||(t[30]=m=>ke.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium"}," + New Loan Application ")]),t[112]||(t[112]=G('<div class="text-center py-8 text-gray-500" data-v-b554a5a4><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b554a5a4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" data-v-b554a5a4></path></svg><p class="text-lg font-medium text-gray-900 mb-2" data-v-b554a5a4>No Loan Applications Found</p><p class="text-sm text-gray-500" data-v-b554a5a4>Apply for company loans and advances</p></div>',1))])):f("",!0),i.value==="appraisal"?(o(),n("div",mc,[(it=v.value)!=null&&it.name?(o(),ee(wa,{key:0,"employee-id":v.value.name},null,8,["employee-id"])):(o(),n("div",vc,[...t[113]||(t[113]=[e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Employee Information Required",-1),e("p",{class:"text-sm text-gray-500"},"Please ensure your employee record is linked",-1)])]))])):f("",!0),i.value==="training"?(o(),n("div",gc,[(dt=v.value)!=null&&dt.name?(o(),ee(Kr,{key:0,"employee-id":v.value.name},null,8,["employee-id"])):(o(),n("div",yc,[...t[114]||(t[114]=[e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Employee Information Required",-1),e("p",{class:"text-sm text-gray-500"},"Please ensure your employee record is linked",-1)])]))])):f("",!0),i.value==="grievance"?(o(),n("div",xc,[(ut=v.value)!=null&&ut.name?(o(),ee(id,{key:0,"employee-id":v.value.name},null,8,["employee-id"])):(o(),n("div",bc,[...t[115]||(t[115]=[e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Employee Information Required",-1),e("p",{class:"text-sm text-gray-500"},"Please ensure your employee record is linked",-1)])]))])):f("",!0),i.value==="exit"?(o(),n("div",fc,[(pt=v.value)!=null&&pt.name?(o(),ee(Iu,{key:0,"employee-id":v.value.name},null,8,["employee-id"])):(o(),n("div",_c,[...t[116]||(t[116]=[e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Employee Information Required",-1),e("p",{class:"text-sm text-gray-500"},"Please ensure your employee record is linked",-1)])]))])):f("",!0)])])])]),c.value.length>0?(o(),n("div",Cc,[t[117]||(t[117]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Leave Balance")],-1)),e("div",wc,[e("div",kc,[(o(!0),n(I,null,P(c.value,m=>(o(),n("div",{key:m.leave_type,class:"bg-blue-50 rounded-lg p-4"},[e("h4",hc,l(m.leave_type),1),e("p",$c,l(m.leaves_remaining||m.total_leaves_allocated-(m.leaves_taken||0)),1),e("p",Sc,"Available out of "+l(m.total_leaves_allocated),1),e("p",Dc,"Used: "+l(m.leaves_taken||0),1)]))),128))])])])):f("",!0)])]),D.value?(o(),n("div",jc,[e("div",Ac,[e("div",Tc,[t[119]||(t[119]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Apply for Leave",-1)),e("button",{onClick:t[31]||(t[31]=m=>D.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[118]||(t[118]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(ht,["prevent"]),class:"space-y-4"},[e("div",null,[t[121]||(t[121]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Leave Type",-1)),C(e("select",{"onUpdate:modelValue":t[32]||(t[32]=m=>B.value.leaveType=m),onChange:Te,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[120]||(t[120]=e("option",{value:""},"Select Leave Type",-1)),(o(!0),n(I,null,P(ae.value,m=>(o(),n("option",{key:m.name,value:m.name},l(m.leave_type_name),9,Mc))),128))],544),[[H,B.value.leaveType]])]),O.value?(o(),n("div",Ec,[e("div",Fc,[t[122]||(t[122]=e("span",{class:"text-sm font-medium text-blue-900"},"Available Balance:",-1)),e("span",Vc,l(O.value.leaves_remaining)+" days",1)]),e("div",Uc," Total: "+l(O.value.total_leaves_allocated)+" days | Used: "+l(O.value.leaves_taken)+" days ",1),O.value.valid_from&&O.value.valid_to?(o(),n("div",qc," Valid: "+l(ne(O.value.valid_from))+" - "+l(ne(O.value.valid_to)),1)):f("",!0)])):f("",!0),e("div",Ic,[e("div",null,[t[123]||(t[123]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Date",-1)),C(e("input",{"onUpdate:modelValue":t[33]||(t[33]=m=>B.value.fromDate=m),onChange:Me,type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[j,B.value.fromDate]])]),e("div",null,[t[124]||(t[124]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"To Date",-1)),C(e("input",{"onUpdate:modelValue":t[34]||(t[34]=m=>B.value.toDate=m),onChange:Me,type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[j,B.value.toDate]])])]),oe.value>0?(o(),n("div",Pc,[e("div",Lc,[t[125]||(t[125]=e("span",{class:"text-sm font-medium text-gray-700"},"Requested Days:",-1)),e("span",Rc,l(oe.value)+" days",1)]),O.value?(o(),n("div",Bc,[e("div",zc,[t[126]||(t[126]=e("span",{class:"text-sm text-gray-600"},"Balance After Request:",-1)),e("span",{class:V(["font-bold",O.value.leaves_remaining-oe.value<0?"text-red-600":"text-green-600"])},l(O.value.leaves_remaining-oe.value)+" days ",3)]),O.value.leaves_remaining-oe.value<0?(o(),n("div",Nc," ⚠️ Insufficient leave balance! You have "+l(O.value.leaves_remaining)+" days available but are requesting "+l(oe.value)+" days. ",1)):f("",!0)])):f("",!0)])):f("",!0),e("div",null,[t[127]||(t[127]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),C(e("textarea",{"onUpdate:modelValue":t[35]||(t[35]=m=>B.value.description=m),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Reason for leave..."},null,512),[[j,B.value.description]])]),e("div",Hc,[te(q,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:M.value,disabled:O.value&&O.value.leaves_remaining-oe.value<0},{default:ye(()=>[...t[128]||(t[128]=[W(" Submit Application ",-1)])]),_:1},8,["loading","disabled"]),te(q,{type:"button",theme:"gray",variant:"outline",onClick:t[36]||(t[36]=m=>D.value=!1)},{default:ye(()=>[...t[129]||(t[129]=[W(" Cancel ",-1)])]),_:1})])],32)])])):f("",!0),u.value?(o(),n("div",Oc,[e("div",Gc,[e("div",Wc,[t[131]||(t[131]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mark Attendance",-1)),e("button",{onClick:t[37]||(t[37]=m=>u.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[130]||(t[130]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Z(kt,["prevent"]),class:"space-y-4"},[e("div",null,[t[132]||(t[132]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attendance Date",-1)),C(e("input",{"onUpdate:modelValue":t[38]||(t[38]=m=>N.value.attendanceDate=m),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,N.value.attendanceDate]])]),e("div",null,[t[134]||(t[134]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),C(e("select",{"onUpdate:modelValue":t[39]||(t[39]=m=>N.value.status=m),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[133]||(t[133]=[G('<option value="Present" data-v-b554a5a4>Present</option><option value="Absent" data-v-b554a5a4>Absent</option><option value="Work From Home" data-v-b554a5a4>Work From Home</option><option value="Half Day" data-v-b554a5a4>Half Day</option><option value="On Leave" data-v-b554a5a4>On Leave</option>',5)])],512),[[H,N.value.status]])]),N.value.status==="Present"||N.value.status==="Work From Home"?(o(),n("div",Yc,[e("div",null,[t[135]||(t[135]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"In Time",-1)),C(e("input",{"onUpdate:modelValue":t[40]||(t[40]=m=>N.value.inTime=m),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,N.value.inTime]])]),e("div",null,[t[136]||(t[136]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Out Time",-1)),C(e("input",{"onUpdate:modelValue":t[41]||(t[41]=m=>N.value.outTime=m),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,N.value.outTime]])])])):f("",!0),e("div",null,[t[137]||(t[137]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Remarks (Optional)",-1)),C(e("textarea",{"onUpdate:modelValue":t[42]||(t[42]=m=>N.value.remarks=m),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional notes..."},null,512),[[j,N.value.remarks]])]),e("div",Kc,[te(q,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:T.value},{default:ye(()=>[...t[138]||(t[138]=[W(" Mark Attendance ",-1)])]),_:1},8,["loading"]),te(q,{type:"button",theme:"gray",variant:"outline",onClick:t[43]||(t[43]=m=>u.value=!1)},{default:ye(()=>[...t[139]||(t[139]=[W(" Cancel ",-1)])]),_:1})])],32)])])):f("",!0),r.value?(o(),n("div",Qc,[e("div",Jc,[e("div",{class:"flex justify-between items-center p-4 border-b border-gray-200"},[t[141]||(t[141]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Salary Slip Preview",-1)),e("button",{onClick:ge,class:"text-gray-400 hover:text-gray-600"},[...t[140]||(t[140]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Xc,[p.value?(o(),n("div",Zc,[...t[142]||(t[142]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):a.value?(o(),n("div",{key:1,innerHTML:a.value,class:"salary-slip-preview"},null,8,em)):(o(),n("div",tm," Failed to load salary slip preview "))]),e("div",{class:"flex justify-end space-x-2 p-4 border-t border-gray-200"},[e("button",{onClick:Dt,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200"}," Download PDF "),e("button",{onClick:ge,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors duration-200"}," Close ")])])])):f("",!0),he.value?(o(),n("div",sm,[e("div",om,[e("div",nm,[e("div",lm,[le.value==="success"?(o(),n("div",am,[...t[143]||(t[143]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):le.value==="error"?(o(),n("div",rm,[...t[144]||(t[144]=[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):le.value==="warning"?(o(),n("div",im,[...t[145]||(t[145]=[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)])])):f("",!0),e("div",null,[e("h3",dm,l(le.value==="success"?"Success":le.value==="error"?"Error":"Warning"),1)])]),e("p",um,l($e.value),1),e("div",pm,[e("button",{onClick:jt,class:V(["px-4 py-2 rounded-md font-medium transition-colors duration-200",le.value==="success"?"bg-green-600 hover:bg-green-700 text-white":le.value==="error"?"bg-red-600 hover:bg-red-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white"])}," OK ",2)])])])])):f("",!0),xe.value?(o(),n("div",cm,[e("div",mm,[e("div",vm,[t[147]||(t[147]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Bank Accounts",-1)),e("button",{onClick:t[44]||(t[44]=m=>xe.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[146]||(t[146]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),me.value.length===0?(o(),n("div",gm,[...t[148]||(t[148]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),e("p",{class:"text-gray-500"},"No bank accounts found",-1),e("p",{class:"text-sm text-gray-400 mt-2"},"Contact HR to add your bank account details",-1)])])):(o(),n("div",ym,[(o(!0),n(I,null,P(me.value,m=>(o(),n("div",{key:m.name,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[e("div",xm,[e("div",bm,[e("div",fm,[e("h4",_m,l(m.bank_name),1),m.default===1?(o(),n("span",Cm,"Default")):f("",!0)]),e("div",wm,[e("div",null,[t[149]||(t[149]=e("span",{class:"text-gray-600"},"Account Name:",-1)),e("p",km,l(m.account_name||"N/A"),1)]),e("div",null,[t[150]||(t[150]=e("span",{class:"text-gray-600"},"Account Number:",-1)),e("p",hm,l(m.account_number||"N/A"),1)]),m.iban?(o(),n("div",$m,[t[151]||(t[151]=e("span",{class:"text-gray-600"},"IBAN:",-1)),e("p",Sm,l(m.iban),1)])):f("",!0),m.bank_branch?(o(),n("div",Dm,[t[152]||(t[152]=e("span",{class:"text-gray-600"},"Branch:",-1)),e("p",jm,l(m.bank_branch),1)])):f("",!0)])]),t[153]||(t[153]=e("div",{class:"ml-4 flex-shrink-0"},[e("div",{class:"bg-blue-100 rounded-full p-3"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])])],-1))])]))),128))])),t[154]||(t[154]=e("div",{class:"mt-6 pt-4 border-t border-gray-200"},[e("p",{class:"text-xs text-gray-500 text-center"}," For any changes to your bank account details, please contact the HR department. ")],-1))])])):f("",!0),be.value?(o(),ee(hs,{key:5,onClose:t[45]||(t[45]=m=>be.value=!1),onSuccess:de})):f("",!0),fe.value?(o(),ee(so,{key:6,onClose:t[46]||(t[46]=m=>fe.value=!1),onSuccess:de})):f("",!0),_e.value?(o(),ee(xo,{key:7,onClose:t[47]||(t[47]=m=>_e.value=!1),onSuccess:de})):f("",!0),Ce.value?(o(),ee(kn,{key:8,onClose:t[48]||(t[48]=m=>Ce.value=!1),onSuccess:de})):f("",!0),we.value?(o(),ee(Gn,{key:9,onClose:t[49]||(t[49]=m=>we.value=!1),onSuccess:de})):f("",!0),ke.value?(o(),ee(gl,{key:10,onClose:t[50]||(t[50]=m=>ke.value=!1),onSuccess:de})):f("",!0)])}}},Vm=Wt(Am,[["__scopeId","data-v-b554a5a4"]]);export{Vm as default};
//# sourceMappingURL=EmployeeDashboard-CnHrRqWk.js.map
