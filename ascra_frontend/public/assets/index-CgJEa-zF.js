const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-D6VyBsMa.js","assets/Navigation-BXoot8LA.js","assets/frappe-ui-BZ2Hvwvi.js","assets/frappe-ui-D1rk2b8Q.css","assets/FooterSection-AgR5Pe8g.js","assets/Login-Bc3oAxv8.js","assets/Signup-CDgoSrx-.js","assets/MyAccount-DnPUK65I.js","assets/TestSwitch-8l8M3AoI.js","assets/EmployeeDashboard-CnHrRqWk.js","assets/EmployeeDashboard-W8d_t1my.css","assets/ERPNext-dKF2lqah.js"])))=>i.map(i=>d[i]);
var w=(e,o,n)=>new Promise((a,t)=>{var r=c=>{try{d(n.next(c))}catch(p){t(p)}},u=c=>{try{d(n.throw(c))}catch(p){t(p)}},d=c=>c.done?a(c.value):Promise.resolve(c.value).then(r,u);d((n=n.apply(e,o)).next())});import{_ as A,r as k,o as P,c as T,a as I,b as g,d as S,e as R,f as q,g as D,h as l,l as O,i as $,j as v,k as b,s as M,m as V,n as x,p as N,q as C,t as B,u as U,E as F,v as j,I as H,w as Q,x as G}from"./frappe-ui-BZ2Hvwvi.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const K={},W={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200"};function z(e,o){const n=k("router-view");return P(),T("div",W,[I(n)])}const J=A(K,[["render",z]]),y=g({url:"frappe.auth.get_logged_user",cache:"User",onError(e){e&&e.exc_type==="AuthenticationError"&&h.push({name:"LoginPage"})}});function _(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const f=S({login:g({url:"login",makeParams({email:e,password:o}){return{usr:e,pwd:o}},onSuccess(e){y.reload(),f.user=_(),f.login.reset(),h.replace("/my-account")}}),logout:g({url:"logout",onSuccess(){y.reset(),f.user=_(),h.replace({name:"Login"})}}),user:_(),isLoggedIn:R(()=>!!f.user)}),X=[{path:"/",name:"Home",component:()=>l(()=>import("./Home-D6VyBsMa.js"),__vite__mapDeps([0,1,2,3,4])),meta:{requiresAuth:!1}},{name:"Login",path:"/account/login",component:()=>l(()=>import("./Login-Bc3oAxv8.js"),__vite__mapDeps([5,2,3,1])),meta:{requiresAuth:!1}},{name:"Signup",path:"/account/signup",component:()=>l(()=>import("./Signup-CDgoSrx-.js"),__vite__mapDeps([6,2,3,1])),meta:{requiresAuth:!1}},{name:"MyAccount",path:"/my-account",component:()=>l(()=>import("./MyAccount-DnPUK65I.js"),__vite__mapDeps([7,2,3,1])),meta:{requiresAuth:!0}},{name:"TestSwitch",path:"/test-switch",component:()=>l(()=>import("./TestSwitch-8l8M3AoI.js"),__vite__mapDeps([8,2,3])),meta:{requiresAuth:!1}},{name:"EmployeeDashboard",path:"/employee-dashboard",component:()=>l(()=>import("./EmployeeDashboard-CnHrRqWk.js"),__vite__mapDeps([9,2,3,1,10])),meta:{requiresAuth:!0,requiresEmployeeRole:!0}},{name:"ERPNext",path:"/erpnext",component:()=>l(()=>import("./ERPNext-dKF2lqah.js"),__vite__mapDeps([11,1,2,3,4])),meta:{requiresAuth:!1}}],h=q({history:D("/"),routes:X});h.beforeEach((e,o,n)=>w(void 0,null,function*(){let a=f.isLoggedIn;try{yield y.promise}catch(r){a=!1}const t=e.meta.requiresAuth;e.name==="Login"&&a?n({name:"MyAccount"}):t&&!a?n({name:"Login"}):n()}));const Y=9e3;let E=null;function Z(){const e=window.location.hostname,o=window.site_name,n=window.location.port?`:${Y}`:"",t=`${n?"http":"https"}://${e}${n}/${o}`;return E=O(t,{withCredentials:!0,reconnectionAttempts:5}),E}function ee(){const e=v(!1),o=v(!1),n=()=>typeof window!="undefined"?(o.value=window.matchMedia("(prefers-color-scheme: dark)").matches,o.value):!1,a=()=>{if(typeof window!="undefined"){const s=localStorage.getItem("theme");if(s)return s==="dark"}return null},t=s=>{if(typeof document!="undefined"){const i=document.documentElement;s?i.classList.add("dark"):i.classList.remove("dark")}},r=s=>{console.log("setTheme called with:",s),e.value=s,t(s),typeof window!="undefined"&&(localStorage.setItem("theme",s?"dark":"light"),console.log("Theme saved to localStorage:",s?"dark":"light"))},u=()=>{const s=!e.value;console.log("Theme toggle called:",{current:e.value,new:s}),r(s)},d=()=>{const s=n();r(s),typeof window!="undefined"&&localStorage.removeItem("theme")},c=()=>{const s=a();if(s!==null)e.value=s,t(s);else{const i=n();e.value=i,t(i)}},p=()=>{typeof window!="undefined"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{o.value=i.matches,a()===null&&r(i.matches)})};return $(()=>{p()}),{isDark:e,systemPreference:o,toggleTheme:u,setTheme:r,setSystemTheme:d,initTheme:c}}if(typeof window!="undefined"){const e=localStorage.getItem("theme");let o=!1;e?o=e==="dark":o=window.matchMedia("(prefers-color-scheme: dark)").matches,o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}const L={Button:G,TextInput:Q,Input:H,FormControl:j,ErrorMessage:F,Dialog:U,Alert:B,Badge:C},m=b(J);M("resourceFetcher",V);m.use(h);m.use(x);m.use(N);const te=Z();m.config.globalProperties.$socket=te;for(const e in L)m.component(e,L[e]);const oe=ee();oe.initTheme();m.mount("#app");export{f as s,ee as u};
//# sourceMappingURL=index-CgJEa-zF.js.map
