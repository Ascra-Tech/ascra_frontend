var g=(le,$,f)=>new Promise((n,F)=>{var C=x=>{try{A(f.next(x))}catch(j){F(j)}},D=x=>{try{A(f.throw(x))}catch(j){F(j)}},A=x=>x.done?n(x.value):Promise.resolve(x.value).then(C,D);A((f=f.apply(le,$)).next())});import{_ as it,K as i,A as dt,o as a,c as l,a as N,w as e,C as r,B as u,N as _,O as v,P as y,Q as M,R as E,S as ae,x as P,D as Ie,y as X,z as ut,J as b,r as ct}from"./frappe-ui-U0jLBpY2.js";import{_ as pt}from"./Navigation-C3RaobMx.js";import"./index-JhZrgbs8.js";const mt={class:"min-h-screen bg-gray-50"},vt={id:"employee-dashboard",class:"pt-20 pb-12"},gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},yt={class:"mb-8"},xt={key:0,class:"text-gray-600 mt-2"},bt={key:0,class:"flex justify-center items-center py-12"},ft={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8"},_t={class:"flex items-center"},wt={class:"text-red-800"},ht={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ct={class:"flex flex-col items-center lg:items-start"},St={class:"relative mb-4"},Dt=["src","alt"],At={key:1,class:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-2xl font-bold shadow-lg"},jt={class:"text-center lg:text-left"},Tt={class:"text-2xl font-bold text-gray-900 mb-1"},Ft={class:"text-blue-600 font-semibold"},Lt={class:"text-gray-500"},Mt={class:"text-sm text-gray-400 mt-1"},Et={class:"space-y-3"},Pt={class:"flex justify-between"},Ut={class:"font-medium text-gray-900"},Vt={class:"flex justify-between"},Bt={class:"font-medium text-gray-900"},It={class:"flex justify-between"},Nt={class:"font-medium text-gray-900"},$t={class:"flex justify-between"},Rt={class:"font-medium text-gray-900"},zt={class:"flex justify-between"},Ht={class:"font-medium text-gray-900"},Ot={class:"flex justify-between"},Wt={class:"font-medium text-gray-900 text-sm"},qt={class:"space-y-3"},Gt={class:"flex justify-between"},Kt={class:"font-medium text-gray-900"},Jt={class:"flex justify-between"},Yt={class:"font-medium text-gray-900"},Qt={class:"flex justify-between"},Xt={class:"font-medium text-gray-900"},Zt={class:"flex justify-between"},es={class:"font-medium text-gray-900"},ts={class:"flex justify-between"},ss={key:0,class:"flex justify-between"},os={class:"font-medium text-gray-900"},as={key:0,class:"mt-8 pt-6 border-t border-gray-200"},ls={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},rs={key:0},ns={class:"font-medium text-gray-900"},is={key:1},ds={class:"font-medium text-gray-900"},us={key:2},cs={class:"font-medium text-gray-900"},ps={key:1,class:"mt-8 pt-6 border-t border-gray-200"},ms={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},vs={key:0},gs={class:"text-gray-600 text-sm"},ys={key:1},xs={class:"text-gray-600 text-sm"},bs={key:2,class:"mt-4"},fs={class:"flex justify-center mb-6"},_s={class:"flex space-x-4"},ws={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8"},hs={class:"border-b border-gray-200"},ks={class:"flex space-x-8 px-6","aria-label":"Tabs"},Cs={class:"p-6"},Ss={key:0},Ds={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},As={class:"flex items-center space-x-4"},js={class:"flex items-center space-x-2"},Ts={class:"flex items-center space-x-2"},Fs={key:0,class:"text-center py-8 text-gray-500"},Ls={key:1,class:"space-y-3"},Ms={class:"font-medium text-gray-900"},Es={class:"text-sm text-gray-600"},Ps={key:0,class:"text-xs text-gray-500"},Us={key:1,class:"text-xs text-gray-500"},Vs={class:"text-xs text-gray-400"},Bs={class:"flex flex-col items-end space-y-1"},Is={key:1},Ns={class:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4"},$s={class:"flex items-center space-x-4"},Rs={class:"flex items-center space-x-2"},zs={class:"flex items-center space-x-2"},Hs={key:0,class:"text-center py-8 text-gray-500"},Os={key:1,class:"space-y-3"},Ws={class:"font-medium text-gray-900"},qs={class:"text-sm text-gray-600"},Gs={class:"text-xs text-gray-500"},Ks={key:2,class:"space-y-4"},Js={class:"bg-purple-50 border border-purple-200 rounded-lg p-4"},Ys={class:"flex items-center space-x-4 mb-3"},Qs={class:"flex items-center space-x-2"},Xs={class:"flex items-center space-x-2"},Zs={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},eo={class:"flex items-center space-x-4"},to=["value"],so={key:1,class:"text-center py-12 bg-gray-50 rounded-lg"},oo={key:2,class:"space-y-3"},ao={class:"flex-1"},lo={class:"font-medium text-gray-900"},ro={class:"text-sm text-gray-600"},no={class:"flex items-center space-x-4 mt-1"},io={class:"flex space-x-2"},uo=["onClick"],co=["onClick"],po={key:3,class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},mo={class:"p-6"},vo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},go={class:"font-medium text-gray-900"},yo={class:"text-2xl font-bold text-blue-600"},xo={class:"text-sm text-gray-600"},bo={class:"text-xs text-gray-500"},fo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_o={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},wo={class:"flex justify-between items-center mb-4"},ho=["value"],ko={class:"grid grid-cols-2 gap-4"},Co={class:"flex space-x-3"},So={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Do={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},Ao={class:"flex justify-between items-center mb-4"},jo={key:0,class:"grid grid-cols-2 gap-4"},To={class:"flex space-x-3"},Fo={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Lo={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden"},Mo={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},Eo={key:0,class:"flex justify-center items-center py-8"},Po=["innerHTML"],Uo={key:2,class:"text-center py-8 text-gray-500"},Vo={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bo={class:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4"},Io={class:"p-6"},No={class:"flex items-center mb-4"},$o={key:0,class:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3"},Ro={key:1,class:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3"},zo={key:2,class:"flex-shrink-0 w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mr-3"},Ho={class:"text-lg font-semibold text-gray-900"},Oo={class:"text-gray-600 mb-6"},Wo={class:"flex justify-end"},qo={__name:"EmployeeDashboard",setup(le){const $=i(!0),f=i(""),n=i(null),F=i(null),C=i([]),D=i([]),A=i([]),x=i(!1),j=i(!1),U=i(!1),V=i(!1),w=i("attendance"),S=i([]),Z=i(!1),R=i(!1),B=i(""),z=i(""),ee=i([]),L=i("Salary Slip Standard"),H=i(""),O=i(""),W=i(""),q=i(""),G=i(""),K=i(""),I=i([]),te=i(!1),se=i(""),h=i("success"),m=i({leaveType:"",fromDate:"",toDate:"",description:""}),p=i({status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""}),Ne=o=>o.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2),re=o=>o?new Date(o).toLocaleTimeString():"N/A",$e=o=>({Present:"bg-green-100 text-green-800",Absent:"bg-red-100 text-red-800","On Leave":"bg-yellow-100 text-yellow-800","Half Day":"bg-blue-100 text-blue-800","Work From Home":"bg-purple-100 text-purple-800"})[o]||"bg-gray-100 text-gray-800",Re=o=>({Open:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Cancelled:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",ze=()=>g(this,null,function*(){try{const o=yield b("ascra_frontend.api.get_employee_info");o.success&&(n.value=o.employee)}catch(o){console.error("Error loading employee info:",o),o.message&&o.message.includes("Employee record not found")?console.log("No employee record found for user, showing fallback data"):f.value=o.message||"Failed to load employee information"}}),He=()=>g(this,null,function*(){try{const o=yield b("frappe.auth.get_logged_user");o&&(F.value={email:o,full_name:"Amit Kumar"})}catch(o){console.error("Error loading current user:",o)}}),J=(o=null,t=null)=>g(this,null,function*(){try{const d={};o&&(d.from_date=o),t&&(d.to_date=t);const c=yield b("ascra_frontend.api.get_attendance_records",d);if(console.log("Attendance API response:",c),c.success===!1){console.error("API returned error:",c.message),C.value=[];return}console.log("Attendance records received:",c.attendance_records),console.log("Total attendance records:",c.attendance_records?c.attendance_records.length:0),C.value=c.attendance_records||[],console.log("Attendance records set in frontend:",C.value)}catch(d){console.error("Error loading attendance records:",d),C.value=[]}}),Y=(o=null,t=null)=>g(this,null,function*(){try{const d={};o&&(d.from_date=o),t&&(d.to_date=t);const c=yield b("ascra_frontend.api.get_leave_applications",d);if(c.success===!1){console.error("API returned error:",c.message),D.value=[];return}c.success&&(D.value=c.leave_applications)}catch(d){console.error("Error loading leave applications:",d),D.value=[]}}),Oe=()=>g(this,null,function*(){try{const o=yield b("ascra_frontend.api.get_leave_balance");o.success&&(A.value=o.leave_balance)}catch(o){console.error("Error loading leave balance:",o)}}),We=()=>g(this,null,function*(){try{const o=yield b("ascra_frontend.api.get_leave_types");if(o.success===!1){console.error("API returned error:",o.message),I.value=[];return}o.success&&(I.value=o.leave_types,console.log("Leave types loaded:",I.value))}catch(o){console.error("Error loading leave types:",o),I.value=[]}}),oe=(o=null,t=null)=>g(this,null,function*(){try{const d={};o&&(d.from_date=o),t&&(d.to_date=t);const c=yield b("ascra_frontend.api.get_salary_slips",d);if(console.log("Salary slips API response:",c),c.success===!1){console.error("API returned error:",c.message),S.value=[];return}c.success?(S.value=c.salary_slips,console.log("Salary slips loaded:",S.value)):(console.log("API returned unsuccessful response:",c),S.value=[])}catch(d){console.error("Error loading salary slips:",d),S.value=[]}}),qe=()=>g(this,null,function*(){x.value=!0;try{const o={status:p.value.status,attendance_date:p.value.attendanceDate};p.value.inTime&&(o.in_time=`${p.value.attendanceDate} ${p.value.inTime}:00`),p.value.outTime&&(o.out_time=`${p.value.attendanceDate} ${p.value.outTime}:00`);const t=yield b("ascra_frontend.api.mark_attendance",o);t.success?(k("Attendance marked successfully!","success"),V.value=!1,p.value={status:"Present",attendanceDate:new Date().toISOString().split("T")[0],inTime:"",outTime:"",remarks:""},yield J()):t.already_exists&&k(t.message||"Attendance already marked for this date","warning")}catch(o){console.error("Error marking attendance:",o),k(o.message||"Failed to mark attendance","error")}finally{x.value=!1}}),Ge=()=>g(this,null,function*(){j.value=!0;try{console.log("Submitting leave application with data:",{leave_type:m.value.leaveType,from_date:m.value.fromDate,to_date:m.value.toDate,description:m.value.description});const o=yield b("ascra_frontend.api.apply_leave",{leave_type:m.value.leaveType,from_date:m.value.fromDate,to_date:m.value.toDate,description:m.value.description});console.log("Leave application response:",o),o.success?(k("Leave application submitted successfully!","success"),U.value=!1,m.value={leaveType:"",fromDate:"",toDate:"",description:""},yield Y()):(console.error("Leave application failed:",o.message),k(o.message||"Failed to submit leave application","error"))}catch(o){console.error("Error submitting leave application:",o),k(o.message||"Failed to submit leave application","error")}finally{j.value=!1}}),Ke=()=>g(this,null,function*(){try{const o=yield b("ascra_frontend.api.get_salary_slip_print_formats");o.success&&(ee.value=o.print_formats)}catch(o){console.error("Error loading print formats:",o),ee.value=[{name:"Salary Slip Standard",label:"Standard Format"},{name:"Salary Slip with Year to Date",label:"With Year to Date"},{name:"Salary Slip based on Timesheet",label:"Based on Timesheet"}]}}),Je=o=>g(this,null,function*(){try{Z.value=!0,R.value=!0,B.value="",z.value=o;const t=yield b("ascra_frontend.api.get_salary_slip_html",{salary_slip_name:o,print_format:L.value});t.success?B.value=t.html:(console.error("Failed to load salary slip preview:",t.message),k("Failed to load salary slip preview: "+t.message,"error"),Q())}catch(t){console.error("Error loading salary slip preview:",t),k("Error loading salary slip preview: "+t.message,"error"),Q()}finally{R.value=!1}}),ne=o=>g(this,null,function*(){try{const t=`/api/method/ascra_frontend.api.download_salary_slip_pdf?salary_slip_name=${encodeURIComponent(o)}&print_format=${encodeURIComponent(L.value)}`,d=document.createElement("a");d.href=t,d.download=`salary_slip_${o}_${L.value.replace(/\s+/g,"_")}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),console.log("Salary slip download initiated for:",o,"with format:",L.value)}catch(t){console.error("Error downloading salary slip:",t),k("Error downloading salary slip: "+t.message,"error")}}),Ye=()=>{z.value&&ne(z.value)},Q=()=>{Z.value=!1,R.value=!1,B.value="",z.value=""},k=(o,t="success")=>{se.value=o,h.value=t,te.value=!0},Qe=()=>{te.value=!1,se.value="",h.value="success"},Xe=o=>{o.target.style.display="none"},T=o=>{if(!o)return null;try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(t){return o}},Ze=o=>{switch(o){case"Active":return"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium";case"Inactive":return"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium";case"Suspended":return"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium";case"Left":return"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium";default:return"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"}},ie=o=>{switch(o){case 0:return"bg-yellow-100 text-yellow-800";case 1:return"bg-green-100 text-green-800";case 2:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},et=o=>{switch(o){case"Draft":return"bg-yellow-100 text-yellow-800";case"Submitted":return"bg-green-100 text-green-800";case"Cancelled":return"bg-red-100 text-red-800";case"Withheld":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},tt=()=>{J(H.value,O.value)},st=()=>{H.value="",O.value="",J()},ot=()=>{oe(W.value,q.value)},at=()=>{W.value="",q.value="",oe()},lt=()=>{Y(G.value,K.value)},rt=()=>{G.value="",K.value="",Y()};return dt(()=>g(this,null,function*(){try{yield Promise.all([He(),ze(),J(),Y(),Oe(),Ke(),We()])}catch(o){console.error("Error initializing employee dashboard:",o),f.value="Failed to load dashboard data"}finally{$.value=!1}})),(o,t)=>{var c,de,ue,ce,pe,me,ve,ge,ye,xe,be,fe,_e,we,he,ke,Ce,Se,De,Ae,je,Te,Fe,Le,Me,Ee,Pe,Ue,Ve,Be;const d=ct("Button");return a(),l("div",mt,[N(pt),e("div",vt,[e("div",gt,[e("div",yt,[t[25]||(t[25]=e("h1",{class:"text-3xl font-bold text-gray-900"}," Employee Dashboard ",-1)),n.value?(a(),l("p",xt," Welcome, "+r(n.value.employee_name)+"! Manage your attendance, leaves, and view salary information. ",1)):u("",!0)]),$.value?(a(),l("div",bt,[...t[26]||(t[26]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):f.value?(a(),l("div",ft,[e("div",_t,[t[27]||(t[27]=e("svg",{class:"w-6 h-6 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",wt,r(f.value),1)])])):(a(),l("div",ht,[e("div",kt,[e("div",Ct,[e("div",St,[(c=n.value)!=null&&c.image?(a(),l("img",{key:0,src:n.value.image,alt:n.value.employee_name,class:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg",onError:Xe},null,40,Dt)):(a(),l("div",At,r(Ne(((de=n.value)==null?void 0:de.employee_name)||((ue=F.value)==null?void 0:ue.full_name)||"User")),1)),t[28]||(t[28]=e("div",{class:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"},null,-1))]),e("div",jt,[e("h2",Tt,r(((ce=n.value)==null?void 0:ce.employee_name)||((pe=F.value)==null?void 0:pe.full_name)||"Employee"),1),e("p",Ft,r(((me=n.value)==null?void 0:me.designation)||"Employee"),1),e("p",Lt,r(((ve=n.value)==null?void 0:ve.department)||"General"),1),e("p",Mt,"ID: "+r(((ge=n.value)==null?void 0:ge.employee_number)||"Not Available"),1)])]),e("div",null,[t[35]||(t[35]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Personal Information",-1)),e("div",Et,[e("div",Pt,[t[29]||(t[29]=e("span",{class:"text-gray-600"},"Gender:",-1)),e("span",Ut,r(((ye=n.value)==null?void 0:ye.gender)||"Not specified"),1)]),e("div",Vt,[t[30]||(t[30]=e("span",{class:"text-gray-600"},"Date of Birth:",-1)),e("span",Bt,r(T((xe=n.value)==null?void 0:xe.date_of_birth)||"Not specified"),1)]),e("div",It,[t[31]||(t[31]=e("span",{class:"text-gray-600"},"Marital Status:",-1)),e("span",Nt,r(((be=n.value)==null?void 0:be.marital_status)||"Not specified"),1)]),e("div",$t,[t[32]||(t[32]=e("span",{class:"text-gray-600"},"Blood Group:",-1)),e("span",Rt,r(((fe=n.value)==null?void 0:fe.blood_group)||"Not specified"),1)]),e("div",zt,[t[33]||(t[33]=e("span",{class:"text-gray-600"},"Mobile:",-1)),e("span",Ht,r(((_e=n.value)==null?void 0:_e.cell_number)||"Not specified"),1)]),e("div",Ot,[t[34]||(t[34]=e("span",{class:"text-gray-600"},"Personal Email:",-1)),e("span",Wt,r(((we=n.value)==null?void 0:we.personal_email)||"Not specified"),1)])])]),e("div",null,[t[42]||(t[42]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Employment Details",-1)),e("div",qt,[e("div",Gt,[t[36]||(t[36]=e("span",{class:"text-gray-600"},"Company:",-1)),e("span",Kt,r(((he=n.value)==null?void 0:he.company)||"Not specified"),1)]),e("div",Jt,[t[37]||(t[37]=e("span",{class:"text-gray-600"},"Branch:",-1)),e("span",Yt,r(((ke=n.value)==null?void 0:ke.branch)||"Not specified"),1)]),e("div",Qt,[t[38]||(t[38]=e("span",{class:"text-gray-600"},"Date of Joining:",-1)),e("span",Xt,r(T((Ce=n.value)==null?void 0:Ce.date_of_joining)||"Not specified"),1)]),e("div",Zt,[t[39]||(t[39]=e("span",{class:"text-gray-600"},"Reports To:",-1)),e("span",es,r(((Se=n.value)==null?void 0:Se.reports_to_name)||"Not specified"),1)]),e("div",ts,[t[40]||(t[40]=e("span",{class:"text-gray-600"},"Status:",-1)),e("span",{class:_(Ze((De=n.value)==null?void 0:De.status))},r(((Ae=n.value)==null?void 0:Ae.status)||"Active"),3)]),(je=n.value)!=null&&je.holiday_list?(a(),l("div",ss,[t[41]||(t[41]=e("span",{class:"text-gray-600"},"Holiday List:",-1)),e("span",os,r(n.value.holiday_list),1)])):u("",!0)])])]),(Te=n.value)!=null&&Te.person_to_be_contacted||(Fe=n.value)!=null&&Fe.emergency_phone_number?(a(),l("div",as,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Emergency Contact",-1)),e("div",ls,[(Le=n.value)!=null&&Le.person_to_be_contacted?(a(),l("div",rs,[t[43]||(t[43]=e("span",{class:"text-gray-600"},"Contact Person:",-1)),e("p",ns,r(n.value.person_to_be_contacted),1)])):u("",!0),(Me=n.value)!=null&&Me.relation?(a(),l("div",is,[t[44]||(t[44]=e("span",{class:"text-gray-600"},"Relation:",-1)),e("p",ds,r(n.value.relation),1)])):u("",!0),(Ee=n.value)!=null&&Ee.emergency_phone_number?(a(),l("div",us,[t[45]||(t[45]=e("span",{class:"text-gray-600"},"Emergency Phone:",-1)),e("p",cs,r(n.value.emergency_phone_number),1)])):u("",!0)])])):u("",!0),(Pe=n.value)!=null&&Pe.current_address||(Ue=n.value)!=null&&Ue.permanent_address?(a(),l("div",ps,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Address Information",-1)),e("div",ms,[(Ve=n.value)!=null&&Ve.current_address?(a(),l("div",vs,[t[47]||(t[47]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Current Address",-1)),e("p",gs,r(n.value.current_address),1)])):u("",!0),(Be=n.value)!=null&&Be.permanent_address?(a(),l("div",ys,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Permanent Address",-1)),e("p",xs,r(n.value.permanent_address),1)])):u("",!0)])])):u("",!0),!n.value&&!f.value?(a(),l("div",bs,[...t[50]||(t[50]=[e("p",{class:"text-sm text-orange-600 bg-orange-50 px-3 py-2 rounded-lg"}," Employee record not linked. Contact administrator to link your user account with an Employee record. ",-1)])])):u("",!0)])),e("div",fs,[e("div",_s,[e("button",{onClick:t[0]||(t[0]=s=>V.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg border border-blue-600 hover:bg-blue-700 hover:border-blue-700 transition-colors duration-200 shadow-sm"},[...t[51]||(t[51]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("span",{class:"font-medium"},"Mark Attendance",-1)])]),e("button",{onClick:t[1]||(t[1]=s=>U.value=!0),class:"flex items-center space-x-2 px-6 py-3 bg-white text-green-600 rounded-lg border border-green-600 hover:bg-green-50 hover:border-green-700 hover:text-green-700 transition-colors duration-200 shadow-sm"},[...t[52]||(t[52]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",{class:"font-medium"},"Apply Leave",-1)])])])]),e("div",ws,[e("div",hs,[e("nav",ks,[e("button",{onClick:t[2]||(t[2]=s=>w.value="attendance"),class:_(["py-4 px-1 border-b-2 font-medium text-sm",w.value==="attendance"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," View Attendance ",2),e("button",{onClick:t[3]||(t[3]=s=>w.value="leaves"),class:_(["py-4 px-1 border-b-2 font-medium text-sm",w.value==="leaves"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Leave Applications ",2),e("button",{onClick:t[4]||(t[4]=s=>{w.value="salary",oe()}),class:_(["py-4 px-1 border-b-2 font-medium text-sm",w.value==="salary"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Salary Slips ",2)])]),e("div",Cs,[w.value==="attendance"?(a(),l("div",Ss,[e("div",Ds,[e("div",As,[t[55]||(t[55]=e("label",{class:"text-sm font-medium text-blue-900"},"Filter by Date:",-1)),e("div",js,[t[53]||(t[53]=e("label",{class:"text-xs text-blue-700"},"From:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>H.value=s),class:"px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[y,H.value]])]),e("div",Ts,[t[54]||(t[54]=e("label",{class:"text-xs text-blue-700"},"To:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>O.value=s),class:"px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[y,O.value]])]),e("button",{onClick:tt,class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," Apply Filter "),e("button",{onClick:st,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),C.value.length===0?(a(),l("div",Fs," No attendance records found ")):(a(),l("div",Ls,[(a(!0),l(M,null,E(C.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-4 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Ms,r(T(s.attendance_date)),1),e("p",Es,r(s.status),1),s.in_time?(a(),l("p",Ps,"In: "+r(re(s.in_time)),1)):u("",!0),s.out_time?(a(),l("p",Us,"Out: "+r(re(s.out_time)),1)):u("",!0),e("p",Vs,"Status: "+r(s.docstatus_label||"Unknown"),1)]),e("div",Bs,[e("span",{class:_([$e(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3),e("span",{class:_([ie(s.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.docstatus_label),3)])]))),128))]))])):u("",!0),w.value==="leaves"?(a(),l("div",Is,[e("div",Ns,[e("div",$s,[t[58]||(t[58]=e("label",{class:"text-sm font-medium text-green-900"},"Filter by Date:",-1)),e("div",Rs,[t[56]||(t[56]=e("label",{class:"text-xs text-green-700"},"From:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[7]||(t[7]=s=>G.value=s),class:"px-2 py-1 text-sm border border-green-300 rounded focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[y,G.value]])]),e("div",zs,[t[57]||(t[57]=e("label",{class:"text-xs text-green-700"},"To:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=s=>K.value=s),class:"px-2 py-1 text-sm border border-green-300 rounded focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[y,K.value]])]),e("button",{onClick:lt,class:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors"}," Apply Filter "),e("button",{onClick:rt,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),D.value.length===0?(a(),l("div",Hs," No leave applications found ")):(a(),l("div",Os,[(a(!0),l(M,null,E(D.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Ws,r(s.leave_type),1),e("p",qs,r(T(s.from_date))+" - "+r(T(s.to_date)),1),e("p",Gs,r(s.total_leave_days)+" days",1)]),e("span",{class:_([Re(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3)]))),128))]))])):u("",!0),w.value==="salary"?(a(),l("div",Ks,[e("div",Js,[e("div",Ys,[t[61]||(t[61]=e("label",{class:"text-sm font-medium text-purple-900"},"Filter by Date:",-1)),e("div",Qs,[t[59]||(t[59]=e("label",{class:"text-xs text-purple-700"},"From:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=s=>W.value=s),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"},null,512),[[y,W.value]])]),e("div",Xs,[t[60]||(t[60]=e("label",{class:"text-xs text-purple-700"},"To:",-1)),v(e("input",{type:"date","onUpdate:modelValue":t[10]||(t[10]=s=>q.value=s),class:"px-2 py-1 text-sm border border-purple-300 rounded focus:outline-none focus:ring-1 focus:ring-purple-500"},null,512),[[y,q.value]])]),e("button",{onClick:ot,class:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors"}," Apply Filter "),e("button",{onClick:at,class:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"}," Clear ")])]),S.value.length>0?(a(),l("div",Zs,[e("div",eo,[t[62]||(t[62]=e("label",{for:"printFormat",class:"text-sm font-medium text-blue-900"}," Select Print Format: ",-1)),v(e("select",{id:"printFormat","onUpdate:modelValue":t[11]||(t[11]=s=>L.value=s),class:"block w-64 px-3 py-2 text-sm border border-blue-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(a(!0),l(M,null,E(ee.value,s=>(a(),l("option",{key:s.name,value:s.name},r(s.label),9,to))),128))],512),[[ae,L.value]]),t[63]||(t[63]=e("span",{class:"text-xs text-blue-600"}," This format will be used for both preview and download ",-1))])])):u("",!0),S.value.length===0?(a(),l("div",so,[...t[64]||(t[64]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"No Salary Slips Found",-1),e("p",{class:"text-sm text-gray-500"},[P("Salary slips don't exist in the system yet."),e("br"),P("Contact HR or administrator for salary slip generation.")],-1)])])):(a(),l("div",oo,[(a(!0),l(M,null,E(S.value,s=>(a(),l("div",{key:s.name,class:"flex justify-between items-center p-4 bg-gray-50 rounded-lg"},[e("div",ao,[e("p",lo,r(T(s.start_date))+" - "+r(T(s.end_date)),1),e("p",ro,"Gross: ₹"+r(s.gross_pay)+" | Net: ₹"+r(s.net_pay),1),e("div",no,[e("span",{class:_([et(s.status),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.status),3),e("span",{class:_([ie(s.docstatus),"px-2 py-1 text-xs font-medium rounded-full"])},r(s.docstatus_label),3)])]),e("div",io,[e("button",{onClick:nt=>Je(s.name),class:"px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200"}," Preview ",8,uo),e("button",{onClick:nt=>ne(s.name),class:"px-3 py-1.5 text-sm font-medium text-green-600 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 hover:border-green-300 transition-colors duration-200"}," Download ",8,co)])]))),128))]))])):u("",!0)])]),A.value.length>0?(a(),l("div",po,[t[65]||(t[65]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Leave Balance")],-1)),e("div",mo,[e("div",vo,[(a(!0),l(M,null,E(A.value,s=>(a(),l("div",{key:s.leave_type,class:"bg-blue-50 rounded-lg p-4"},[e("h4",go,r(s.leave_type),1),e("p",yo,r(s.leaves_remaining||s.total_leaves_allocated-(s.leaves_taken||0)),1),e("p",xo,"Available out of "+r(s.total_leaves_allocated),1),e("p",bo,"Used: "+r(s.leaves_taken||0),1)]))),128))])])])):u("",!0)])]),U.value?(a(),l("div",fo,[e("div",_o,[e("div",wo,[t[67]||(t[67]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Apply for Leave",-1)),e("button",{onClick:t[12]||(t[12]=s=>U.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[66]||(t[66]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Ie(Ge,["prevent"]),class:"space-y-4"},[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Leave Type",-1)),v(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>m.value.leaveType=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[68]||(t[68]=e("option",{value:""},"Select Leave Type",-1)),(a(!0),l(M,null,E(I.value,s=>(a(),l("option",{key:s.name,value:s.name},r(s.leave_type_name),9,ho))),128))],512),[[ae,m.value.leaveType]])]),e("div",ko,[e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"From Date",-1)),v(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>m.value.fromDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,m.value.fromDate]])]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"To Date",-1)),v(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>m.value.toDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,m.value.toDate]])])]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Reason",-1)),v(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=s=>m.value.description=s),rows:"3",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Reason for leave..."},null,512),[[y,m.value.description]])]),e("div",Co,[N(d,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:j.value},{default:X(()=>[...t[73]||(t[73]=[P(" Submit Application ",-1)])]),_:1},8,["loading"]),N(d,{type:"button",theme:"gray",variant:"outline",onClick:t[17]||(t[17]=s=>U.value=!1)},{default:X(()=>[...t[74]||(t[74]=[P(" Cancel ",-1)])]),_:1})])],32)])])):u("",!0),V.value?(a(),l("div",So,[e("div",Do,[e("div",Ao,[t[76]||(t[76]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Mark Attendance",-1)),e("button",{onClick:t[18]||(t[18]=s=>V.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[75]||(t[75]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Ie(qe,["prevent"]),class:"space-y-4"},[e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Attendance Date",-1)),v(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>p.value.attendanceDate=s),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,p.value.attendanceDate]])]),e("div",null,[t[79]||(t[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>p.value.status=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[78]||(t[78]=[ut('<option value="Present" data-v-b6a2815c>Present</option><option value="Absent" data-v-b6a2815c>Absent</option><option value="Work From Home" data-v-b6a2815c>Work From Home</option><option value="Half Day" data-v-b6a2815c>Half Day</option><option value="On Leave" data-v-b6a2815c>On Leave</option>',5)])],512),[[ae,p.value.status]])]),p.value.status==="Present"||p.value.status==="Work From Home"?(a(),l("div",jo,[e("div",null,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"In Time",-1)),v(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>p.value.inTime=s),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,p.value.inTime]])]),e("div",null,[t[81]||(t[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Out Time",-1)),v(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>p.value.outTime=s),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[y,p.value.outTime]])])])):u("",!0),e("div",null,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Remarks (Optional)",-1)),v(e("textarea",{"onUpdate:modelValue":t[23]||(t[23]=s=>p.value.remarks=s),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Any additional notes..."},null,512),[[y,p.value.remarks]])]),e("div",To,[N(d,{type:"submit",theme:"blue",variant:"solid",class:"flex-1",loading:x.value},{default:X(()=>[...t[83]||(t[83]=[P(" Mark Attendance ",-1)])]),_:1},8,["loading"]),N(d,{type:"button",theme:"gray",variant:"outline",onClick:t[24]||(t[24]=s=>V.value=!1)},{default:X(()=>[...t[84]||(t[84]=[P(" Cancel ",-1)])]),_:1})])],32)])])):u("",!0),Z.value?(a(),l("div",Fo,[e("div",Lo,[e("div",{class:"flex justify-between items-center p-4 border-b border-gray-200"},[t[86]||(t[86]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Salary Slip Preview",-1)),e("button",{onClick:Q,class:"text-gray-400 hover:text-gray-600"},[...t[85]||(t[85]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Mo,[R.value?(a(),l("div",Eo,[...t[87]||(t[87]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):B.value?(a(),l("div",{key:1,innerHTML:B.value,class:"salary-slip-preview"},null,8,Po)):(a(),l("div",Uo," Failed to load salary slip preview "))]),e("div",{class:"flex justify-end space-x-2 p-4 border-t border-gray-200"},[e("button",{onClick:Ye,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors duration-200"}," Download PDF "),e("button",{onClick:Q,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors duration-200"}," Close ")])])])):u("",!0),te.value?(a(),l("div",Vo,[e("div",Bo,[e("div",Io,[e("div",No,[h.value==="success"?(a(),l("div",$o,[...t[88]||(t[88]=[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):h.value==="error"?(a(),l("div",Ro,[...t[89]||(t[89]=[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):h.value==="warning"?(a(),l("div",zo,[...t[90]||(t[90]=[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)])])):u("",!0),e("div",null,[e("h3",Ho,r(h.value==="success"?"Success":h.value==="error"?"Error":"Warning"),1)])]),e("p",Oo,r(se.value),1),e("div",Wo,[e("button",{onClick:Qe,class:_(["px-4 py-2 rounded-md font-medium transition-colors duration-200",h.value==="success"?"bg-green-600 hover:bg-green-700 text-white":h.value==="error"?"bg-red-600 hover:bg-red-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white"])}," OK ",2)])])])])):u("",!0)])}}},Qo=it(qo,[["__scopeId","data-v-b6a2815c"]]);export{Qo as default};
//# sourceMappingURL=EmployeeDashboard-CiLk1ajS.js.map
