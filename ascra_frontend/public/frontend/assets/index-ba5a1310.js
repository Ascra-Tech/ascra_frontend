var h=(o,t,r)=>new Promise((n,e)=>{var s=a=>{try{m(r.next(a))}catch(d){e(d)}},c=a=>{try{m(r.throw(a))}catch(d){e(d)}},m=a=>a.done?n(a.value):Promise.resolve(a.value).then(s,c);m((r=r.apply(o,t)).next())});import{_ as A,r as E,o as P,c as b,a as v,b as f,d as w,e as $,f as I,g as q,h as u,l as O,i as R,s as D,j as k,p as S,k as T,m as V,I as C,n as N,q as x,D as B,t as U,u as F,v as M}from"./frappe-ui-0cdb16bb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();const j={};function H(o,t){const r=E("router-view");return P(),b("div",null,[v(r)])}const G=A(j,[["render",H]]),g=f({url:"frappe.auth.get_logged_user",cache:"User",onError(o){o&&o.exc_type==="AuthenticationError"&&p.push({name:"LoginPage"})}});function _(){let t=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return t==="Guest"&&(t=null),t}const l=w({login:f({url:"login",makeParams({email:o,password:t}){return{usr:o,pwd:t}},onSuccess(o){g.reload(),l.user=_(),l.login.reset(),p.replace("/dashboard")}}),logout:f({url:"logout",onSuccess(){g.reset(),l.user=_(),p.replace({name:"Login"})}}),user:_(),isLoggedIn:$(()=>!!l.user)}),K=[{path:"/",name:"Home",component:()=>u(()=>import("./Home-a78ed493.js"),["assets/Home-a78ed493.js","assets/Navigation-45ac07b9.js","assets/frappe-ui-0cdb16bb.js","assets/frappe-ui-1d25eb54.css"]),meta:{requiresAuth:!1}},{name:"Login",path:"/account/login",component:()=>u(()=>import("./Login-5a4dc5af.js"),["assets/Login-5a4dc5af.js","assets/frappe-ui-0cdb16bb.js","assets/frappe-ui-1d25eb54.css","assets/Navigation-45ac07b9.js"]),meta:{requiresAuth:!1}},{name:"Signup",path:"/account/signup",component:()=>u(()=>import("./Signup-a3c6bd8b.js"),["assets/Signup-a3c6bd8b.js","assets/frappe-ui-0cdb16bb.js","assets/frappe-ui-1d25eb54.css","assets/Navigation-45ac07b9.js"]),meta:{requiresAuth:!1}},{name:"Dashboard",path:"/dashboard",component:()=>u(()=>import("./Dashboard-91780f2f.js"),["assets/Dashboard-91780f2f.js","assets/Navigation-45ac07b9.js","assets/frappe-ui-0cdb16bb.js","assets/frappe-ui-1d25eb54.css"]),meta:{requiresAuth:!0}},{name:"EmployeeDashboard",path:"/employee-dashboard",component:()=>u(()=>import("./EmployeeDashboard-b7218d0e.js"),["assets/EmployeeDashboard-b7218d0e.js","assets/frappe-ui-0cdb16bb.js","assets/frappe-ui-1d25eb54.css","assets/Navigation-45ac07b9.js"]),meta:{requiresAuth:!0,requiresEmployeeRole:!0}}],p=I({history:q("/frontend"),routes:K});p.beforeEach((o,t,r)=>h(void 0,null,function*(){let n=l.isLoggedIn;try{yield g.promise}catch(s){n=!1}const e=o.meta.requiresAuth;o.name==="Login"&&n?r({name:"Dashboard"}):e&&!n?r({name:"Login"}):r()}));const W=9e3;let y=null;function z(){const o=window.location.hostname,t=window.site_name,r=window.location.port?`:${W}`:"",e=`${r?"http":"https"}://${o}${r}/${t}`;return y=O(e,{withCredentials:!0,reconnectionAttempts:5}),y}const L={Button:T,TextInput:V,Input:C,FormControl:N,ErrorMessage:x,Dialog:B,Alert:U,Badge:F},i=R(G);D("resourceFetcher",M);i.use(p);i.use(k);i.use(S);const J=z();i.config.globalProperties.$socket=J;for(const o in L)i.component(o,L[o]);i.mount("#app");export{l as s};
//# sourceMappingURL=index-ba5a1310.js.map
